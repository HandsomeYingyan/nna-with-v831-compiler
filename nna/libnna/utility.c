/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

bool __fastcall nms_cmpScore(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, float a17, int a18, int a19, int a20, float a21);
unsigned int __fastcall nna_data_to_mat(int a1, int a2, int a3, int a4, int a5);
int __fastcall nna_data_to_mat_hw(int a1, int a2, int a3, int a4, int a5);
int __fastcall save_buf_to_file(const char *a1, const void *a2, size_t a3);
int __fastcall load_buf_form_file(const char *a1, void *a2, size_t a3);
int __fastcall from_rgb_to_rgb_img(int result, float *a2, int a3, int a4);
_BYTE *__fastcall from_rgb_to_gray_mean(_BYTE *result, float *a2, int a3, int a4);
_BYTE *__fastcall from_rgb_to_gray_img(_BYTE *result, float *a2, int a3, int a4);
int __fastcall xrgb_to_y(int result, unsigned __int8 *a2, int a3, int a4);
int __fastcall dump_float(float *a1, int a2);
int __fastcall dump_double(__int64 *a1, int a2);
int __fastcall dump_buf_line(unsigned __int8 *a1, int a2, int a3);
int __fastcall dump_buf(unsigned __int8 *a1, int a2);
int nna_hw_reset_xxx();
int __fastcall nna_m_softmax_c2(int result, int a2, int a3);
float __fastcall nna_m_sigmoid(float result, int a2, int a3);
float __fastcall nna_m_softmax(float result, int a2, int a3);
int __fastcall nna_mean(int result, int a2);
int __fastcall nna_fd_softmax(int result, int a2);
int __fastcall nna_data_cut(int result, int a2, int a3, char *a4, int a5, int a6, int a7, int a8);
int __fastcall data_reshpe(unsigned __int8 *a1, int a2, int a3, int a4, int a5);
_BYTE *__fastcall float_to_i8(_BYTE *result, float *a2, signed int a3, char a4, int a5);
float *__fastcall u8_to_float(float *result, unsigned __int8 *a2, signed int a3, char a4, int a5);
float *__fastcall i8_to_float(float *result, char *a2, signed int a3, int a4, int a5);
_BYTE *__fastcall float_to_u8(_BYTE *result, float *a2, signed int a3, char a4, int a5);
signed int __fastcall xramset(int a1, int a2, int a3, signed int a4);
int __fastcall xramcpy(__int64 a1, __int64 a2, size_t n, int a4);
int __fastcall xdump_buf(__int64 a1, signed int a2);
int __fastcall diff_mem(size_t n, int a2, unsigned int a3, int a4, signed int na, char a6);
signed int __fastcall xmem(FILE *a1, int a2, int a3, int a4, size_t a5);
signed int __fastcall nna_diff_file(const char *a1, char *a2);
signed int __fastcall xfile(FILE *a1, int a2, int a3, int a4, signed int a5, int a6);
void __fastcall permuteArray(char *a1, signed int a2, size_t a3, const void *a4);
char *__fastcall clearMakredEntries(char *result, _DWORD *a2, size_t a3, int a4);
void __fastcall reorg(__int64 a1, double a2, __int64 a3, __int64 a4);
int __fastcall xfeatcpy(int result, unsigned __int8 *a2, int a3, int a4, int a5, int a6);
signed int __fastcall xchw2hwc(signed int result, int a2, int a3, int a4, int a5);
int __fastcall xhwc2chw(unsigned __int8 *a1, unsigned __int8 *a2, int a3, int a4, int a5);
signed int __fastcall xchw2whc(signed int result, int a2, int a3, int a4, int a5);
int __fastcall trace_timei(int a1);
int trace_time();
int trace_time_start();
int __fastcall trace_time_end(int a1, int a2, int a3);
int __fastcall nna_concat_cpu(size_t a1, int a2, int a3, int a4, size_t a5, int a6, int a7);
int __fastcall nna_sigmoid_cpu(__int64 a1, int a2, char a3, int a4, int a5, int a6, signed int a7);
float __fastcall nna_sigmoid_cpu_buf(float result, int a2, int a3, char a4, int a5, int a6, int a7);
float __fastcall fun_swish(float a1);
float __fastcall fun_sigmoid(float x);
float __fastcall nna_build_swish_table(float result, signed int a2, int a3, char a4, int a5);
int __fastcall std::vector<Bbox,std::allocator<Bbox>>::at(int *a1, unsigned int a2);
void **__fastcall std::_Vector_base<int,std::allocator<int>>::~_Vector_base(void **a1);
void __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(int a1, _DWORD *a2);
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree(int a1);
void __fastcall std::vector<int,std::allocator<int>>::_M_default_append(void **a1, unsigned int a2);
void __fastcall std::vector<int,std::allocator<int>>::resize(int a1, unsigned int a2);
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(int a1, float *a2);
int __fastcall ZNSt8_Rb_treeIfSt4pairIKfiESt10_Select1stIS2_ESt4lessIfESaIS2_EE5eraseB5cxx11ESt17_Rb_tree_iteratorIS2_E(int a1, int a2);
void **__fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base(void **a1);
int __fastcall __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(int (__fastcall **a1)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), _DWORD *a2, const void *a3);
void *__fastcall std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(void *src, int (__fastcall *a2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
char *__fastcall std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
int __fastcall std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(int a1, int a2);
void *__fastcall std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int (__fastcall *a24)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
void *__fastcall std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(const void *a1, int a2, void *a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
void *__fastcall std::swap<Bbox>(void *src, void *a2);
char *__fastcall std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
char *__fastcall std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
size_t __fastcall std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(void *src, int a2, char *a3);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_default_append(int a1, unsigned int a2);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::resize(_DWORD *a1, unsigned int a2);
char **__fastcall std::vector<Bbox,std::allocator<Bbox>>::operator=(char **a1, char **a2);
char *__fastcall nna_nms_min(char **a1);
char *__fastcall nna_nms_union(char **a1);
int GLOBAL__sub_I_utility_cpp();
// FILE *fopen(const char *filename, const char *modes);
// int printf(const char *format, ...);
// size_t fwrite(const void *ptr, size_t size, size_t n, FILE *s);
// int fclose(FILE *stream);
// size_t fread(void *ptr, size_t size, size_t n, FILE *stream);
// int putchar(int c);
// int fflush(FILE *stream);
// int open(const char *file, int oflag, ...);
// void *mmap(void *addr, size_t len, int prot, int flags, int fd, __off_t offset);
// int usleep(__useconds_t useconds);
// int munmap(void *addr, size_t len);
// int *_errno_location(void);
// char *strerror(int errnum);
// int fprintf(FILE *stream, const char *format, ...);
// void exit(int status);
// int close(int fd);
// float expf(float x);
// void *memcpy(void *dest, const void *src, size_t n);
// void *memset(void *s, int c, size_t n);
// void *malloc(size_t size);
// int puts(const char *s);
// void free(void *ptr);
// int fseek(FILE *stream, int off, int whence);
// int ftell(FILE *stream);
// float sqrtf(float x);
// void *calloc(size_t nmemb, size_t size);
// int gettimeofday(struct timeval *tv, __timezone_ptr_t tz);
// _DWORD std::__throw_out_of_range_fmt(const char *, ...); idb
// void __cdecl operator delete(void *); idb
// void __cdecl __noreturn std::__throw_length_error(const char *); idb
// _DWORD __cdecl operator new(unsigned int); idb
// void *memmove(void *dest, const void *src, size_t n);
// int __fastcall std::_Rb_tree_insert_and_rebalance(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall std::_Rb_tree_increment(_DWORD); weak
// int __fastcall std::_Rb_tree_rebalance_for_erase(_DWORD, _DWORD); weak
// void __noreturn std::__throw_bad_alloc(void); idb
// int __fastcall std::_Rb_tree_decrement(_DWORD); weak
// _DWORD std::ios_base::Init::Init(std::ios_base::Init *__hidden this); idb
// int __fastcall _aeabi_atexit(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl std::ios_base::Init::~Init(std::ios_base::Init *__hidden this); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN std::__ioinit; // weak
int trace_time::time_index; // weak
_UNKNOWN g_tv; // weak
int tv_run_time_start; // weak
int dword_4768; // weak
// extern struct _IO_FILE *stdout;
// extern struct _IO_FILE *stderr;
// extern _UNKNOWN _dso_handle; weak


//----- (00000004) --------------------------------------------------------
bool __fastcall nms_cmpScore(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, float a17, int a18, int a19, int a20, float a21)
{
  float *v21; // r12
  float v23; // [sp+0h] [bp-10h]

  v21 = &v23 - 1;
  *((_DWORD *)v21 + 1) = a1;
  *((_DWORD *)v21 + 2) = a2;
  *((_DWORD *)v21 + 3) = a3;
  *((_DWORD *)v21 + 4) = a4;
  return v23 < a21;
}

//----- (0000003C) --------------------------------------------------------
unsigned int __fastcall nna_data_to_mat(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // lr
  int v6; // r9
  int v7; // r0
  int v8; // r12
  unsigned int result; // r0
  int v10; // r12
  int v11; // lr
  int v12; // r5
  int v13; // r8
  int v14; // r7
  _BYTE *v15; // r6
  int i; // r4
  unsigned int v17; // [sp+0h] [bp-38h]
  int v18; // [sp+8h] [bp-30h]

  v5 = a4 * a3;
  v18 = a1;
  v6 = a3 & ~(a3 >> 31);
  v7 = a5 + 7;
  if ( a5 + 7 < 0 )
    v7 = a5 + 14;
  v8 = v5 + 3;
  result = v7 & 0xFFFFFFF8;
  if ( v5 + 3 < 0 )
    v8 = v5 + 6;
  v17 = (v8 & 0xFFFFFFFC) - v5;
  v10 = 0;
  v11 = 0;
  while ( v10 < a5 )
  {
    v12 = 0;
    v13 = v11;
    v14 = 0;
    while ( v14 < a4 )
    {
      v15 = (_BYTE *)(v18 + v13);
      for ( i = a2 + v10 + result * v12; ; *v15++ = *(_BYTE *)(i - result) )
      {
        i += result;
        if ( a3 <= (signed int)&v15[-v18 - v13] )
          break;
      }
      v13 += v6;
      ++v14;
      v12 += a3;
    }
    ++v10;
    v11 += v17 + v6 * (a4 & ~(a4 >> 31));
  }
  return result;
}

//----- (00000120) --------------------------------------------------------
int __fastcall nna_data_to_mat_hw(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r8
  int v6; // r0
  int v7; // r1
  int v8; // r1
  unsigned int v9; // r1
  int result; // r0
  int v11; // r12
  int v12; // r6
  int v13; // r5
  int v14; // r4
  int v15; // r7
  _BYTE *i; // lr
  unsigned int v17; // [sp+4h] [bp-3Ch]
  int v18; // [sp+10h] [bp-30h]
  int v19; // [sp+14h] [bp-2Ch]

  v5 = a4 & ~(a4 >> 31);
  v18 = a1;
  v6 = a4 * a3;
  v19 = a2;
  v7 = a4 * a3 + 3;
  if ( v7 < 0 )
    v7 = v6 + 6;
  v17 = (v7 & 0xFFFFFFFC) - v6;
  v8 = a5 + 7;
  if ( a5 + 7 < 0 )
    v8 = a5 + 14;
  v9 = v8 & 0xFFFFFFF8;
  result = 0;
  v11 = 0;
  while ( result < a5 )
  {
    v12 = v11;
    v13 = 0;
    v14 = v19 + result;
    while ( v13 < a3 )
    {
      v15 = v14;
      for ( i = (_BYTE *)(v18 + v12); ; ++i )
      {
        v15 += v9 * a3;
        if ( a4 <= (signed int)&i[-v18 - v12] )
          break;
        *i = *(_BYTE *)(v15 - v9 * a3);
      }
      v12 += v5;
      ++v13;
      v14 += v9;
    }
    ++result;
    v11 += v17 + v5 * (a3 & ~(a3 >> 31));
  }
  return result;
}

//----- (0000020C) --------------------------------------------------------
int __fastcall save_buf_to_file(const char *a1, const void *a2, size_t a3)
{
  const void *v3; // r5
  size_t v4; // r6
  FILE *v5; // r0
  FILE *v6; // r4

  v3 = a2;
  v4 = a3;
  v5 = fopen(a1, "wb");
  v6 = v5;
  if ( !v5 )
    return printf("Could not open file for writing.");
  fwrite(v3, 1u, v4, v5);
  return fclose(v6);
}

//----- (00000270) --------------------------------------------------------
int __fastcall load_buf_form_file(const char *a1, void *a2, size_t a3)
{
  void *v3; // r5
  size_t v4; // r6
  FILE *v5; // r0
  FILE *v6; // r4

  v3 = a2;
  v4 = a3;
  v5 = fopen(a1, "rb");
  v6 = v5;
  if ( !v5 )
    return printf("Could not open file for writing.");
  fread(v3, v4, 1u, v5);
  return fclose(v6);
}

//----- (000002D4) --------------------------------------------------------
int __fastcall from_rgb_to_rgb_img(int result, float *a2, int a3, int a4)
{
  int v4; // lr
  int v5; // r2
  int v6; // r3
  float *v7; // r4
  float *v8; // r2
  float v9; // s15
  float v10; // s11
  float v11; // s12

  v4 = a4 * a3;
  v5 = a3 * 2 * a4;
  v6 = 0;
  v7 = &a2[v4];
  v8 = &a2[v5];
  while ( 1 )
  {
    result += 3;
    if ( v6 >= v4 )
      break;
    ++v6;
    v9 = *a2;
    ++a2;
    v10 = *v7;
    ++v7;
    v11 = *v8;
    ++v8;
    *(_BYTE *)(result - 3) = (unsigned int)(float)((float)(v9 * 128.0) + 127.0);
    *(_BYTE *)(result - 2) = (unsigned int)(float)((float)(v10 * 128.0) + 127.0);
    *(_BYTE *)(result - 1) = (unsigned int)(float)((float)(v11 * 128.0) + 127.0);
  }
  return result;
}

//----- (00000368) --------------------------------------------------------
_BYTE *__fastcall from_rgb_to_gray_mean(_BYTE *result, float *a2, int a3, int a4)
{
  _BYTE *v4; // r12
  int v5; // r4
  float *v6; // lr
  float *v7; // r2
  float v8; // s13
  float v9; // s14
  float v10; // s15
  signed int v11; // r3

  v4 = result;
  v5 = a4 * a3;
  v6 = &a2[a4 * a3];
  v7 = &a2[a3 * 2 * a4];
  while ( v5 > v4 - result )
  {
    v8 = *v6;
    ++v6;
    v9 = *a2;
    ++a2;
    v10 = *v7;
    ++v7;
    v11 = 150 * vcvts_n_s32_f32(v8, 7u) + 76 * vcvts_n_s32_f32(v9, 7u) + 29 * vcvts_n_s32_f32(v10, 7u);
    if ( v11 < 0 )
      LOWORD(v11) = v11 + 255;
    *v4++ = BYTE1(v11);
  }
  return result;
}

//----- (000003F0) --------------------------------------------------------
_BYTE *__fastcall from_rgb_to_gray_img(_BYTE *result, float *a2, int a3, int a4)
{
  _BYTE *v4; // r12
  int v5; // r4
  float *v6; // lr
  float *v7; // r2
  float v8; // s14
  float v9; // s13
  float v10; // s15
  int v11; // r3

  v4 = result;
  v5 = a4 * a3;
  v6 = &a2[a4 * a3];
  v7 = &a2[a3 * 2 * a4];
  while ( v5 > v4 - result )
  {
    v8 = *a2;
    ++a2;
    v9 = *v6;
    ++v6;
    v10 = *v7;
    ++v7;
    v11 = 150 * (signed int)v9 + 76 * (signed int)v8 + 29 * (signed int)v10;
    if ( v11 < 0 )
      LOWORD(v11) = v11 + 255;
    *v4++ = BYTE1(v11);
  }
  return result;
}

//----- (00000478) --------------------------------------------------------
int __fastcall xrgb_to_y(int result, unsigned __int8 *a2, int a3, int a4)
{
  _BYTE *v4; // r4
  int v5; // r5
  int v6; // r6
  _BYTE *v7; // r7
  unsigned __int8 *i; // r12

  v4 = (_BYTE *)result;
  v5 = -result;
  v6 = 0;
  while ( v6 < a4 )
  {
    v7 = v4;
    for ( i = &a2[3 * (_DWORD)&v4[-result]];
          ;
          *v7++ = (unsigned __int16)(76 * (unsigned int)*(i - 3) >> (-106 * *(i - 2) + 8) >> (29 * *(i - 1) + 8)) >> 8 )
    {
      i += 3;
      if ( a3 <= (signed int)&v7[v5] )
        break;
    }
    v4 += a3;
    ++v6;
    v5 -= a3;
  }
  return result;
}

//----- (00000508) --------------------------------------------------------
int __fastcall dump_float(float *a1, int a2)
{
  float *v2; // r5
  int v3; // r4
  int v4; // r7
  int v5; // r1
  float v6; // s15

  v2 = a1;
  v3 = 0;
  v4 = a2;
  printf("\nFdump:%d");
  while ( v3 < v4 )
  {
    if ( !(v3 & 0xF) )
      printf("\n %08X:", v2);
    v6 = *v2;
    ++v2;
    ++v3;
    printf("%8.3f ", v5, v6);
  }
  return putchar(10);
}

//----- (00000590) --------------------------------------------------------
int __fastcall dump_double(__int64 *a1, int a2)
{
  __int64 *v2; // r5
  int v3; // r4
  int v4; // r7
  int v5; // r1
  __int64 v6; // t1

  v2 = a1;
  v3 = 0;
  v4 = a2;
  printf("\nFdump");
  while ( v3 < v4 )
  {
    if ( !(v3 & 0xF) )
      printf("\n %08X:", v2);
    v6 = *v2;
    ++v2;
    ++v3;
    printf("%8.3f ", v5, v6);
  }
  return putchar(10);
}

//----- (00000610) --------------------------------------------------------
int __fastcall dump_buf_line(unsigned __int8 *a1, int a2, int a3)
{
  unsigned __int8 *v3; // r5
  int v4; // r6
  int v5; // r8
  unsigned __int8 *v6; // r4
  int v7; // t1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  printf("\n dump :%d [%p]", a3, a1);
  v6 = v3;
  fflush((FILE *)stdout);
  while ( v4 > v6 - v3 )
  {
    if ( !((v6 - v3) % v5) )
      printf("\n %08X:", v6);
    v7 = *v6++;
    printf("%02x ", v7);
  }
  return putchar(10);
}

//----- (000006C4) --------------------------------------------------------
int __fastcall dump_buf(unsigned __int8 *a1, int a2)
{
  return dump_buf_line(a1, 64, a2);
}

//----- (000006DC) --------------------------------------------------------
int nna_hw_reset_xxx()
{
  int fd; // r0
  int v1; // r4
  int result; // r0
  _DWORD *v3; // r0
  _DWORD *v4; // r5
  FILE *stream; // ST14_4
  int v6; // r4
  int *v7; // r0
  char *v8; // r0
  __off_t v9; // [sp+4h] [bp-24h]

  printf("\n# nna_hw_reset");
  fd = open("/dev/mem", 2050);
  v1 = fd;
  if ( fd < 0 )
    return printf("# open(/dev/mem) failed.");
  v3 = mmap(0, 0x10000u, 3, 1, fd, v9);
  v4 = v3;
  v3[11] = 0;
  usleep(0x14u);
  v4[11] = 0x8000;
  result = munmap(v4, 0x10000u);
  if ( result == -1 )
  {
    stream = (FILE *)stderr;
    v6 = *_errno_location();
    v7 = _errno_location();
    v8 = strerror(*v7);
    fprintf(stream, "Error at line %d, file %s (%d) [%s]\n", 285, "utility.cpp", v6, v8, -16121856, 0);
    exit(1);
  }
  if ( v1 )
    result = close(v1);
  return result;
}

//----- (00000814) --------------------------------------------------------
int __fastcall nna_m_softmax_c2(int result, int a2, int a3)
{
  float *v3; // r5
  int v4; // r7
  int v5; // r4
  int v6; // r9
  int v7; // r4
  float *v8; // r6
  float v9; // s16
  float *v10; // r8
  float v11; // s15
  signed int v12; // r10
  float v13; // s17
  float v14; // s0

  v3 = (float *)result;
  v4 = a3 * a2;
  v5 = a3 * a2 + 3;
  if ( v5 < 0 )
    v5 = v4 + 6;
  v6 = 0;
  v7 = 16 * (v5 >> 2);
  v8 = (float *)(result + v7);
  while ( v6 < v4 )
  {
    v9 = *v3;
    v10 = v3;
    v11 = *v8;
    ++v8;
    v12 = 2;
    v13 = 0.0;
    if ( *v3 < -3.4028e38 )
      v9 = -3.4028e38;
    if ( v9 <= v11 )
      v9 = v11;
    do
    {
      v14 = *v10 - v9;
      *(float *)&result = expf(*(float *)&result);
      *v10 = v14;
      --v12;
      v13 = v13 + v14;
      v10 = (float *)((char *)v10 + v7);
    }
    while ( v12 );
    ++v6;
    *v3 = *v3 / v13;
    ++v3;
    *(v8 - 1) = *(v8 - 1) / v13;
  }
  return result;
}

//----- (000008D0) --------------------------------------------------------
float __fastcall nna_m_sigmoid(float result, int a2, int a3)
{
  float *v3; // r5
  int v4; // r4
  int v5; // r6
  float v6; // s0

  v3 = (float *)LODWORD(result);
  v4 = 0;
  v5 = a3 * a2;
  while ( v4 < v5 )
  {
    ++v4;
    v6 = -*v3;
    result = expf(result);
    *v3 = 1.0 / (float)(v6 + 1.0);
    ++v3;
  }
  return result;
}

//----- (00000924) --------------------------------------------------------
float __fastcall nna_m_softmax(float result, int a2, int a3)
{
  float *v3; // r5
  int v4; // r7
  int v5; // r4
  int v6; // r9
  int v7; // r4
  float *v8; // r6
  float v9; // s16
  float *v10; // r8
  float v11; // s15
  signed int v12; // r10
  float v13; // s17
  float v14; // s0

  v3 = (float *)LODWORD(result);
  v4 = a3 * a2;
  v5 = a3 * a2 + 3;
  if ( v5 < 0 )
    v5 = v4 + 6;
  v6 = 0;
  v7 = 16 * (v5 >> 2);
  v8 = (float *)(LODWORD(result) + v7);
  while ( v6 < v4 )
  {
    v9 = *v3;
    v10 = v3;
    v11 = *v8;
    ++v8;
    v12 = 2;
    v13 = 0.0;
    if ( *v3 < -3.4028e38 )
      v9 = -3.4028e38;
    if ( v9 <= v11 )
      v9 = v11;
    do
    {
      v14 = *v10 - v9;
      result = expf(result);
      *v10 = v14;
      --v12;
      v13 = v13 + v14;
      v10 = (float *)((char *)v10 + v7);
    }
    while ( v12 );
    ++v6;
    *v3 = *v3 / v13;
    ++v3;
    *(v8 - 1) = *(v8 - 1) / v13;
  }
  return result;
}

//----- (000009E0) --------------------------------------------------------
int __fastcall nna_mean(int result, int a2)
{
  int v2; // r3

  v2 = 0;
  while ( v2 < a2 )
  {
    ++v2;
    *(_BYTE *)result -= 127;
  }
  return result;
}

//----- (00000A1C) --------------------------------------------------------
int __fastcall nna_fd_softmax(int result, int a2)
{
  int v2; // r2
  int v3; // r5
  float *v4; // r4
  float *v5; // r6
  float *v6; // r3
  float *v7; // r8
  int v8; // r7
  float v9; // s0
  float v10; // s15
  int v11; // r3
  float v12; // s14
  int v13; // r3
  float v14; // [sp+4h] [bp-1Ch]

  v2 = 0;
  v3 = a2;
  v4 = (float *)result;
  v5 = (float *)result;
  v14 = -3.4028e38;
  while ( v2 < a2 )
  {
    v6 = (float *)result;
    ++v2;
    result += 4;
    if ( v14 >= *v6 )
      v6 = &v14;
    v14 = *v6;
  }
  v7 = v4;
  v8 = 0;
  while ( v8 < v3 )
  {
    ++v8;
    v9 = *v7 - v14;
    *(float *)&result = expf(*(float *)&result);
    *v7 = v9;
    ++v7;
  }
  v10 = 0.0;
  v11 = 0;
  while ( v11 < v3 )
  {
    v12 = *v4;
    ++v4;
    ++v11;
    v10 = v10 + v12;
  }
  v13 = 0;
  while ( v13 < v3 )
  {
    ++v13;
    *v5 = *v5 / v10;
    ++v5;
  }
  return result;
}

//----- (00000AFC) --------------------------------------------------------
int __fastcall nna_data_cut(int result, int a2, int a3, char *a4, int a5, int a6, int a7, int a8)
{
  char *v8; // r7
  int v9; // r6
  size_t v10; // r5
  unsigned __int8 *i; // r4

  v8 = a4;
  v9 = 0;
  v10 = a7 - a5;
  for ( i = (unsigned __int8 *)(result + a5 + a2 * a6);
        ;
        result = (int)memcpy((void *)(unsigned __int8)v8[a5 - a7], (const void *)*i, v10) )
  {
    v8 += v10;
    if ( v9 >= a6 - a8 )
      break;
    ++v9;
  }
  return result;
}

//----- (00000B5C) --------------------------------------------------------
int __fastcall data_reshpe(unsigned __int8 *a1, int a2, int a3, int a4, int a5)
{
  int v5; // r6
  unsigned __int8 *v6; // r4
  unsigned __int8 *v7; // r12
  int v8; // r11
  int v9; // r0
  int v10; // r3
  int v11; // lr
  int v12; // r7
  int v13; // r8
  unsigned __int8 *v14; // r2
  int v15; // r9
  unsigned __int8 *i; // r1
  int v18; // [sp+0h] [bp-38h]
  int v19; // [sp+Ch] [bp-2Ch]

  v5 = a2;
  v18 = a4;
  v6 = a1;
  v19 = a3;
  dump_buf(a1, 64);
  v7 = v6;
  v8 = a5 * v5;
  v9 = -(signed int)v6;
  v10 = 0;
  v11 = 0;
  while ( v11 < v5 )
  {
    v12 = v10;
    v13 = v9;
    v14 = v7;
    v15 = 0;
    while ( v15 < v19 )
    {
      for ( i = v14; a5 > (signed int)&i[v13]; ++i )
        *i = i[v12 - (v14 - v6)];
      ++v15;
      v14 += a5;
      v13 -= a5;
      v12 += v18;
    }
    ++v11;
    v7 += v8;
    v9 -= v8;
    v10 += v18 * v5;
  }
  return dump_buf(v6, 64);
}

//----- (00000C3C) --------------------------------------------------------
_BYTE *__fastcall float_to_i8(_BYTE *result, float *a2, signed int a3, char a4, int a5)
{
  signed int v5; // s12
  _BYTE *v6; // r12
  signed int v7; // r3
  float v8; // s15
  signed int v9; // r2

  v5 = a3;
  v6 = result;
  v7 = 1 << a4;
  while ( a5 > v6 - result )
  {
    v8 = *a2;
    ++a2;
    v9 = (signed int)(float)((float)((float)v5 * v8) / (float)v7);
    if ( v9 < -127 )
      v9 = -127;
    if ( v9 >= 127 )
      LOBYTE(v9) = 127;
    *v6++ = v9;
  }
  return result;
}

//----- (00000CA8) --------------------------------------------------------
float *__fastcall u8_to_float(float *result, unsigned __int8 *a2, signed int a3, char a4, int a5)
{
  signed int v5; // s12
  signed int v6; // r3
  unsigned __int8 *v7; // r2
  unsigned int v8; // t1

  v5 = a3;
  v6 = 1 << a4;
  v7 = a2;
  while ( a5 > v7 - a2 )
  {
    v8 = *v7++;
    *result = (float)((float)v8 * (float)v5) / (float)v6;
    ++result;
  }
  return result;
}

//----- (00000D00) --------------------------------------------------------
float *__fastcall i8_to_float(float *result, char *a2, signed int a3, int a4, int a5)
{
  signed int v5; // s15
  char *v6; // r3
  signed int v7; // t1

  if ( a4 < 0 )
  {
    a3 <<= -(char)a4;
    LOBYTE(a4) = 0;
  }
  v5 = 1 << a4;
  v6 = a2;
  while ( a5 > v6 - a2 )
  {
    v7 = *v6++;
    *result = (float)v7 * (float)((float)a3 / (float)v5);
    ++result;
  }
  return result;
}

//----- (00000D64) --------------------------------------------------------
_BYTE *__fastcall float_to_u8(_BYTE *result, float *a2, signed int a3, char a4, int a5)
{
  _BYTE *v5; // r12
  signed int v6; // r3
  float v7; // s15
  unsigned int v8; // s15

  v5 = result;
  v6 = 1 << a4;
  while ( a5 > v5 - result )
  {
    v7 = *a2;
    ++a2;
    v8 = (signed int)(float)((float)((float)a3 * v7) / (float)v6);
    *v5++ = __usat(v8, v8);
  }
  return result;
}

//----- (00000DC0) --------------------------------------------------------
signed int __fastcall xramset(int a1, int a2, int a3, signed int a4)
{
  int v4; // r8
  int v5; // r11
  signed int v6; // r4
  int v7; // r0
  int fd; // r10
  FILE *stream; // ST14_4
  int v10; // r4
  int *v11; // r0
  char *v12; // r0
  char *v13; // r0
  char *v14; // r7
  FILE *v15; // ST14_4
  int v16; // r4
  int *v17; // r0
  char *v18; // r0
  signed int v19; // r5
  char *v20; // r0
  FILE *v21; // ST14_4
  int v22; // r4
  int *v23; // r0
  char *v24; // r0
  FILE *v25; // ST14_4
  int v26; // r4
  int *v27; // r0
  char *v28; // r0
  __off_t v30; // [sp+4h] [bp-3Ch]
  int v31; // [sp+8h] [bp-38h]
  __int64 v32; // [sp+8h] [bp-38h]
  int v33; // [sp+Ch] [bp-34h]

  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = open("/dev/mem", 1052674);
  if ( v7 == -1 )
  {
    stream = (FILE *)stderr;
    v10 = *_errno_location();
    v11 = _errno_location();
    v12 = strerror(*v11);
    fprintf(stream, "Error at line %d, file %s (%d) [%s]\n", 711, "utility.cpp", v10, v12, v31, v33);
    goto LABEL_4;
  }
  fd = v7;
  while ( 1 )
  {
    v32 = v4 & 0xFFFFF000;
    v13 = (char *)mmap(0, 0x1000u, 3, 1, fd, v30);
    v14 = v13;
    if ( v13 == (char *)-1 )
    {
      v15 = (FILE *)stderr;
      v16 = *_errno_location();
      v17 = _errno_location();
      v18 = strerror(*v17);
      fprintf(v15, "Error at line %d, file %s (%d) [%s]\n", 720, "utility.cpp", v16, v18, v32);
      goto LABEL_4;
    }
    v19 = 4096 - (v4 & 0xFFF);
    v20 = &v13[v4 & 0xFFF];
    if ( v6 < v19 )
      v19 = v6;
    v6 -= v19;
    memset(v20, v5, v19);
    v4 += v19;
    if ( v6 <= 0 )
      break;
    if ( munmap(v14, 0x1000u) == -1 )
    {
      v25 = (FILE *)stderr;
      v26 = *_errno_location();
      v27 = _errno_location();
      v28 = strerror(*v27);
      fprintf(v25, "Error at line %d, file %s (%d) [%s]\n", 742, "utility.cpp", v26, v28, v32);
LABEL_4:
      exit(1);
    }
  }
  if ( munmap(v14, 0x1000u) == -1 )
  {
    v21 = (FILE *)stderr;
    v22 = *_errno_location();
    v23 = _errno_location();
    v24 = strerror(*v23);
    fprintf(v21, "Error at line %d, file %s (%d) [%s]\n", 736, "utility.cpp", v22, v24, v32);
    goto LABEL_4;
  }
  close(fd);
  return v6;
}

//----- (00000FF8) --------------------------------------------------------
int __fastcall xramcpy(__int64 a1, __int64 a2, size_t n, int a4)
{
  signed int v4; // r6
  int fd; // r9
  FILE *v6; // ST10_4
  int v7; // r4
  int *v8; // r0
  char *v9; // r0
  signed int v10; // r7
  char *v11; // r8
  char *v12; // r5
  FILE *v13; // ST10_4
  int v14; // r4
  int *v15; // r0
  char *v16; // r0
  FILE *v17; // ST10_4
  int v18; // r4
  int *v19; // r0
  char *v20; // r0
  int v21; // r3
  FILE *v22; // ST10_4
  int v23; // r4
  int *v24; // r0
  char *v25; // r0
  FILE *v26; // ST10_4
  int v27; // r4
  int *v28; // r0
  char *v29; // r0
  FILE *v30; // ST10_4
  int v31; // r4
  int *v32; // r0
  char *v33; // r0
  FILE *v34; // ST10_4
  int v35; // r4
  int *v36; // r0
  char *v37; // r0
  __off_t v39; // [sp+4h] [bp-44h]
  __int64 v40; // [sp+8h] [bp-40h]
  int stream; // [sp+10h] [bp-38h]
  __int64 v42; // [sp+18h] [bp-30h]

  v42 = a2;
  stream = a1;
  if ( a4 )
  {
    fd = open("/dev/mem", 1052674);
    if ( fd == -1 )
    {
      v6 = (FILE *)stderr;
      v7 = *_errno_location();
      v8 = _errno_location();
      v9 = strerror(*v8);
      fprintf(v6, "Error at line %d, file %s (%d) [%s]\n", 766, "utility.cpp", v7, v9, v40);
      goto LABEL_4;
    }
  }
  v10 = n;
  v11 = (char *)(stream & 0xFFFFF000);
  v12 = (char *)(v42 & 0xFFFFF000);
  while ( 1 )
  {
    if ( a4 & 1 )
    {
      v40 = stream & 0xFFFFF000;
      v11 = (char *)mmap(0, 0x1000u, 3, 1, fd, v39);
      if ( v11 == (char *)-1 )
      {
        v13 = (FILE *)stderr;
        v14 = *_errno_location();
        v15 = _errno_location();
        v16 = strerror(*v15);
        fprintf(v13, "Error at line %d, file %s (%d) [%s]\n", 781, "utility.cpp", v14, v16, v40);
        goto LABEL_4;
      }
    }
    if ( a4 & 2 )
    {
      v40 = (unsigned int)v42 & 0xFFFFF000;
      v12 = (char *)mmap(0, 0x1000u, 3, 1, fd, v39);
      if ( v12 == (char *)-1 )
      {
        v17 = (FILE *)stderr;
        v18 = *_errno_location();
        v19 = _errno_location();
        v20 = strerror(*v19);
        fprintf(v17, "Error at line %d, file %s (%d) [%s]\n", 788, "utility.cpp", v18, v20, v40);
        goto LABEL_4;
      }
    }
    LODWORD(a1) = stream & 0xFFF;
    if ( a4 & 1 )
    {
      v4 = 4096 - a1;
      HIDWORD(a1) = v42;
    }
    v21 = v42 & 0xFFF;
    if ( !(a4 & 1) )
      HIDWORD(a1) = &v12[v21];
    if ( a4 & 2 )
    {
      v4 = 4096 - v21;
      LODWORD(a1) = stream;
    }
    else
    {
      LODWORD(a1) = &v11[a1];
    }
    if ( v4 >= v10 )
      v4 = v10;
    v10 -= v4;
    memcpy((void *)a1, (const void *)HIDWORD(a1), v4);
    stream += v4;
    a1 = v42 + v4;
    v42 += v4;
    if ( v10 <= 0 )
      break;
    if ( a4 & 1 && munmap(v11, 0x1000u) == -1 )
    {
      v30 = (FILE *)stderr;
      v31 = *_errno_location();
      v32 = _errno_location();
      v33 = strerror(*v32);
      fprintf(v30, "Error at line %d, file %s (%d) [%s]\n", 842, "utility.cpp", v31, v33, v40);
      goto LABEL_4;
    }
    if ( a4 & 2 && munmap(v12, 0x1000u) == -1 )
    {
      v34 = (FILE *)stderr;
      v35 = *_errno_location();
      v36 = _errno_location();
      v37 = strerror(*v36);
      fprintf(v34, "Error at line %d, file %s (%d) [%s]\n", 847, "utility.cpp", v35, v37, v40);
LABEL_4:
      exit(1);
    }
  }
  if ( a4 & 1 && munmap(v11, 0x1000u) == -1 )
  {
    v22 = (FILE *)stderr;
    v23 = *_errno_location();
    v24 = _errno_location();
    v25 = strerror(*v24);
    fprintf(v22, "Error at line %d, file %s (%d) [%s]\n", 829, "utility.cpp", v23, v25, v40);
    goto LABEL_4;
  }
  if ( a4 & 2 && munmap(v12, 0x1000u) == -1 )
  {
    v26 = (FILE *)stderr;
    v27 = *_errno_location();
    v28 = _errno_location();
    v29 = strerror(*v28);
    fprintf(v26, "Error at line %d, file %s (%d) [%s]\n", 834, "utility.cpp", v27, v29, v40);
    goto LABEL_4;
  }
  if ( a4 )
    close(fd);
  return v10;
}

//----- (00001424) --------------------------------------------------------
int __fastcall xdump_buf(__int64 a1, signed int a2)
{
  __int64 v2; // r6
  signed int n; // r5
  __int64 v4; // r0
  int v5; // r1
  char v7; // [sp+8h] [bp-1018h]

  v2 = a1;
  n = a2;
  printf("\nXdump :%d", a2);
  HIDWORD(v4) = (signed int)&v7 >> 31;
  LODWORD(v4) = &v7;
  xramcpy(v4, v2, n, 2);
  if ( n >= 4096 )
    v5 = 4096;
  else
    v5 = n;
  return dump_buf((unsigned __int8 *)&v7, v5);
}

//----- (000014A8) --------------------------------------------------------
int __fastcall diff_mem(size_t n, int a2, unsigned int a3, int a4, signed int na, char a6)
{
  signed int v6; // r6
  int v7; // r0
  FILE *v8; // ST10_4
  int v9; // r4
  int *v10; // r0
  char *v11; // r0
  int fd; // r9
  int v13; // r7
  char *v14; // r8
  char *v15; // r5
  FILE *v16; // ST10_4
  int v17; // r4
  int *v18; // r0
  char *v19; // r0
  FILE *v20; // ST10_4
  int v21; // r4
  int *v22; // r0
  char *v23; // r0
  int v24; // r2
  char *v25; // r0
  int v26; // r3
  char *v27; // r1
  FILE *v28; // ST10_4
  int v29; // r4
  int *v30; // r0
  char *v31; // r0
  FILE *v32; // ST10_4
  int v33; // r4
  int *v34; // r0
  char *v35; // r0
  FILE *v36; // ST10_4
  int v37; // r4
  int *v38; // r0
  char *v39; // r0
  FILE *v40; // ST10_4
  int v41; // r4
  int *v42; // r0
  char *v43; // r0
  __off_t v45; // [sp+4h] [bp-44h]
  __int64 v46; // [sp+8h] [bp-40h]
  size_t stream; // [sp+10h] [bp-38h]
  unsigned int v48; // [sp+18h] [bp-30h]

  stream = n;
  v48 = a3;
  v7 = open("/dev/mem", 1052674);
  if ( v7 == -1 )
  {
    v8 = (FILE *)stderr;
    v9 = *_errno_location();
    v10 = _errno_location();
    v11 = strerror(*v10);
    fprintf(v8, "Error at line %d, file %s (%d) [%s]\n", 876, "utility.cpp", v9, v11, v46);
    goto LABEL_3;
  }
  fd = v7;
  v13 = 0;
  v14 = (char *)(stream & 0xFFFFF000);
  v15 = (char *)(v48 & 0xFFFFF000);
  while ( 1 )
  {
    if ( a6 & 1 )
    {
      v46 = stream & 0xFFFFF000;
      v14 = (char *)mmap(0, 0x1000u, 3, 1, fd, v45);
      if ( v14 == (char *)-1 )
      {
        v16 = (FILE *)stderr;
        v17 = *_errno_location();
        v18 = _errno_location();
        v19 = strerror(*v18);
        fprintf(v16, "Error at line %d, file %s (%d) [%s]\n", 890, "utility.cpp", v17, v19, v46);
        goto LABEL_3;
      }
    }
    if ( a6 & 2 )
    {
      v46 = v48 & 0xFFFFF000;
      v15 = (char *)mmap(0, 0x1000u, 3, 1, fd, v45);
      if ( v15 == (char *)-1 )
      {
        v20 = (FILE *)stderr;
        v21 = *_errno_location();
        v22 = _errno_location();
        v23 = strerror(*v22);
        fprintf(v20, "Error at line %d, file %s (%d) [%s]\n", 897, "utility.cpp", v21, v23, v46);
        goto LABEL_3;
      }
    }
    v24 = stream & 0xFFF;
    v25 = &v14[v24];
    v26 = v48 & 0xFFF;
    v27 = &v15[v26];
    if ( a6 & 1 )
    {
      v6 = 4096 - v24;
      if ( v27 == (char *)v48 )
        ++v13;
    }
    if ( a6 & 2 )
    {
      v6 = 4096 - v26;
      if ( v25 == (char *)stream )
        ++v13;
    }
    if ( v6 >= na )
      v6 = na;
    memcpy(v25, v27, v6);
    stream += v6;
    v48 += v6;
    na -= v6;
    if ( na <= 0 )
      break;
    if ( a6 & 1 && munmap(v14, 0x1000u) == -1 )
    {
      v36 = (FILE *)stderr;
      v37 = *_errno_location();
      v38 = _errno_location();
      v39 = strerror(*v38);
      fprintf(v36, "Error at line %d, file %s (%d) [%s]\n", 953, "utility.cpp", v37, v39, v46);
      goto LABEL_3;
    }
    if ( a6 & 2 && munmap(v15, 0x1000u) == -1 )
    {
      v40 = (FILE *)stderr;
      v41 = *_errno_location();
      v42 = _errno_location();
      v43 = strerror(*v42);
      fprintf(v40, "Error at line %d, file %s (%d) [%s]\n", 958, "utility.cpp", v41, v43, v46);
LABEL_3:
      exit(1);
    }
  }
  if ( a6 & 1 && munmap(v14, 0x1000u) == -1 )
  {
    v28 = (FILE *)stderr;
    v29 = *_errno_location();
    v30 = _errno_location();
    v31 = strerror(*v30);
    fprintf(v28, "Error at line %d, file %s (%d) [%s]\n", 940, "utility.cpp", v29, v31, v46);
    goto LABEL_3;
  }
  if ( a6 & 2 && munmap(v15, 0x1000u) == -1 )
  {
    v32 = (FILE *)stderr;
    v33 = *_errno_location();
    v34 = _errno_location();
    v35 = strerror(*v34);
    fprintf(v32, "Error at line %d, file %s (%d) [%s]\n", 945, "utility.cpp", v33, v35, v46);
    goto LABEL_3;
  }
  close(fd);
  return v13;
}

//----- (000018E0) --------------------------------------------------------
signed int __fastcall xmem(FILE *a1, int a2, int a3, int a4, size_t a5)
{
  signed int v5; // r5
  FILE *v7; // r4
  int v8; // r8
  char *v9; // r6
  int v10; // r0
  int fd; // r10
  FILE *stream; // ST10_4
  int v13; // r4
  int *v14; // r0
  char *v15; // r0
  char *v16; // r0
  char *v17; // r8
  FILE *v18; // ST10_4
  int v19; // r4
  int *v20; // r0
  char *v21; // r0
  int v22; // r4
  int v23; // r3
  int v24; // r9
  unsigned int v25; // r11
  const char *v26; // r0
  unsigned int v27; // r1
  bool v28; // cf
  FILE *v29; // ST10_4
  int v30; // r4
  int *v31; // r0
  char *v32; // r0
  __off_t v33; // [sp+4h] [bp-44h]
  int v34; // [sp+8h] [bp-40h]
  __int64 v35; // [sp+8h] [bp-40h]
  int v36; // [sp+Ch] [bp-3Ch]

  v5 = a5;
  if ( a5 > 0x10000 )
  {
    v5 = -1;
    printf("\nfile size mast be less than %d bytes\n", 0x10000);
  }
  else
  {
    v7 = a1;
    v8 = a3;
    v9 = (char *)malloc(0x10000u);
    fread(v9, 1u, a5, v7);
    v10 = open("/dev/mem", 1052674);
    fd = v10;
    if ( v10 == -1 )
    {
      stream = (FILE *)stderr;
      v13 = *_errno_location();
      v14 = _errno_location();
      v15 = strerror(*v14);
      fprintf(stream, "Error at line %d, file %s (%d) [%s]\n", 993, "utility.cpp", v13, v15, v34, v36);
      goto LABEL_7;
    }
    puts("/dev/mem opened.");
    v35 = v8 & 0xFFFF0000;
    v16 = (char *)mmap(0, 0x10000u, 3, 1, fd, v33);
    v17 = v16;
    if ( v16 == (char *)-1 )
    {
      v18 = (FILE *)stderr;
      v19 = *_errno_location();
      v20 = _errno_location();
      v21 = strerror(*v20);
      fprintf(v18, "Error at line %d, file %s (%d) [%s]\n", 1001, "utility.cpp", v19, v21, v35);
      goto LABEL_7;
    }
    v22 = 0;
    printf("mmap map_base:0x%X\n", v16);
    while ( v22 != (signed int)a5 >> 3 )
    {
      v23 = (int)&v9[8 * v22];
      v24 = *(_DWORD *)&v9[8 * v22];
      v25 = *(_DWORD *)(v23 + 4);
      v26 = (const char *)printf("\n%04X,%08X", *(_DWORD *)&v9[8 * v22], *(_DWORD *)(v23 + 4));
      v27 = *(_DWORD *)&v9[8 * v22++];
      v28 = v27 >= 0x10000;
      if ( v27 >= 0x10000 )
      {
        v26 = "\nvaddr too log ,%08X";
      }
      else
      {
        v24 = (unsigned __int16)v24;
        v27 = v25;
      }
      if ( !v28 )
      {
        *(_DWORD *)&v17[v24] = v25;
        v26 = ",%08X";
      }
      printf(v26, v27);
    }
    if ( munmap(v17, 0x10000u) == -1 )
    {
      v29 = (FILE *)stderr;
      v30 = *_errno_location();
      v31 = _errno_location();
      v32 = strerror(*v31);
      fprintf(v29, "Error at line %d, file %s (%d) [%s]\n", 1026, "utility.cpp", v30, v32, v35);
LABEL_7:
      exit(1);
    }
    free(v9);
    close(fd);
  }
  return v5;
}

//----- (00001B84) --------------------------------------------------------
signed int __fastcall nna_diff_file(const char *a1, char *a2)
{
  float v2; // s16
  float v3; // s17
  float v4; // s19
  float v5; // s20
  float v6; // s21
  FILE *v7; // r0
  FILE *v8; // r7
  signed int v9; // r4
  int v11; // r5
  FILE *v12; // r0
  FILE *v13; // r6
  int v14; // r8
  bool v15; // zf
  float v16; // s16
  int v17; // r8
  float v18; // s23
  float v19; // s18
  float v20; // s22
  float v21; // s19
  signed int v22; // r9
  signed int v23; // r3
  signed int v24; // r1
  signed int v25; // r2
  float v26; // s15
  float v27; // s13
  int v28; // r8
  size_t v29; // r0
  float v30; // s16
  signed int v31; // r9
  signed int v32; // r3
  signed int v33; // s14
  signed int v34; // r2
  float v35; // r0
  float v36; // r0
  char *filename; // [sp+30h] [bp-2058h]
  const char *v38; // [sp+34h] [bp-2054h]
  char ptr[4040]; // [sp+38h] [bp-2050h]
  int v40; // [sp+1038h] [bp-1050h]

  filename = a2;
  v38 = a1;
  v7 = fopen(a1, "rb");
  v8 = v7;
  if ( v7 )
  {
    fseek(v7, 0, 2);
    v11 = ftell(v8);
    fseek(v8, 0, 0);
    v12 = fopen(filename, "rb");
    v13 = v12;
    if ( v12 )
    {
      fseek(v12, 0, 2);
      v14 = ftell(v13);
      fseek(v13, 0, 0);
      v15 = v14 == 0;
      if ( v14 )
        v15 = v11 == 0;
      if ( v15 )
      {
        v9 = 9999;
        printf("\n# diff_file:error  size_x:%6d size_y:%6d X:%s <==> Y:%s ", v11, v14, v38, filename);
        fclose(v8);
        fclose(v13);
      }
      else
      {
        v9 = 0;
        if ( v11 == v14 )
        {
          v16 = 0.0;
          v17 = 0;
          v18 = 0.0;
          v19 = 0.0;
          v20 = 0.0;
          v21 = 0.0;
          while ( v17 < v11 )
          {
            v22 = fread(ptr, 1u, 0x1000u, v8);
            fread(&v40, 1u, 0x1000u, v13);
            v23 = 0;
            while ( v23 < v22 )
            {
              v24 = ptr[v23];
              v25 = *((char *)&v40 + v23++);
              v26 = (float)v24;
              v19 = v19 + (float)(v26 * v26);
              v27 = (float)v24 - (float)v25;
              v20 = v20 + (float)((float)v24 * (float)v25);
              v16 = v16 + (float)v24;
              v18 = v18 + (float)((float)v25 * (float)v25);
              v21 = v21 + (float)(v27 * v27);
              if ( v27 <= 0.0 )
                v26 = (float)v25;
              if ( v3 >= v26 )
                v26 = v3;
              if ( v24 != v25 )
                ++v9;
              v3 = v26;
            }
            v17 += v22;
          }
          v28 = 0;
          fseek(v8, 0, 0);
          v29 = fseek(v13, 0, 0);
          v5 = v16 / (float)v11;
          v30 = 0.0;
          while ( v28 < v11 )
          {
            v31 = fread(ptr, 1u, 0x1000u, v8);
            v29 = fread(&v40, 1u, 0x1000u, v13);
            v32 = 0;
            while ( v32 < v31 )
            {
              v33 = ptr[v32];
              v34 = *((char *)&v40 + v32++);
              v30 = v30 + fabsf((float)v33 - (float)v34);
            }
            v28 += v31;
          }
          v6 = v30 / (float)v11;
          v35 = sqrtf(*(float *)&v29);
          v36 = sqrtf(v35);
          v2 = v20 / (float)(v18 * v19);
          sqrtf(v36);
          v4 = v21 / v19;
        }
        printf(
          "\n# diff_file:%6d diff:%8f cos:%8f RED:%8f MAE:%3d SD:(%3d %9f) size:%6d x:%s <==> y:%s ",
          v9,
          (float)((float)v9 / (float)v11),
          v2,
          v4,
          (signed int)v3,
          (signed int)v5,
          v6,
          v11,
          v38,
          filename);
        fclose(v8);
        fclose(v13);
      }
    }
    else
    {
      v9 = 2;
      printf("open file %s fail", filename);
    }
  }
  else
  {
    v9 = 1;
    printf("open file %s fail", v38);
  }
  return v9;
}
// 1B84: using guessed type char ptr[4040];

//----- (00001EFC) --------------------------------------------------------
signed int __fastcall xfile(FILE *a1, int a2, int a3, int a4, signed int a5, int a6)
{
  int fd; // r8
  int v7; // r10
  int v8; // r0
  signed int v9; // r5
  FILE *v10; // ST14_4
  int v11; // r4
  int *v12; // r0
  char *v13; // r0
  int v14; // r0
  char *v15; // r0
  char *v16; // r7
  FILE *v17; // ST14_4
  int v18; // r4
  int *v19; // r0
  char *v20; // r0
  char *v21; // r0
  signed int v22; // r4
  FILE *v23; // ST14_4
  int v24; // r4
  int *v25; // r0
  char *v26; // r0
  FILE *v27; // ST14_4
  int v28; // r4
  int *v29; // r0
  char *v30; // r0
  __off_t v32; // [sp+4h] [bp-3Ch]
  int v33; // [sp+8h] [bp-38h]
  __int64 v34; // [sp+8h] [bp-38h]
  int v35; // [sp+Ch] [bp-34h]
  FILE *stream; // [sp+14h] [bp-2Ch]

  v7 = a3;
  stream = a1;
  v8 = open("/dev/mem", 1052674);
  if ( v8 != -1 )
    fd = v8;
  if ( v8 == -1 )
  {
    v10 = (FILE *)stderr;
    v11 = *_errno_location();
    v12 = _errno_location();
    v13 = strerror(*v12);
    fprintf(v10, "Error at line %d, file %s (%d) [%s]\n", 1185, "utility.cpp", v11, v13, v33, v35);
    goto LABEL_6;
  }
  v9 = a5;
  while ( 1 )
  {
    v34 = v7 & 0xFFFFF000;
    v15 = (char *)mmap(0, 0x1000u, 3, 1, fd, v32);
    v16 = v15;
    if ( v15 == (char *)-1 )
    {
      v17 = (FILE *)stderr;
      v18 = *_errno_location();
      v19 = _errno_location();
      v20 = strerror(*v19);
      fprintf(v17, "Error at line %d, file %s (%d) [%s]\n", 1203, "utility.cpp", v18, v20, v34);
      goto LABEL_6;
    }
    v21 = &v15[v7 & 0xFFF];
    v22 = 4096 - (v7 & 0xFFF);
    if ( v9 < v22 )
      v22 = v9;
    if ( a6 == 114 )
    {
      fread(v21, 1u, v22, stream);
    }
    else
    {
      if ( a6 != 119 )
      {
        fprintf((FILE *)stderr, "Illegal data type '%c'.\n", a6);
        v14 = 2;
        goto LABEL_7;
      }
      fwrite(v21, 1u, v22, stream);
    }
    v9 -= v22;
    v7 += v22;
    if ( v9 <= 0 )
      break;
    if ( munmap(v16, 0x1000u) == -1 )
    {
      v27 = (FILE *)stderr;
      v28 = *_errno_location();
      v29 = _errno_location();
      v30 = strerror(*v29);
      fprintf(v27, "Error at line %d, file %s (%d) [%s]\n", 1261, "utility.cpp", v28, v30, v34);
LABEL_6:
      v14 = 1;
LABEL_7:
      exit(v14);
    }
  }
  if ( munmap(v16, 0x1000u) == -1 )
  {
    v23 = (FILE *)stderr;
    v24 = *_errno_location();
    v25 = _errno_location();
    v26 = strerror(*v25);
    fprintf(v23, "Error at line %d, file %s (%d) [%s]\n", 1255, "utility.cpp", v24, v26, v34);
    goto LABEL_6;
  }
  close(fd);
  return v9;
}

//----- (00002188) --------------------------------------------------------
void __fastcall permuteArray(char *a1, signed int a2, size_t a3, const void *a4)
{
  signed int v4; // r9
  char *v5; // r11
  const void *v6; // r5
  size_t v7; // r4
  void *v8; // r8
  char *v9; // r10
  _DWORD *v10; // r0
  const void *v11; // r1
  signed int v12; // r5
  _DWORD *v13; // r7
  signed int v14; // r6
  signed int v15; // ST00_4
  char *dest; // [sp+4h] [bp-2Ch]

  v4 = a2;
  v5 = a1;
  v6 = a4;
  v7 = a3;
  v8 = calloc(1u, a3);
  v9 = v5;
  v10 = calloc(v4, 4u);
  v11 = v6;
  v12 = 0;
  v13 = v10;
  memcpy(v10, v11, 4 * v4);
  while ( v12 < v4 )
  {
    if ( v12 != v13[v12] )
    {
      v14 = v12;
      memcpy(v8, v9, v7);
      do
      {
        dest = &v5[v7 * v14];
        v15 = v13[v14];
        memcpy(&v5[v7 * v14], &v5[v13[v14] * v7], v7);
        v13[v14] = v14;
        v14 = v15;
      }
      while ( v12 != v15 );
      memcpy(dest, v8, v7);
    }
    v9 += v7;
    ++v12;
  }
  free(v8);
  free(v13);
}

//----- (00002268) --------------------------------------------------------
char *__fastcall clearMakredEntries(char *result, _DWORD *a2, size_t a3, int a4)
{
  int v4; // r10
  int v5; // r6
  _DWORD *v6; // r8
  size_t v7; // r7
  int i; // r3
  int v9; // r5
  unsigned __int8 *v10; // r4
  char *v11; // r9
  int v12; // t1
  void *v13; // r0

  v4 = a4;
  v5 = *a2;
  v6 = a2;
  v7 = a3;
  for ( i = 0; i < v5 && !*(_BYTE *)(v4 + i); ++i )
    ;
  v9 = (int)&result[a3 * i];
  v10 = (unsigned __int8 *)(v4 + i);
  v11 = &result[a3 * i];
  while ( *v6 > (signed int)&v10[-v4] )
  {
    v12 = *v10++;
    if ( v12 )
    {
      --v5;
    }
    else
    {
      v13 = (void *)v9;
      v9 += v7;
      result = (char *)memcpy(v13, v11, v7);
    }
    v11 += v7;
  }
  *v6 = v5;
  return result;
}

//----- (000022F4) --------------------------------------------------------
void __fastcall reorg(__int64 a1, double a2, __int64 a3, __int64 a4)
{
  int v4; // r6
  int v5; // r7
  int v6; // r6
  int v7; // r8
  signed int v8; // r9
  char *v9; // r5
  size_t n; // ST00_4
  char *v11; // r4
  int v12; // r8
  int v13; // r3
  char *v14; // r7
  int v15; // r0
  char *v16; // r6
  char *v17; // r2
  char *v18; // r1
  int v19; // r12
  char *v20; // r0
  int i; // r3
  int v22; // [sp+8h] [bp-80h]
  int v23; // [sp+Ch] [bp-7Ch]
  int v24; // [sp+10h] [bp-78h]
  unsigned int v25; // [sp+14h] [bp-74h]
  int nmemb; // [sp+18h] [bp-70h]
  int v27; // [sp+1Ch] [bp-6Ch]
  int v28; // [sp+20h] [bp-68h]
  int v29; // [sp+24h] [bp-64h]

  v4 = a1 + 15;
  if ( (signed int)a1 + 15 < 0 )
    v4 = a1 + 30;
  v5 = HIDWORD(a1);
  v6 = v4 >> 4;
  v23 = LODWORD(a2);
  v24 = 16 * v6;
  v22 = (signed int)a1 / 2;
  LODWORD(a2) = (signed int)a1 / 2 + 15;
  if ( SLODWORD(a2) < 0 )
    LODWORD(a2) = (signed int)a1 / 2 + 30;
  v25 = LODWORD(a2) & 0xFFFFFFF0;
  v27 = HIDWORD(a1) * 16 * v6;
  v7 = v23 * HIDWORD(a1) * 16 * v6;
  v8 = (signed int)(HIDWORD(a1) * (LODWORD(a2) & 0xFFFFFFF0)) >> 1;
  nmemb = HIDWORD(a2) * v8;
  v9 = (char *)calloc(v23 * HIDWORD(a1) * 16 * v6, 1u);
  n = v7;
  v11 = (char *)calloc(nmemb, 1u);
  v12 = 0;
  xramcpy((signed int)v9, a3, n, 2);
  v13 = v5 / 2;
  v14 = v9;
  v28 = v13;
  v15 = 32 * v6;
  v16 = v11;
  v29 = v15;
  while ( v12 < v23 )
  {
    v17 = v16;
    v18 = v14;
    v19 = 0;
    while ( v19 < v28 )
    {
      v20 = v18;
      for ( i = 0; ; ++i )
      {
        v20 += 2;
        if ( i >= v22 )
          break;
        v17[i] = *(v20 - 2);
        v17[v8 * v23 + i] = *(v20 - 1);
        v17[2 * v8 * v23 + i] = v18[2 * i + v24];
        v17[3 * v8 * v23 + i] = v20[v24 - 1];
      }
      ++v19;
      v18 += v29;
      v17 += v25;
    }
    ++v12;
    v16 += v8;
    v14 += v27;
  }
  xramcpy(a4, (signed int)v11, nmemb, 1);
  free(v9);
  free(v11);
}

//----- (00002564) --------------------------------------------------------
int __fastcall xfeatcpy(int result, unsigned __int8 *a2, int a3, int a4, int a5, int a6)
{
  int v6; // r10
  int v7; // r8
  int v8; // r11
  char *v9; // r6
  unsigned __int8 *v10; // r4
  int v11; // r5
  int v12; // r7
  int v13; // r9

  v6 = a3;
  v7 = a4;
  v8 = a4 * a3;
  v9 = (char *)result;
  v10 = a2;
  v11 = a6 * a4;
  v12 = 0;
  while ( v12 < a5 )
  {
    v13 = 0;
    while ( v13 < v7 )
    {
      ++v13;
      result = (int)memcpy(v9, v10, v6);
    }
    v9 += v8;
    ++v12;
    v10 += v11;
  }
  return result;
}

//----- (000025D4) --------------------------------------------------------
signed int __fastcall xchw2hwc(signed int result, int a2, int a3, int a4, int a5)
{
  int v5; // r12
  int v6; // r6
  int v7; // r5
  int v8; // r7
  _BYTE *v9; // r8
  int v10; // r4
  int v11; // r1
  _BYTE *i; // r9
  int v13; // [sp+4h] [bp-34h]
  int v14; // [sp+Ch] [bp-2Ch]

  v5 = 0;
  v14 = a2;
  v6 = 0;
  v7 = -result;
  v13 = a5 * a3;
  while ( v6 < a4 )
  {
    v8 = v7;
    v9 = (_BYTE *)result;
    v10 = 0;
    while ( v10 < a3 )
    {
      v11 = v14 + v10 + v5;
      for ( i = v9; ; ++i )
      {
        v11 += a3 * a4;
        if ( a5 <= (signed int)&i[v8] )
          break;
        *i = *(_BYTE *)(v11 - a3 * a4);
      }
      v9 += a5;
      ++v10;
      v8 -= a5;
    }
    ++v6;
    v5 += a3;
    result += v13;
    v7 -= v13;
  }
  return result;
}

//----- (00002688) --------------------------------------------------------
int __fastcall xhwc2chw(unsigned __int8 *a1, unsigned __int8 *a2, int a3, int a4, int a5)
{
  int v5; // r12
  int v6; // r6
  int v7; // r5
  int result; // r0
  int v9; // r7
  unsigned __int8 *v10; // r8
  int v11; // r4
  unsigned __int8 *v12; // r9
  char v13; // t1
  int v14; // [sp+0h] [bp-38h]
  unsigned __int8 *v15; // [sp+Ch] [bp-2Ch]

  v5 = 0;
  v15 = a1;
  v6 = 0;
  v7 = -(signed int)a2;
  v14 = a5 * a3;
  result = -(a3 * a4);
  while ( v6 < a4 )
  {
    v9 = v7;
    v10 = a2;
    v11 = 0;
    while ( v11 < a3 )
    {
      result = (int)&v15[v11 + v5];
      v12 = v10;
      while ( 1 )
      {
        result += a3 * a4;
        if ( a5 <= (signed int)&v12[v9] )
          break;
        v13 = *v12++;
        *(_BYTE *)(result - a3 * a4) = v13;
      }
      v10 += a5;
      ++v11;
      v9 -= a5;
    }
    ++v6;
    v5 += a3;
    a2 += v14;
    v7 -= v14;
  }
  return result;
}

//----- (00002744) --------------------------------------------------------
signed int __fastcall xchw2whc(signed int result, int a2, int a3, int a4, int a5)
{
  int v5; // lr
  int v6; // r1
  _BYTE *v7; // r5
  int v8; // r7
  int v9; // r6
  int v10; // r4
  _BYTE *v11; // r8
  int i; // r9
  int v13; // [sp+4h] [bp-34h]
  int v14; // [sp+Ch] [bp-2Ch]

  v14 = a2;
  v5 = -result;
  v13 = a5 * a4;
  v6 = 0;
  while ( v6 < a3 )
  {
    v7 = (_BYTE *)result;
    v8 = 0;
    v9 = v14 + v6;
    v10 = v5;
    while ( v8 < a4 )
    {
      v11 = v7;
      for ( i = v9; ; *v11++ = *(_BYTE *)(i - a4 * a3) )
      {
        i += a4 * a3;
        if ( a5 <= (signed int)&v11[v10] )
          break;
      }
      v9 += a3;
      ++v8;
      v7 += a5;
      v10 -= a5;
    }
    ++v6;
    result += v13;
    v5 -= v13;
  }
  return result;
}

//----- (000027F4) --------------------------------------------------------
int __fastcall trace_timei(int a1)
{
  int v1; // r5
  char *v2; // r6
  int result; // r0
  int v4; // r3

  v1 = a1;
  v2 = (char *)&g_tv + 8 * a1;
  result = gettimeofday((struct timeval *)&g_tv + a1, 0);
  if ( v1 & 1 )
  {
    if ( *((_DWORD *)v2 + 1) - *((_DWORD *)&g_tv + 2 * (v1 - 1) + 1) < 0 )
      v4 = *((_DWORD *)&g_tv + 2 * v1) - *((_DWORD *)&g_tv + 2 * (v1 - 1)) - 1;
    result = printf("\n# time[%d]-[%d]:%d.%06ds\n", v1);
  }
  return result;
}

//----- (00002884) --------------------------------------------------------
int trace_time()
{
  int result; // r0

  gettimeofday((struct timeval *)&g_tv + trace_time::time_index, 0);
  result = printf(
             "# time[%d]:%d.%06ds\n",
             trace_time::time_index,
             *((_DWORD *)&g_tv + 2 * trace_time::time_index),
             *((_DWORD *)&g_tv + 2 * trace_time::time_index + 1));
  ++trace_time::time_index;
  return result;
}
// 44E0: using guessed type int trace_time::time_index;

//----- (00002908) --------------------------------------------------------
int trace_time_start()
{
  return gettimeofday((struct timeval *)&tv_run_time_start, 0);
}
// 4764: using guessed type int tv_run_time_start;

//----- (00002944) --------------------------------------------------------
int __fastcall trace_time_end(int a1, int a2, int a3)
{
  int v3; // r4
  int v4; // r2
  int v6; // [sp+0h] [bp-18h]
  int v7; // [sp+4h] [bp-14h]
  int v8; // [sp+8h] [bp-10h]

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v3 = a1;
  gettimeofday((struct timeval *)&v6, 0);
  v4 = v6 - tv_run_time_start;
  v6 -= tv_run_time_start;
  if ( v7 - dword_4768 < 0 )
  {
    v7 = v7 - dword_4768 + 1000000;
    v6 = v4 - 1;
  }
  else
  {
    v7 -= dword_4768;
  }
  trace_time_start();
  if ( v3 )
    printf("\n#%s,%6d", v3, v7);
  return v7 + 1000000 * v6;
}
// 4764: using guessed type int tv_run_time_start;
// 4768: using guessed type int dword_4768;

//----- (000029F0) --------------------------------------------------------
int __fastcall nna_concat_cpu(size_t a1, int a2, int a3, int a4, size_t a5, int a6, int a7)
{
  size_t v7; // r6
  int v8; // r8
  int v9; // r7
  int v10; // r10
  int v11; // r3
  int v12; // r2
  int v13; // r4
  int v14; // r5
  unsigned int v15; // r4
  size_t n; // r4
  size_t v17; // r5

  v7 = a1;
  v8 = a2;
  v9 = a3;
  v10 = a4;
  printf("\n# nna_concat_cpu");
  printf(
    "\n"
    " output_addr :%x \n"
    " input_a_addr:%x \n"
    " input_b_addr:%x \n"
    " input_w \t:%d \n"
    " input_h \t:%d \n"
    " input_c \t:%d \n"
    " num_output\t:%d ",
    v7,
    v8,
    v9,
    v10,
    a5,
    a6,
    a7);
  v11 = a5 * v10;
  v12 = a7 - a6;
  v13 = a6 + 7;
  if ( a6 + 7 < 0 )
    v13 = a6 + 14;
  v14 = v12 + 7;
  v15 = v13 & 0xFFFFFFF8;
  if ( v12 + 7 < 0 )
    v14 = v12 + 14;
  n = v11 * v15;
  v17 = v11 * (v14 & 0xFFFFFFF8);
  xramcpy(v7, (unsigned int)v8, n, 3);
  return xramcpy(n + v7, (unsigned int)v9, v17, 3);
}

//----- (00002AC0) --------------------------------------------------------
#error "2AC0: stack frame is too big (funcsize=0)"

//----- (00002CE0) --------------------------------------------------------
int __fastcall nna_sigmoid_cpu(__int64 a1, int a2, char a3, int a4, int a5, int a6, signed int a7)
{
  char v7; // r10
  unsigned int v8; // r9
  signed int v9; // r6
  unsigned int v10; // r2
  int v11; // r5
  unsigned int v12; // r5
  signed int n; // r4
  float v14; // r0
  signed int v15; // r10
  float v16; // s15
  signed int v17; // r6
  float v18; // r0
  signed int v19; // r10
  float v20; // s16
  int v22; // [sp+8h] [bp+0h]
  int v23; // [sp+4008h] [bp+4000h]

  v7 = a3;
  v8 = a1;
  v9 = a7;
  v10 = HIDWORD(a1);
  LODWORD(a1) = &v23;
  v11 = a6 + 7;
  if ( a6 + 7 < 0 )
    v11 = a6 + 14;
  v12 = v11 & 0xFFFFFFF8;
  n = v12 * a5 * a4;
  HIDWORD(a1) = (signed int)&v23 >> 31;
  v14 = COERCE_FLOAT(xramcpy(a1, v10, v12 * a5 * a4, 2));
  if ( a7 )
  {
    v17 = 0;
    v18 = COERCE_FLOAT(printf("\n eltwise_en:%d", a7));
    v19 = 1 << v7;
    while ( v17 < n )
    {
      v20 = (float)*((char *)&v23 + v17) / (float)v19;
      v18 = expf(v18);
      *((_BYTE *)&v22 + v17) = vcvts_n_s32_f32(v20 / (float)(1.0 - v20), 7u);
      v17 += v12;
    }
  }
  else
  {
    v15 = 1 << v7;
    while ( v9 < n )
    {
      v16 = (float)*((char *)&v23 + v9);
      v14 = expf(v14);
      *((_BYTE *)&v22 + v9) = vcvts_n_s32_f32(1.0 / (float)(1.0 - (float)(v16 / (float)v15)), 7u);
      v9 += v12;
    }
  }
  return xramcpy(v8, (signed int)&v22, n, 1);
}

//----- (00002E74) --------------------------------------------------------
float __fastcall nna_sigmoid_cpu_buf(float result, int a2, int a3, char a4, int a5, int a6, int a7)
{
  float v7; // r7
  int v8; // r8
  int v9; // r5
  int v10; // r4
  unsigned int v11; // r4
  signed int v12; // r9
  float v13; // s15

  v7 = result;
  v8 = a2;
  v9 = 0;
  v10 = a7 + 7;
  if ( a7 + 7 < 0 )
    v10 = a7 + 14;
  v11 = v10 & 0xFFFFFFF8;
  v12 = 1 << a4;
  while ( v9 < (signed int)(v11 * a6 * a5) )
  {
    v13 = (float)*(unsigned __int8 *)(v8 + v9);
    result = expf(result);
    *(_BYTE *)(LODWORD(v7) + v9) = (unsigned int)(float)((float)(1.0 / (float)(1.0 - (float)(v13 / (float)v12))) * 128.0);
    v9 += v11;
  }
  return result;
}

//----- (00002F18) --------------------------------------------------------
float __fastcall fun_swish(float a1)
{
  return expf(a1);
}

//----- (00002F3C) --------------------------------------------------------
float __fastcall fun_sigmoid(float x)
{
  return expf(x);
}

//----- (00002F50) --------------------------------------------------------
float __fastcall nna_build_swish_table(float result, signed int a2, int a3, char a4, int a5)
{
  float v5; // r6
  int v6; // r5
  signed int v7; // r7
  float v8; // s19
  float v9; // s18
  float v10; // s14
  float v11; // s15
  double v12; // d16
  double v13; // d16
  signed int v14; // r2

  if ( a5 == 1 )
    return COERCE_FLOAT(printf("\n!!!count:", 1));
  v5 = result;
  v6 = 0;
  v7 = 1 << a4;
  v8 = (float)(a3 - a2) / (float)(a5 - 1);
  v9 = (float)a2;
  while ( v6 < a5 )
  {
    ++v6;
    result = expf(result);
    v10 = v9 / (float)(1.0 - v9);
    v9 = v9 + v8;
    v11 = (float)v7 * v10;
    v12 = v11;
    if ( v11 < 0.0 )
      v13 = v12 - 0.5;
    else
      v13 = v12 + 0.5;
    v14 = (signed int)v13;
    if ( (signed int)v13 >= 0x7FFF )
      LOWORD(v14) = 0x7FFF;
    *(_WORD *)LODWORD(v5) = v14;
    LODWORD(v5) += 2;
  }
  return result;
}

//----- (0000302C) --------------------------------------------------------
int __fastcall std::vector<Bbox,std::allocator<Bbox>>::at(int *a1, unsigned int a2)
{
  int v2; // r12

  v2 = *a1;
  if ( a2 >= -858993459 * ((a1[1] - *a1) >> 4) )
    std::__throw_out_of_range_fmt("vector::_M_range_check: __n (which is %zu) >= this->size() (which is %zu)");
  return v2 + 80 * a2;
}

//----- (00003080) --------------------------------------------------------
void **__fastcall std::_Vector_base<int,std::allocator<int>>::~_Vector_base(void **a1)
{
  void **v1; // r4
  void *v2; // r0

  v1 = a1;
  v2 = *a1;
  if ( v2 )
    operator delete(v2);
  return v1;
}

//----- (000030AC) --------------------------------------------------------
void __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(int a1, _DWORD *a2)
{
  int v2; // r6
  _DWORD *i; // r4
  _DWORD *v4; // r5

  v2 = a1;
  for ( i = a2; i; i = v4 )
  {
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(
      v2,
      i[3]);
    v4 = (_DWORD *)i[2];
    operator delete(i);
  }
}

//----- (000030EC) --------------------------------------------------------
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree(int a1)
{
  int v1; // r4

  v1 = a1;
  std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(
    a1,
    *(_DWORD **)(a1 + 8));
  return v1;
}

//----- (00003110) --------------------------------------------------------
void __fastcall std::vector<int,std::allocator<int>>::_M_default_append(void **a1, unsigned int a2)
{
  unsigned int v2; // r6
  _BYTE *v3; // r3
  _DWORD *v4; // r1
  unsigned int v5; // r2
  void **v6; // r5
  unsigned int v7; // r3
  unsigned int v8; // r4
  unsigned __int8 v9; // cf
  unsigned int v10; // r4
  signed int v11; // r1
  char *v12; // r8
  void *v13; // r9
  unsigned int v14; // r7
  int v15; // r7
  unsigned int v16; // r3
  _DWORD *v17; // r2
  int v18; // r7

  v2 = a2;
  if ( !a2 )
    return;
  v3 = a1[1];
  if ( a2 <= ((_BYTE *)a1[2] - v3) >> 2 )
  {
    v4 = a1[1];
    v5 = v2;
    do
    {
      *v4 = 0;
      ++v4;
      --v5;
    }
    while ( v5 );
    a1[1] = &v3[4 * v2];
    return;
  }
  v6 = a1;
  v7 = (v3 - (_BYTE *)*a1) >> 2;
  if ( a2 > 0x3FFFFFFF - v7 )
    std::__throw_length_error("vector::_M_default_append");
  if ( a2 >= v7 )
    v8 = a2;
  else
    v8 = v7;
  v9 = __CFADD__(v7, v8);
  v10 = v7 + v8;
  if ( v9 )
    v11 = 1;
  else
    v11 = 0;
  if ( v11 | (v10 > 0x3FFFFFFF) )
  {
    v10 = 0x3FFFFFFF;
  }
  else if ( !v10 )
  {
    v12 = 0;
    goto LABEL_17;
  }
  v12 = (char *)operator new(4 * v10);
LABEL_17:
  v13 = *v6;
  v14 = (_BYTE *)v6[1] - (_BYTE *)*v6;
  if ( v14 >> 2 )
    memmove(v12, *v6, (_BYTE *)v6[1] - (_BYTE *)*v6);
  v15 = (int)&v12[v14];
  v16 = v2;
  v17 = (_DWORD *)v15;
  do
  {
    *v17 = 0;
    ++v17;
    --v16;
  }
  while ( v16 );
  v18 = v15 + 4 * v2;
  if ( v13 )
    operator delete(v13);
  *v6 = v12;
  v6[1] = (void *)v18;
  v6[2] = &v12[4 * v10];
}

//----- (00003244) --------------------------------------------------------
void __fastcall std::vector<int,std::allocator<int>>::resize(int a1, unsigned int a2)
{
  unsigned int v2; // r3

  v2 = (*(_DWORD *)(a1 + 4) - *(_DWORD *)a1) >> 2;
  if ( a2 <= v2 )
  {
    if ( a2 < v2 )
      *(_DWORD *)(a1 + 4) = *(_DWORD *)a1 + 4 * a2;
  }
  else
  {
    std::vector<int,std::allocator<int>>::_M_default_append((void **)a1, a2 - v2);
  }
}

//----- (00003278) --------------------------------------------------------
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(int a1, float *a2)
{
  int v2; // r8
  int v3; // r3
  int v4; // r5
  float *v5; // r7
  int v6; // r6
  int v7; // r2
  _BOOL4 v8; // r9
  int v9; // r0
  int v10; // r4
  int result; // r0

  v2 = a1 + 4;
  v3 = *(_DWORD *)(a1 + 8);
  v4 = a1;
  v5 = a2;
  v6 = a1 + 4;
  while ( v3 )
  {
    v6 = v3;
    if ( *a2 >= *(float *)(v3 + 16) )
      v7 = *(_DWORD *)(v3 + 12);
    else
      v7 = *(_DWORD *)(v3 + 8);
    v3 = v7;
  }
  if ( v2 == v6 )
    v8 = 1;
  else
    v8 = *a2 < *(float *)(v6 + 16);
  v9 = operator new(0x18u);
  v10 = v9;
  *(float *)(v9 + 16) = *v5;
  *(float *)(v9 + 20) = v5[1];
  std::_Rb_tree_insert_and_rebalance(v8, v9, v6, v2);
  result = v10;
  ++*(_DWORD *)(v4 + 20);
  return result;
}
// 4B3C: using guessed type int __fastcall std::_Rb_tree_insert_and_rebalance(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00003330) --------------------------------------------------------
int __fastcall ZNSt8_Rb_treeIfSt4pairIKfiESt10_Select1stIS2_ESt4lessIfESaIS2_EE5eraseB5cxx11ESt17_Rb_tree_iteratorIS2_E(int a1, int a2)
{
  int v2; // r4
  int v3; // r5
  int v4; // r6
  void *v5; // r0
  int result; // r0

  v2 = a1;
  v3 = a2;
  v4 = std::_Rb_tree_increment(a2);
  v5 = (void *)std::_Rb_tree_rebalance_for_erase(v3, v2 + 4);
  operator delete(v5);
  result = v4;
  --*(_DWORD *)(v2 + 20);
  return result;
}
// 4B40: using guessed type int __fastcall std::_Rb_tree_increment(_DWORD);
// 4B44: using guessed type int __fastcall std::_Rb_tree_rebalance_for_erase(_DWORD, _DWORD);

//----- (00003378) --------------------------------------------------------
void **__fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base(void **a1)
{
  void **v1; // r4
  void *v2; // r0

  v1 = a1;
  v2 = *a1;
  if ( v2 )
    operator delete(v2);
  return v1;
}

//----- (000033A4) --------------------------------------------------------
int __fastcall __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(int (__fastcall **a1)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), _DWORD *a2, const void *a3)
{
  _DWORD *v3; // r4
  int (__fastcall **v4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r5
  char dest; // [sp+40h] [bp-60h]

  v3 = a2;
  v4 = a1;
  memcpy(&dest, a3, 0x50u);
  return (*v4)(
           *v3,
           v3[1],
           v3[2],
           v3[3],
           v3[4],
           v3[5],
           v3[6],
           v3[7],
           v3[8],
           v3[9],
           v3[10],
           v3[11],
           v3[12],
           v3[13],
           v3[14],
           v3[15],
           v3[16],
           v3[17],
           v3[18],
           v3[19]);
}

//----- (0000340C) --------------------------------------------------------
void *__fastcall std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(void *src, int (__fastcall *a2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  int (__fastcall *v2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // r7
  char *v3; // r4
  const void *v4; // r1
  void *v5; // r6
  char v7; // [sp+40h] [bp-B8h]
  char dest; // [sp+90h] [bp-68h]
  int v9; // [sp+94h] [bp-64h]
  int v10; // [sp+98h] [bp-60h]
  int v11; // [sp+9Ch] [bp-5Ch]
  int v12; // [sp+A0h] [bp-58h]
  int v13; // [sp+A4h] [bp-54h]
  int v14; // [sp+A8h] [bp-50h]
  int v15; // [sp+ACh] [bp-4Ch]
  int v16; // [sp+B0h] [bp-48h]
  int v17; // [sp+B4h] [bp-44h]
  int v18; // [sp+B8h] [bp-40h]
  int v19; // [sp+BCh] [bp-3Ch]
  int v20; // [sp+C0h] [bp-38h]
  int v21; // [sp+C4h] [bp-34h]
  int v22; // [sp+C8h] [bp-30h]
  int v23; // [sp+CCh] [bp-2Ch]
  int v24; // [sp+D0h] [bp-28h]
  int v25; // [sp+D4h] [bp-24h]
  int v26; // [sp+D8h] [bp-20h]
  int v27; // [sp+DCh] [bp-1Ch]

  v2 = a2;
  v3 = (char *)src - 80;
  memcpy(&dest, src, 0x50u);
  while ( 1 )
  {
    v4 = v3;
    v5 = v3 + 80;
    v3 -= 80;
    memcpy(&v7, v4, 0x50u);
    if ( !v2(
            *(_DWORD *)&dest,
            v9,
            v10,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21,
            v22,
            v23,
            v24,
            v25,
            v26,
            v27) )
      break;
    memcpy(v3 + 160, v3 + 80, 0x50u);
  }
  return memcpy(v5, &dest, 0x50u);
}

//----- (000034BC) --------------------------------------------------------
char *__fastcall std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  char *v3; // r8
  char *v4; // r4
  signed int i; // r5
  int (__fastcall *v6)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // [sp+4h] [bp-74h]
  char v7; // [sp+8h] [bp-70h]

  v6 = a3;
  if ( a2 != result )
  {
    v3 = a2;
    v4 = result;
    for ( i = 80; &v4[i] != v3; i += 80 )
    {
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v6,
             &v4[i],
             v4) )
      {
        memcpy(&v7, &v4[i], 0x50u);
        if ( -858993459 * (i >> 4) )
          memmove(v4 + 80, v4, i);
        result = (char *)memcpy(v4, &v7, 0x50u);
      }
      else
      {
        result = (char *)std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(
                           &v4[i],
                           v6);
      }
    }
  }
  return result;
}

//----- (00003578) --------------------------------------------------------
int __fastcall std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(int a1, int a2)
{
  int v2; // r6
  int v3; // r7
  int v4; // r5
  int v5; // r4
  int v7; // [sp+0h] [bp-68h]

  v2 = a1;
  v3 = a2;
  v4 = a1;
  v5 = a2;
  memset(&v7, 0, 0x50u);
  while ( 1 )
  {
    v4 += 80;
    if ( !v5 )
      break;
    --v5;
    memcpy((void *)(v4 - 80), &v7, 0x50u);
  }
  return v2 + 80 * v3;
}

//----- (000035E4) --------------------------------------------------------
void *__fastcall std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int (__fastcall *a24)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  int v24; // r5
  int v25; // r6
  int v26; // r8
  int v27; // r4
  int v28; // r7
  void *v29; // r0
  void *v30; // r0
  int (__fastcall *v31)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r11
  int v32; // r6
  _DWORD *v33; // r7
  void *v34; // r0
  char v36; // [sp+40h] [bp-D8h]
  int v37; // [sp+90h] [bp-88h]
  int *v38; // [sp+94h] [bp-84h]
  char dest; // [sp+98h] [bp-80h]
  int src; // [sp+114h] [bp-4h]

  v24 = a1;
  src = a4;
  v25 = a3;
  v26 = (a3 - 1) / 2;
  v27 = a2;
  v37 = a2;
  v38 = (int *)&a24;
  while ( v27 < v26 )
  {
    v28 = 2 * (v27 + 1);
    if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
           (int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))v38,
           (_DWORD *)(v24 + 160 * (v27 + 1)),
           (const void *)(v24 + 80 * (v28 - 1))) )
    {
      --v28;
    }
    v29 = (void *)(v24 + 80 * v27);
    v27 = v28;
    memcpy(v29, (const void *)(v24 + 80 * v28), 0x50u);
  }
  if ( !(v25 & 1) && v27 == (v25 - 2) / 2 )
  {
    v30 = (void *)(v24 + 80 * v27);
    v27 = 2 * v27 + 1;
    memcpy(v30, (const void *)(v24 + 80 * v27), 0x50u);
  }
  v31 = a24;
  v32 = (v27 - 1) / 2;
  memcpy(&dest, &src, 0x50u);
  while ( v37 < v27 )
  {
    v33 = (_DWORD *)(v24 + 80 * v32);
    memcpy(&v36, &dest, 0x50u);
    if ( !v31(
            *v33,
            v33[1],
            v33[2],
            v33[3],
            v33[4],
            v33[5],
            v33[6],
            v33[7],
            v33[8],
            v33[9],
            v33[10],
            v33[11],
            v33[12],
            v33[13],
            v33[14],
            v33[15],
            v33[16],
            v33[17],
            v33[18],
            v33[19]) )
      break;
    v34 = (void *)(v24 + 80 * v27);
    v27 = v32;
    memcpy(v34, (const void *)(v24 + 80 * v32), 0x50u);
    v32 = (v32 - 1) / 2;
  }
  return memcpy((void *)(v24 + 80 * v27), &dest, 0x50u);
}

//----- (00003768) --------------------------------------------------------
void *__fastcall std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(const void *a1, int a2, void *a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  void *v4; // r6
  const void *v5; // r5
  int v6; // r4
  int (__fastcall *v7)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r7
  int v9; // [sp+0h] [bp-B8h]
  int v10; // [sp+4h] [bp-B4h]
  int v11; // [sp+8h] [bp-B0h]
  int v12; // [sp+Ch] [bp-ACh]
  int v13; // [sp+10h] [bp-A8h]
  int v14; // [sp+14h] [bp-A4h]
  int v15; // [sp+18h] [bp-A0h]
  int v16; // [sp+1Ch] [bp-9Ch]
  int v17; // [sp+20h] [bp-98h]
  int v18; // [sp+24h] [bp-94h]
  int v19; // [sp+28h] [bp-90h]
  int v20; // [sp+2Ch] [bp-8Ch]
  int v21; // [sp+30h] [bp-88h]
  int v22; // [sp+34h] [bp-84h]
  int v23; // [sp+38h] [bp-80h]
  int v24; // [sp+3Ch] [bp-7Ch]
  int v25; // [sp+40h] [bp-78h]
  int v26; // [sp+44h] [bp-74h]
  int v27; // [sp+48h] [bp-70h]
  int v28; // [sp+50h] [bp-68h]
  char src; // [sp+54h] [bp-64h]

  v4 = a3;
  v5 = a1;
  v6 = a2 - (_DWORD)a1;
  v7 = a4;
  memcpy(&v28, a3, 0x50u);
  memcpy(v4, v5, 0x50u);
  memcpy(&v9, &src, 0x4Cu);
  return std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
           (int)v5,
           0,
           -858993459 * (v6 >> 4),
           v28,
           v9,
           v10,
           v11,
           v12,
           v13,
           v14,
           v15,
           v16,
           v17,
           v18,
           v19,
           v20,
           v21,
           v22,
           v23,
           v24,
           v25,
           v26,
           v27,
           v7);
}

//----- (000037F4) --------------------------------------------------------
void *__fastcall std::swap<Bbox>(void *src, void *a2)
{
  void *v2; // r6
  void *v3; // r7
  int v5; // [sp+0h] [bp-68h]

  v2 = a2;
  v3 = src;
  memcpy(&v5, src, 0x50u);
  memcpy(v3, v2, 0x50u);
  return memcpy(v2, &v5, 0x50u);
}

//----- (0000384C) --------------------------------------------------------
char *__fastcall std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  char *v4; // r4
  int v5; // r11
  int (__fastcall *v6)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r7
  char *v7; // r5
  char *v8; // r10
  int v9; // r6
  int v10; // r6
  int i; // r8
  int v12; // r3
  char *v13; // r6
  int v14; // r0
  char *v15; // r2
  char *v16; // r1
  char *v17; // r8
  char *v18; // r6
  int v19; // r0
  char *v20; // r1
  int v21; // [sp+0h] [bp-D8h]
  int v22; // [sp+4h] [bp-D4h]
  int v23; // [sp+8h] [bp-D0h]
  int v24; // [sp+Ch] [bp-CCh]
  int v25; // [sp+10h] [bp-C8h]
  int v26; // [sp+14h] [bp-C4h]
  int v27; // [sp+18h] [bp-C0h]
  int v28; // [sp+1Ch] [bp-BCh]
  int v29; // [sp+20h] [bp-B8h]
  int v30; // [sp+24h] [bp-B4h]
  int v31; // [sp+28h] [bp-B0h]
  int v32; // [sp+2Ch] [bp-ACh]
  int v33; // [sp+30h] [bp-A8h]
  int v34; // [sp+34h] [bp-A4h]
  int v35; // [sp+38h] [bp-A0h]
  int v36; // [sp+3Ch] [bp-9Ch]
  int v37; // [sp+40h] [bp-98h]
  int v38; // [sp+44h] [bp-94h]
  int v39; // [sp+48h] [bp-90h]
  char *v40; // [sp+50h] [bp-88h]
  char *j; // [sp+54h] [bp-84h]
  int (__fastcall *v42)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // [sp+58h] [bp-80h]
  int (__fastcall *v43)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // [sp+5Ch] [bp-7Ch]
  int dest; // [sp+60h] [bp-78h]
  char v45; // [sp+64h] [bp-74h]

  v4 = result;
  v5 = a3;
  v6 = a4;
  v7 = a2;
  v8 = result + 80;
LABEL_2:
  if ( v7 - v4 >= 1360 )
  {
    v9 = (v7 - v4) >> 4;
    if ( !v5 )
    {
      v10 = -858993459 * v9;
      for ( i = (v10 - 2) >> 1; ; --i )
      {
        memcpy(&dest, &v4[80 * i], 0x50u);
        memcpy(&v21, &v45, 0x4Cu);
        result = (char *)std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                           (int)v4,
                           i,
                           v10,
                           dest,
                           v21,
                           v22,
                           v23,
                           v24,
                           v25,
                           v26,
                           v27,
                           v28,
                           v29,
                           v30,
                           v31,
                           v32,
                           v33,
                           v34,
                           v35,
                           v36,
                           v37,
                           v38,
                           v39,
                           v6);
        if ( !i )
          break;
      }
      while ( 1 )
      {
        v12 = v7 - v4;
        v7 -= 80;
        if ( v12 <= 159 )
          break;
        result = (char *)std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                           v4,
                           (int)v7,
                           v7,
                           v6);
      }
      return result;
    }
    v43 = v6;
    v13 = &v4[80 * (-858993459 * v9 >> 1)];
    --v5;
    v14 = __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
            &v43,
            v8,
            v13);
    v15 = v7 - 80;
    if ( v14 )
    {
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v43,
             v13,
             v15) )
      {
LABEL_11:
        v16 = v13;
LABEL_16:
        v17 = v7;
        std::swap<Bbox>(v4, v16);
        v42 = v6;
        for ( j = v4 + 160; ; j += 80 )
        {
          v18 = j - 80;
          if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                  &v42,
                  (_DWORD *)j - 20,
                  v4) )
          {
            v40 = v17 - 80;
            do
            {
              v17 = v40;
              v19 = __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                      &v42,
                      v4,
                      v40);
              v40 -= 80;
            }
            while ( v19 );
            if ( v18 >= v17 )
            {
              v20 = v7;
              v7 = j - 80;
              result = (char *)std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                                 v18,
                                 v20,
                                 v5,
                                 v6);
              goto LABEL_2;
            }
            std::swap<Bbox>(v18, v17);
          }
        }
      }
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v43,
             v8,
             v7 - 80) )
      {
LABEL_13:
        v16 = v7 - 80;
        goto LABEL_16;
      }
    }
    else if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                 &v43,
                 v8,
                 v15) )
    {
      if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
              &v43,
              v13,
              v7 - 80) )
        goto LABEL_11;
      goto LABEL_13;
    }
    v16 = v8;
    goto LABEL_16;
  }
  return result;
}

//----- (00003A7C) --------------------------------------------------------
char *__fastcall std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  int (__fastcall *v3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // r7
  int v4; // r5
  char *v5; // r4
  char *v6; // r6
  int v7; // r5
  void *v8; // r0

  if ( result != a2 )
  {
    v3 = a3;
    v4 = a2 - result;
    v5 = result;
    v6 = a2;
    std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
      result,
      a2,
      2 * (31 - __clz(-858993459 * ((a2 - result) >> 4))),
      a3);
    if ( v4 < 1360 )
    {
      result = std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                 v5,
                 v6,
                 v3);
    }
    else
    {
      v7 = (int)(v5 + 1280);
      result = std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                 v5,
                 v5 + 1280,
                 v3);
      while ( (char *)v7 != v6 )
      {
        v8 = (void *)v7;
        v7 += 80;
        result = (char *)std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(
                           v8,
                           v3);
      }
    }
  }
  return result;
}

//----- (00003B14) --------------------------------------------------------
size_t __fastcall std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(void *src, int a2, char *a3)
{
  char *v3; // r5
  size_t v4; // r4

  v3 = a3;
  v4 = a2 - (_DWORD)src;
  if ( -858993459 * ((a2 - (signed int)src) >> 4) )
    memmove(a3, src, v4);
  return (size_t)&v3[v4];
}

//----- (00003B58) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_default_append(int a1, unsigned int a2)
{
  int v2; // r6
  int v3; // r5
  int v4; // r0
  int v5; // t0
  unsigned int v6; // r3
  int v7; // r4
  unsigned __int8 v8; // cf
  unsigned int v9; // r4
  signed int v10; // r3
  char *v11; // r7
  int v12; // r0
  int v13; // r6

  v2 = a2;
  if ( !a2 )
    return;
  v3 = a1;
  v5 = a1 + 4;
  v4 = *(_DWORD *)(a1 + 4);
  if ( a2 <= -858993459 * ((*(_DWORD *)(v5 + 4) - v4) >> 4) )
  {
    *(_DWORD *)(v3 + 4) = std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(v4, a2);
    return;
  }
  v6 = -858993459 * ((v4 - *(_DWORD *)v3) >> 4);
  if ( a2 > 53687091 - v6 )
    std::__throw_length_error("vector::_M_default_append");
  if ( a2 >= v6 )
    v7 = a2;
  else
    v7 = -858993459 * ((v4 - *(_DWORD *)v3) >> 4);
  v8 = __CFADD__(v6, v7);
  v9 = v6 + v7;
  if ( v8 )
    v10 = 1;
  else
    v10 = 0;
  if ( v9 > 0x3333333 )
    v10 |= 1u;
  if ( v10 )
  {
    v9 = 53687091;
  }
  else if ( !v9 )
  {
    v11 = 0;
    goto LABEL_17;
  }
  v11 = (char *)operator new(80 * v9);
LABEL_17:
  v12 = std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(
          *(void **)v3,
          *(_DWORD *)(v3 + 4),
          v11);
  v13 = std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(v12, v2);
  if ( *(_DWORD *)v3 )
    operator delete(*(void **)v3);
  *(_DWORD *)v3 = v11;
  *(_DWORD *)(v3 + 4) = v13;
  *(_DWORD *)(v3 + 8) = &v11[80 * v9];
}

//----- (00003C60) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::resize(_DWORD *a1, unsigned int a2)
{
  unsigned int v2; // r3

  v2 = -858993459 * ((a1[1] - *a1) >> 4);
  if ( a2 <= v2 )
  {
    if ( a2 < v2 )
      a1[1] = *a1 + 80 * a2;
  }
  else
  {
    std::vector<Bbox,std::allocator<Bbox>>::_M_default_append((int)a1, a2 - v2);
  }
}

//----- (00003CB0) --------------------------------------------------------
char **__fastcall std::vector<Bbox,std::allocator<Bbox>>::operator=(char **a1, char **a2)
{
  char **v2; // r4
  char *v3; // r6
  int v4; // r8
  char *v5; // r2
  char **v6; // r5
  int v7; // r7
  unsigned int v8; // r0
  unsigned int v9; // r5
  int v11; // r1
  int v12; // r1
  char *v13; // r0

  v2 = a1;
  if ( a2 != a1 )
  {
    v3 = *a2;
    v4 = (int)a2[1];
    v5 = *a1;
    v6 = a2;
    v7 = v4 - (_DWORD)*a2;
    v8 = -858993459 * (v7 >> 4);
    if ( -858993459 * ((v2[2] - *v2) >> 4) >= v8 )
    {
      v11 = v2[1] - v5;
      if ( v8 > -858993459 * (v11 >> 4) )
      {
        std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v3, (int)&v3[v11], v5);
        v5 = v2[1];
        v12 = (int)v6[1];
        v13 = &(*v6)[v5 - *v2];
      }
      else
      {
        v12 = v4;
        v13 = v3;
      }
      std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v13, v12, v5);
    }
    else
    {
      if ( v8 )
      {
        if ( v8 > 0x3333333 )
          std::__throw_bad_alloc();
        v8 = operator new(v4 - (_DWORD)*a2);
      }
      v9 = v8;
      std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v3, v4, (char *)v8);
      if ( *v2 )
        operator delete(*v2);
      *v2 = (char *)v9;
      v2[2] = (char *)(v9 + v7);
    }
    v2[1] = &(*v2)[v7];
  }
  return v2;
}

//----- (00003DB4) --------------------------------------------------------
char *__fastcall nna_nms_min(char **a1)
{
  float v1; // s0
  int *v2; // r4
  char *result; // r0
  char *v4; // r1
  int v5; // r3
  int v6; // r6
  int i; // r5
  int v8; // r3
  unsigned int v9; // r6
  unsigned int v10; // r5
  int v11; // r7
  unsigned int v12; // r8
  int v13; // r11
  int v14; // r0
  signed int v15; // r3
  float v16; // s19
  int v17; // r11
  int v18; // r0
  signed int v19; // r3
  float v20; // s18
  int v21; // r11
  signed int v22; // r3
  float v23; // s17
  int v24; // r11
  signed int v25; // r3
  float v26; // s15
  float v27; // s16
  float v28; // s16
  float v29; // s17
  unsigned int v30; // r1
  int v31; // r0
  int v32; // r5
  void *v33; // r0
  const void *v34; // r1
  int v35; // [sp+8h] [bp-78h]
  int v36; // [sp+Ch] [bp-74h]
  int v37; // [sp+10h] [bp-70h]
  int v38; // [sp+14h] [bp-6Ch]
  int v39; // [sp+18h] [bp-68h]
  int v40; // [sp+1Ch] [bp-64h]
  char v41; // [sp+20h] [bp-60h]
  __int64 v42; // [sp+24h] [bp-5Ch]
  __int64 *v43; // [sp+2Ch] [bp-54h]
  __int64 *v44; // [sp+30h] [bp-50h]
  int v45; // [sp+34h] [bp-4Ch]

  v2 = (int *)a1;
  result = *a1;
  v4 = (char *)v2[1];
  if ( v4 != result )
  {
    std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(
      result,
      v4,
      (int (__fastcall *)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))nms_cmpScore);
    v35 = 0;
    v36 = 0;
    v37 = 0;
    v45 = 0;
    v5 = (v2[1] - *v2) >> 4;
    v42 = 0LL;
    v6 = -858993459 * v5;
    v43 = &v42;
    v44 = &v42;
    std::vector<int,std::allocator<int>>::resize((int)&v35, -858993459 * v5);
    for ( i = 0; v6 > i; ++i )
    {
      v8 = *(_DWORD *)(*v2 + 80 * i);
      v39 = i;
      v38 = v8;
      std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(
        (int)&v41,
        (float *)&v38);
    }
    v9 = 0;
    while ( v45 )
    {
      v10 = *(_DWORD *)(std::_Rb_tree_decrement(&v42) + 20);
      v11 = (int)v43;
      *(_DWORD *)(v35 + 4 * v9++) = v10;
      while ( (__int64 *)v11 != &v42 )
      {
        v12 = *(_DWORD *)(v11 + 20);
        v13 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, *(_DWORD *)(v11 + 20));
        v14 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10);
        v15 = *(_DWORD *)(v13 + 4);
        if ( v15 < *(_DWORD *)(v14 + 4) )
          v15 = *(_DWORD *)(v14 + 4);
        v16 = (float)v15;
        v17 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v18 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10);
        v19 = *(_DWORD *)(v17 + 8);
        if ( v19 < *(_DWORD *)(v18 + 8) )
          v19 = *(_DWORD *)(v18 + 8);
        v20 = (float)v19;
        v21 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v22 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 12);
        if ( v22 >= *(_DWORD *)(v21 + 12) )
          v22 = *(_DWORD *)(v21 + 12);
        v23 = (float)v22;
        v24 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v25 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 16);
        if ( v25 >= *(_DWORD *)(v24 + 16) )
          v25 = *(_DWORD *)(v24 + 16);
        v26 = (float)(v23 - v16) + 1.0;
        v27 = (float)((float)v25 - v20) + 1.0;
        if ( v26 <= 0.0 )
          v26 = 0.0;
        if ( v27 <= 0.0 )
          v27 = 0.0;
        v28 = v26 * v27;
        v29 = *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12) + 20);
        if ( v29 >= *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 20) )
          v30 = v10;
        else
          v30 = v12;
        if ( (float)(v28 / *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v30) + 20)) <= v1 )
          v31 = std::_Rb_tree_increment(v11);
        else
          v31 = ZNSt8_Rb_treeIfSt4pairIKfiESt10_Select1stIS2_ESt4lessIfESaIS2_EE5eraseB5cxx11ESt17_Rb_tree_iteratorIS2_E(
                  (int)&v41,
                  v11);
        v11 = v31;
      }
    }
    std::vector<int,std::allocator<int>>::resize((int)&v35, v9);
    v38 = 0;
    v39 = 0;
    v40 = 0;
    std::vector<Bbox,std::allocator<Bbox>>::resize(&v38, v9);
    v32 = 0;
    while ( v9 != v32 )
    {
      v33 = (void *)(v38 + 80 * v32);
      v34 = (const void *)(*v2 + 80 * *(_DWORD *)(v35 + 4 * v32++));
      memcpy(v33, v34, 0x50u);
    }
    std::vector<Bbox,std::allocator<Bbox>>::operator=((char **)v2, (char **)&v38);
    std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v38);
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree((int)&v41);
    result = (char *)std::_Vector_base<int,std::allocator<int>>::~_Vector_base((void **)&v35);
  }
  return result;
}
// 4B40: using guessed type int __fastcall std::_Rb_tree_increment(_DWORD);
// 4B4C: using guessed type int __fastcall std::_Rb_tree_decrement(_DWORD);

//----- (00004120) --------------------------------------------------------
char *__fastcall nna_nms_union(char **a1)
{
  float v1; // s0
  int *v2; // r4
  char *result; // r0
  char *v4; // r1
  int v5; // r3
  int v6; // r6
  int i; // r5
  int v8; // r3
  unsigned int v9; // r5
  unsigned int v10; // r7
  int v11; // r6
  unsigned int v12; // r9
  int v13; // r11
  int v14; // r0
  signed int v15; // r3
  float v16; // s19
  int v17; // r11
  int v18; // r0
  signed int v19; // r3
  float v20; // s18
  int v21; // r11
  signed int v22; // r3
  float v23; // s17
  int v24; // r11
  signed int v25; // r3
  float v26; // s15
  float v27; // s16
  float v28; // s17
  int v29; // r0
  int v30; // r6
  void *v31; // r0
  const void *v32; // r1
  int v33; // [sp+8h] [bp-78h]
  int v34; // [sp+Ch] [bp-74h]
  int v35; // [sp+10h] [bp-70h]
  int v36; // [sp+14h] [bp-6Ch]
  int v37; // [sp+18h] [bp-68h]
  int v38; // [sp+1Ch] [bp-64h]
  char v39; // [sp+20h] [bp-60h]
  __int64 v40; // [sp+24h] [bp-5Ch]
  __int64 *v41; // [sp+2Ch] [bp-54h]
  __int64 *v42; // [sp+30h] [bp-50h]
  int v43; // [sp+34h] [bp-4Ch]

  v2 = (int *)a1;
  result = *a1;
  v4 = (char *)v2[1];
  if ( v4 != result )
  {
    std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(
      result,
      v4,
      (int (__fastcall *)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))nms_cmpScore);
    v33 = 0;
    v34 = 0;
    v35 = 0;
    v43 = 0;
    v5 = (v2[1] - *v2) >> 4;
    v40 = 0LL;
    v6 = -858993459 * v5;
    v41 = &v40;
    v42 = &v40;
    std::vector<int,std::allocator<int>>::resize((int)&v33, -858993459 * v5);
    for ( i = 0; v6 > i; ++i )
    {
      v8 = *(_DWORD *)(*v2 + 80 * i);
      v37 = i;
      v36 = v8;
      std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(
        (int)&v39,
        (float *)&v36);
    }
    v9 = 0;
    while ( v43 )
    {
      v10 = *(_DWORD *)(std::_Rb_tree_decrement(&v40) + 20);
      v11 = (int)v41;
      *(_DWORD *)(v33 + 4 * v9++) = v10;
      while ( (__int64 *)v11 != &v40 )
      {
        v12 = *(_DWORD *)(v11 + 20);
        v13 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, *(_DWORD *)(v11 + 20));
        v14 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10);
        v15 = *(_DWORD *)(v13 + 4);
        if ( v15 < *(_DWORD *)(v14 + 4) )
          v15 = *(_DWORD *)(v14 + 4);
        v16 = (float)v15;
        v17 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v18 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10);
        v19 = *(_DWORD *)(v17 + 8);
        if ( v19 < *(_DWORD *)(v18 + 8) )
          v19 = *(_DWORD *)(v18 + 8);
        v20 = (float)v19;
        v21 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v22 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 12);
        if ( v22 >= *(_DWORD *)(v21 + 12) )
          v22 = *(_DWORD *)(v21 + 12);
        v23 = (float)v22;
        v24 = std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12);
        v25 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 16);
        if ( v25 >= *(_DWORD *)(v24 + 16) )
          v25 = *(_DWORD *)(v24 + 16);
        v26 = (float)(v23 - v16) + 1.0;
        v27 = (float)((float)v25 - v20) + 1.0;
        if ( v26 <= 0.0 )
          v26 = 0.0;
        if ( v27 <= 0.0 )
          v27 = 0.0;
        v28 = *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v12) + 20);
        if ( (float)((float)(v26 * v27)
                   / (float)((float)(v28 + *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v2, v10) + 20))
                           - (float)(v26 * v27))) <= v1 )
          v29 = std::_Rb_tree_increment(v11);
        else
          v29 = ZNSt8_Rb_treeIfSt4pairIKfiESt10_Select1stIS2_ESt4lessIfESaIS2_EE5eraseB5cxx11ESt17_Rb_tree_iteratorIS2_E(
                  (int)&v39,
                  v11);
        v11 = v29;
      }
    }
    std::vector<int,std::allocator<int>>::resize((int)&v33, v9);
    v36 = 0;
    v37 = 0;
    v38 = 0;
    std::vector<Bbox,std::allocator<Bbox>>::resize(&v36, v9);
    v30 = 0;
    while ( v9 != v30 )
    {
      v31 = (void *)(v36 + 80 * v30);
      v32 = (const void *)(*v2 + 80 * *(_DWORD *)(v33 + 4 * v30++));
      memcpy(v31, v32, 0x50u);
    }
    std::vector<Bbox,std::allocator<Bbox>>::operator=((char **)v2, (char **)&v36);
    std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v36);
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree((int)&v39);
    result = (char *)std::_Vector_base<int,std::allocator<int>>::~_Vector_base((void **)&v33);
  }
  return result;
}
// 4B40: using guessed type int __fastcall std::_Rb_tree_increment(_DWORD);
// 4B4C: using guessed type int __fastcall std::_Rb_tree_decrement(_DWORD);

//----- (00004478) --------------------------------------------------------
int GLOBAL__sub_I_utility_cpp()
{
  std::ios_base::Init::Init((std::ios_base::Init *)&std::__ioinit);
  return _aeabi_atexit(&std::__ioinit, &std::ios_base::Init::~Init, &_dso_handle);
}
// 4B5C: using guessed type int __fastcall _aeabi_atexit(_DWORD, _DWORD, _DWORD);
// 4B60: using guessed type _DWORD __cdecl std::ios_base::Init::~Init(std::ios_base::Init *__hidden this);

#error "There were 1 decompilation failure(s) on 75 function(s)"
