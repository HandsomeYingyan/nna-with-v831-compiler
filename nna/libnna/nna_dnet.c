/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2017 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

bool __fastcall cmpScore(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, float a17, int a18, int a19, int a20, float a21);
int *__fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string(int *a1, const char *a2);
unsigned int __fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::_M_allocate(unsigned int result);
_DWORD *__fastcall ncnn::Mat::Mat(_DWORD *result, _DWORD *a2);
void __fastcall ncnn::Mat::release(ncnn::Mat *this);
int __fastcall ncnn::Mat::channel(int result, int a2, int a3);
char *__fastcall FDNET::SetCeilImageWidth(FDNET *this, int a2);
char *__fastcall FDNET::SetRunOnly(FDNET *this, int a2);
unsigned int __fastcall FDNET::GetBuffer_VirAddr(FDNET *this, unsigned int a2);
char *__fastcall FDNET::SetBuffer(FDNET *this, unsigned int a2, unsigned __int64 a3, int a4);
char *__fastcall FDNET::SetHdSize(FDNET *this, int a2, int a3);
char *__fastcall FDNET::SetFactor(FDNET *this, float a2);
char *__fastcall FDNET::SetMinFace(FDNET *this, int a2);
int *__fastcall FDNET::SetFdFixedPoint(FDNET *this, int *a2);
char *__fastcall FDNET::SetHdFixedPoint(FDNET *this, int *a2);
float *__fastcall FDNET::SetThreshold(FDNET *this, float *a2, float *a3);
char *__fastcall FDNET::SetHdThreshold(FDNET *this, float a2, float a3);
bool __fastcall MinBboxcmpScore(float a1, int a2, float a3);
int __fastcall FDNET::hd_refine(int a1, int *a2, _DWORD *a3, _DWORD *a4, char a5);
int __fastcall FDNET::refine(int a1, int *a2, _DWORD *a3, _DWORD *a4, char a5);
int __fastcall std::vector<Bbox,std::allocator<Bbox>>::at(int *a1, unsigned int a2);
void **__fastcall std::_Vector_base<int,std::allocator<int>>::~_Vector_base(void **a1);
void __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(int a1, _DWORD *a2);
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree(int a1);
void __fastcall std::vector<int,std::allocator<int>>::_M_default_append(void **a1, unsigned int a2);
void __fastcall std::vector<int,std::allocator<int>>::resize(int a1, unsigned int a2);
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(int a1, float *a2);
void **__fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base(void **a1);
void __fastcall std::vector<float,std::allocator<float>>::_M_emplace_back_aux<float const&>(void **a1, _DWORD *a2);
signed int __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_check_len(_DWORD *a1, unsigned int a2, const char *a3);
int __fastcall __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(int (__fastcall **a1)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), _DWORD *a2, const void *a3);
void *__fastcall std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(void *src, int (__fastcall *a2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
int __fastcall std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(int a1, int a2);
void *__fastcall std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int (__fastcall *a24)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
void *__fastcall std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(const void *a1, int a2, void *a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
void *__fastcall std::swap<Bbox>(void *src, void *a2);
char *__fastcall std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD));
void *__fastcall std::__copy_move_backward<true,true,std::random_access_iterator_tag>::__copy_move_b<Bbox>(void *src, int a2, int a3);
char *__fastcall std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
char *__fastcall std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int));
size_t __fastcall std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(void *src, int a2, char *a3);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::push_back(int a1, const void *a2);
void __fastcall FDNET::HDgenerateBbox(int a1, int a2, int a3, int a4);
void __fastcall FDNET::generateBbox(int a1, int a2, int a3, int a4);
void __fastcall FDNET::NNA_FD2(FDNET *this);
void __fastcall FDNET::NNA_FD3(FDNET *this);
void __fastcall FDNET::NNA_HD_RUN_IMG_MINI(int a1, unsigned int a2, int a3, int a4, int a5);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_default_append(char **a1, unsigned int a2);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::resize(int a1, unsigned int a2);
char **__fastcall std::vector<Bbox,std::allocator<Bbox>>::operator=(char **a1, char **a2);
void **__fastcall FDNET::NNA_nms(void **result, char **a2, int a3);
char *__fastcall FDNET::nms(int a1, int a2, int a3);
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_range_insert<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(char **a1, void *a2, char *a3, int a4);
void **__fastcall FDNET::NNA_HD_IMG(FDNET *this);
void *__fastcall FDNET::NNA_HD_RUN_IMG(int *a1, int a2, int a3, int a4, int a5);
void __fastcall FDNET::NNA_FD1(FDNET *this);
void __fastcall FDNET::NNA_FD_RUN_IMG(FDNET *a1, int a2, int a3, int a4, int a5);
int GLOBAL__sub_I_nna_dnet_cpp();
// size_t strlen(const char *s);
// int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_create(_DWORD, _DWORD, _DWORD); weak
// int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_S_copy_chars(_DWORD, _DWORD, _DWORD); weak
// void __cdecl __noreturn std::__throw_logic_error(const char *); idb
// void __noreturn std::__throw_bad_alloc(void); idb
// _DWORD __cdecl operator new(unsigned int); idb
// void free(void *ptr);
// int __fastcall std::operator<<<std::char_traits<char>>(_DWORD, _DWORD); weak
// int __fastcall std::endl<char,std::char_traits<char>>(_DWORD); weak
// _DWORD std::__throw_out_of_range_fmt(const char *, ...); idb
// void __cdecl operator delete(void *); idb
// void __cdecl __noreturn std::__throw_length_error(const char *); idb
// void *memmove(void *dest, const void *src, size_t n);
// int __fastcall std::_Rb_tree_insert_and_rebalance(_DWORD, _DWORD, _DWORD, _DWORD); weak
// void *memcpy(void *dest, const void *src, size_t n);
// void *memset(void *s, int c, size_t n);
// int __fastcall nna_resize(_DWORD, _DWORD); weak
// _DWORD __cdecl nna_fd2(unsigned int, unsigned int, int); idb
// int __fastcall nna_data_to_mat(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall i8_to_float(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall nna_m_softmax(_DWORD, _DWORD); weak
// _DWORD __cdecl nna_fd3(unsigned int, unsigned int, int); idb
// _DWORD __cdecl nna_resize_once(unsigned int, int, int, unsigned int, int, int, int, int, int, int); idb
// int __fastcall nna_reset(_DWORD); weak
// _DWORD __cdecl nna_hd_mini(unsigned int, unsigned int, unsigned int, unsigned int, int, int); idb
// int __fastcall std::_Rb_tree_decrement(_DWORD); weak
// int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(_DWORD, _DWORD); weak
// _DWORD __cdecl nna_nms(unsigned int, unsigned int, int, int, int); idb
// int printf(const char *format, ...);
// int __fastcall std::_Rb_tree_increment(_DWORD); weak
// int __fastcall std::_Rb_tree_rebalance_for_erase(_DWORD, _DWORD); weak
// _DWORD __cdecl nna_net_hd_init(int, int, int); idb
// _DWORD nna_net_hd_get_score_size(void); idb
// _DWORD nna_net_hd_get_location_size(void); idb
// _DWORD nna_net_hd_get_score_w(void); idb
// _DWORD nna_net_hd_get_score_h(void); idb
// _DWORD __cdecl nna_hd(unsigned int, unsigned int); idb
// _DWORD __cdecl nna_hd_ddr_rom(unsigned int, unsigned int); idb
// int __fastcall nna_m_sigmoid(_DWORD, _DWORD, _DWORD); weak
// int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(_DWORD); weak
// float ceilf(float x);
// _DWORD __cdecl nna_net_fd1_init(int, int, int); idb
// _DWORD nna_net_fd1_get_score_size(void); idb
// _DWORD nna_net_fd1_get_location_size(void); idb
// _DWORD nna_net_fd1_get_score_w(void); idb
// _DWORD nna_net_fd1_get_score_h(void); idb
// _DWORD nna_net_fd1_get_score_c(void); idb
// _DWORD __cdecl nna_fd1(unsigned int, unsigned int, int, int); idb
// _DWORD __cdecl nna_fd1_big(unsigned int, unsigned int, int); idb
// _DWORD std::ios_base::Init::Init(std::ios_base::Init *__hidden this); idb
// int __fastcall _aeabi_atexit(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl std::ios_base::Init::~Init(std::ios_base::Init *__hidden this); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN std::__ioinit; // weak
// extern _UNKNOWN std::cout; weak
// extern _UNKNOWN _dso_handle; weak


//----- (00000004) --------------------------------------------------------
bool __fastcall cmpScore(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, float a17, int a18, int a19, int a20, float a21)
{
  float *v21; // r12
  float v23; // [sp+0h] [bp-10h]

  v21 = &v23 - 1;
  *((_DWORD *)v21 + 1) = a1;
  *((_DWORD *)v21 + 2) = a2;
  *((_DWORD *)v21 + 3) = a3;
  *((_DWORD *)v21 + 4) = a4;
  return v23 < a21;
}

//----- (0000003C) --------------------------------------------------------
int *__fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string(int *a1, const char *a2)
{
  const char *v2; // r5
  int *v3; // r4
  size_t v4; // r0
  int v5; // r6
  int v6; // r0
  int v7; // r3
  int v8; // r3
  int v9; // r2
  int *result; // r0
  const char *v11; // [sp+4h] [bp-14h]

  v11 = a2;
  v2 = a2;
  *a1 = (int)(a1 + 2);
  if ( !a2 )
    std::__throw_logic_error("basic_string::_M_construct null not valid");
  v3 = a1;
  v4 = strlen(a2);
  v5 = (int)&v2[v4];
  v11 = (const char *)v4;
  if ( v4 > 0xF )
  {
    v6 = std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_create(v3, &v11, 0);
    v7 = (int)v11;
    *v3 = v6;
    v3[2] = v7;
  }
  std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_S_copy_chars(*v3, v2, v5);
  v8 = (int)v11;
  v9 = *v3;
  result = v3;
  v3[1] = (int)v11;
  *(_BYTE *)(v9 + v8) = 0;
  return result;
}
// 3AA4: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_create(_DWORD, _DWORD, _DWORD);
// 3AA8: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_S_copy_chars(_DWORD, _DWORD, _DWORD);

//----- (000000D4) --------------------------------------------------------
unsigned int __fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::_M_allocate(unsigned int result)
{
  if ( result )
  {
    if ( result > 0x3333333 )
      std::__throw_bad_alloc();
    result = operator new(80 * result);
  }
  return result;
}

//----- (0000010C) --------------------------------------------------------
_DWORD *__fastcall ncnn::Mat::Mat(_DWORD *result, _DWORD *a2)
{
  unsigned int *v2; // r3
  unsigned int v3; // r2

  *result = *a2;
  result[1] = a2[1];
  v2 = (unsigned int *)a2[2];
  result[2] = v2;
  if ( v2 )
  {
    __dmb(0xBu);
    do
      v3 = __ldrex(v2);
    while ( __strex(v3 + 1, v2) );
    __dmb(0xBu);
  }
  result[3] = a2[3];
  result[4] = a2[4];
  result[5] = a2[5];
  result[6] = a2[6];
  return result;
}

//----- (00000178) --------------------------------------------------------
void __fastcall ncnn::Mat::release(ncnn::Mat *this)
{
  unsigned int *v1; // r3
  ncnn::Mat *v2; // r4
  unsigned int v3; // r2
  int v4; // r3

  v1 = (unsigned int *)*((_DWORD *)this + 2);
  v2 = this;
  if ( v1 )
  {
    __dmb(0xBu);
    do
      v3 = __ldrex(v1);
    while ( __strex(v3 - 1, v1) );
    __dmb(0xBu);
    if ( v3 == 1 )
    {
      v4 = *((_DWORD *)this + 1);
      if ( v4 )
        free(*(void **)(v4 - 4));
    }
  }
  *(_DWORD *)v2 = 0;
  *((_DWORD *)v2 + 1) = 0;
  *((_DWORD *)v2 + 3) = 0;
  *((_DWORD *)v2 + 4) = 0;
  *((_DWORD *)v2 + 5) = 0;
  *((_DWORD *)v2 + 6) = 0;
  *((_DWORD *)v2 + 2) = 0;
}

//----- (000001F4) --------------------------------------------------------
int __fastcall ncnn::Mat::channel(int result, int a2, int a3)
{
  int v3; // r12
  int v4; // lr
  int v5; // r2

  v3 = *(_DWORD *)(a2 + 16);
  v4 = *(_DWORD *)(a2 + 12);
  v5 = *(_DWORD *)(a2 + 4) + *(_DWORD *)(a2 + 24) * 4 * a3;
  *(_DWORD *)(result + 16) = v3;
  *(_DWORD *)result = 2;
  *(_DWORD *)(result + 4) = v5;
  *(_DWORD *)(result + 12) = v4;
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 20) = 1;
  *(_DWORD *)(result + 24) = v3 * v4;
  return result;
}

//----- (00000248) --------------------------------------------------------
char *__fastcall FDNET::SetCeilImageWidth(FDNET *this, int a2)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 207) = a2;
  return result;
}

//----- (00000260) --------------------------------------------------------
char *__fastcall FDNET::SetRunOnly(FDNET *this, int a2)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 206) = a2;
  return result;
}

//----- (00000278) --------------------------------------------------------
unsigned int __fastcall FDNET::GetBuffer_VirAddr(FDNET *this, unsigned int a2)
{
  return *((_DWORD *)this + 105662) - a2 + *((_DWORD *)this + 105664);
}

//----- (0000029C) --------------------------------------------------------
char *__fastcall FDNET::SetBuffer(FDNET *this, unsigned int a2, unsigned __int64 a3, int a4)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_QWORD *)result + 96) = a3;
  *((_DWORD *)result + 190) = a2;
  *((_DWORD *)result + 194) = a4;
  return result;
}

//----- (000002C4) --------------------------------------------------------
char *__fastcall FDNET::SetHdSize(FDNET *this, int a2, int a3)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 195) = a2;
  *((_DWORD *)result + 196) = a3;
  return result;
}

//----- (000002E0) --------------------------------------------------------
char *__fastcall FDNET::SetFactor(FDNET *this, float a2)
{
  int v2; // s0
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 213) = v2;
  return result;
}

//----- (000002F8) --------------------------------------------------------
char *__fastcall FDNET::SetMinFace(FDNET *this, int a2)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 209) = a2;
  return result;
}

//----- (00000310) --------------------------------------------------------
int *__fastcall FDNET::SetFdFixedPoint(FDNET *this, int *a2)
{
  int *v2; // r3
  int *result; // r0
  int *v4; // r1
  int v5; // t1

  v2 = a2 - 1;
  result = (int *)((char *)this + 422676);
  v4 = a2 + 6;
  do
  {
    v5 = v2[1];
    ++v2;
    *result = v5;
    ++result;
  }
  while ( v2 != v4 );
  return result;
}

//----- (00000340) --------------------------------------------------------
char *__fastcall FDNET::SetHdFixedPoint(FDNET *this, int *a2)
{
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 204) = *a2;
  *((_DWORD *)result + 205) = a2[1];
  return result;
}

//----- (00000364) --------------------------------------------------------
float *__fastcall FDNET::SetThreshold(FDNET *this, float *a2, float *a3)
{
  float *result; // r0

  result = (float *)((char *)this + 421888);
  result[210] = *a2;
  result[211] = a2[1];
  result[212] = a2[2];
  result[180] = *a3;
  result[181] = a3[1];
  result[182] = a3[2];
  return result;
}

//----- (000003A8) --------------------------------------------------------
char *__fastcall FDNET::SetHdThreshold(FDNET *this, float a2, float a3)
{
  int v3; // s0
  int v4; // s1
  char *result; // r0

  result = (char *)this + 421888;
  *((_DWORD *)result + 214) = v3;
  *((_DWORD *)result + 215) = v4;
  return result;
}

//----- (000003C4) --------------------------------------------------------
bool __fastcall MinBboxcmpScore(float a1, int a2, float a3)
{
  return a1 < a3;
}

//----- (00000400) --------------------------------------------------------
int __fastcall FDNET::hd_refine(int a1, int *a2, _DWORD *a3, _DWORD *a4, char a5)
{
  int v5; // r12
  int v6; // r5
  int v7; // r0
  int result; // r0
  int v9; // r0
  float v10; // s13
  float v11; // s12
  float v12; // s15
  float v13; // s14
  int v14; // r7
  int v15; // r0
  signed int v16; // r4
  float v17; // s15
  int v18; // r9
  signed int v19; // s15
  signed int v20; // lr
  float v21; // s15
  int v22; // lr
  int v23; // lr
  int v24; // r0
  bool v25; // nf
  unsigned __int8 v26; // vf
  int v27; // lr
  int v28; // lr
  int v29; // r0
  int v30; // lr
  int v31; // lr

  v5 = *a2;
  v6 = a2[1];
  if ( v6 == *a2 )
  {
    v7 = std::operator<<<std::char_traits<char>>(&std::cout, "Bbox is empty!!");
    result = std::endl<char,std::char_traits<char>>(v7);
  }
  else
  {
    v9 = a1 + 421888;
    v10 = (float)(signed int)*a4 / (float)*(signed int *)(v9 + 780);
    v11 = (float)(signed int)*a3 / (float)*(signed int *)(v9 + 784);
    do
    {
      v12 = *(float *)(v5 + 68);
      v13 = *(float *)(v5 + 64);
      v5 += 80;
      v14 = *(_DWORD *)(v5 - 76);
      v15 = *(_DWORD *)(v5 - 68);
      v16 = (signed int)(float)(v11 * v12);
      v17 = v10 * *(float *)(v5 - 8);
      v18 = *(_DWORD *)(v5 - 72) - (signed int)(float)(v11 * v13);
      *(_DWORD *)(v5 - 64) += v16;
      v19 = (signed int)v17;
      if ( a5 )
      {
        *(_DWORD *)(v5 - 68) = 0;
        *(_DWORD *)(v5 - 64) = 0;
      }
      *(_DWORD *)(v5 - 72) = v18;
      v20 = v19;
      v21 = *(float *)(v5 - 4);
      v22 = v14 - v20;
      if ( !a5 )
        v21 = v10 * v21;
      *(_DWORD *)(v5 - 76) = v22;
      if ( a5 )
      {
        *(_DWORD *)(v5 - 76) = 0;
        *(_DWORD *)(v5 - 72) = 0;
      }
      else
      {
        *(_DWORD *)(v5 - 68) = (signed int)v21 + v15;
      }
      v23 = *(_DWORD *)(v5 - 68);
      v24 = *(_DWORD *)(v5 - 72);
      if ( *(_DWORD *)(v5 - 76) < 0 )
        *(_DWORD *)(v5 - 76) = 0;
      if ( v24 < 0 )
        *(_DWORD *)(v5 - 72) = 0;
      v26 = __OFSUB__(v23, *a4);
      v25 = v23 - *a4 < 0;
      v27 = *(_DWORD *)(v5 - 64);
      if ( !(v25 ^ v26) )
        *(_DWORD *)(v5 - 68) = *a4 - 1;
      v26 = __OFSUB__(v27, *a3);
      v25 = v27 - *a3 < 0;
      v28 = *(_DWORD *)(v5 - 76);
      if ( !(v25 ^ v26) )
        *(_DWORD *)(v5 - 64) = *a3 - 1;
      v29 = *(_DWORD *)(v5 - 64);
      if ( *(_DWORD *)(v5 - 68) < 0 )
        *(_DWORD *)(v5 - 68) = 0;
      if ( v29 < 0 )
        *(_DWORD *)(v5 - 64) = 0;
      if ( v28 >= *a4 )
        *(_DWORD *)(v5 - 76) = *a4 - 1;
      v30 = *(_DWORD *)(v5 - 72);
      v26 = __OFSUB__(v30, *a3);
      v25 = v30 - *a3 < 0;
      v31 = *(_DWORD *)(v5 - 76);
      if ( !(v25 ^ v26) )
        *(_DWORD *)(v5 - 72) = *a3 - 1;
      result = (*(_DWORD *)(v5 - 64) - *(_DWORD *)(v5 - 72)) * (*(_DWORD *)(v5 - 68) - v31);
      *(float *)(v5 - 60) = (float)result;
    }
    while ( v6 != v5 );
  }
  return result;
}
// 3AC0: using guessed type int __fastcall std::operator<<<std::char_traits<char>>(_DWORD, _DWORD);
// 3AC4: using guessed type int __fastcall std::endl<char,std::char_traits<char>>(_DWORD);

//----- (000005D0) --------------------------------------------------------
int __fastcall FDNET::refine(int a1, int *a2, _DWORD *a3, _DWORD *a4, char a5)
{
  int result; // r0
  int v6; // r12
  int v7; // r0
  float v8; // s13
  float v9; // s11
  float v10; // s14
  float v11; // s15
  float v12; // s12
  float v13; // s14
  float v14; // s13
  float v15; // s15
  float v16; // s11
  float v17; // s14
  float v18; // s15
  int v19; // r1
  int v20; // r5
  bool v21; // nf
  int v22; // r1
  int v23; // r6
  unsigned __int8 v24; // vf
  int v25; // r5
  int v26; // r5

  result = *a2;
  v6 = a2[1];
  if ( v6 == *a2 )
  {
    v7 = std::operator<<<std::char_traits<char>>(&std::cout, "Bbox is empty!!");
    result = std::endl<char,std::char_traits<char>>(v7);
  }
  else
  {
    do
    {
      if ( a5 )
      {
        v8 = (float)(*(_DWORD *)(result + 12) - *(_DWORD *)(result + 4) + 1);
        v9 = (float)(*(_DWORD *)(result + 16) - *(_DWORD *)(result + 8) + 1);
        v10 = (float)*(signed int *)(result + 4) + (float)(v8 * *(float *)(result + 64));
        v11 = (float)*(signed int *)(result + 8) + (float)(v9 * *(float *)(result + 68));
        v12 = (float)((float)((float)*(signed int *)(result + 12) + (float)(v8 * *(float *)(result + 72))) - v10) + 1.0;
        v13 = v10 + (float)(v12 * 0.5);
        v14 = (float)((float)((float)*(signed int *)(result + 16) + (float)(v9 * *(float *)(result + 76))) - v11) + 1.0;
        v15 = v11 + (float)(v14 * 0.5);
        if ( v12 < v14 )
          v16 = v14;
        else
          v16 = v12;
        v17 = v13 - (float)(v16 * 0.5);
        v18 = v15 - (float)(v16 * 0.5);
        *(_DWORD *)(result + 4) = (signed int)(float)(v17 + 0.5);
        *(_DWORD *)(result + 8) = (signed int)(float)(v18 + 0.5);
        *(_DWORD *)(result + 12) = (signed int)(float)((float)((float)(v16 + v17) - 1.0) + 0.5);
        *(_DWORD *)(result + 16) = (signed int)(float)((float)((float)(v16 + v18) - 1.0) + 0.5);
      }
      v19 = *(_DWORD *)(result + 4);
      result += 80;
      v20 = *(_DWORD *)(result - 68);
      v21 = v19 < 0;
      v22 = *(_DWORD *)(result - 72);
      if ( v21 )
        *(_DWORD *)(result - 76) = 0;
      if ( v22 < 0 )
        *(_DWORD *)(result - 72) = 0;
      v23 = *(_DWORD *)(result - 72);
      v24 = __OFSUB__(v20, *a4);
      v21 = v20 - *a4 < 0;
      v25 = *(_DWORD *)(result - 64);
      if ( !(v21 ^ v24) )
        *(_DWORD *)(result - 68) = *a4 - 1;
      v24 = __OFSUB__(v25, *a3);
      v21 = v25 - *a3 < 0;
      v26 = *(_DWORD *)(result - 76);
      if ( !(v21 ^ v24) )
        *(_DWORD *)(result - 64) = *a3 - 1;
      *(float *)(result - 60) = (float)((*(_DWORD *)(result - 64) - v23) * (*(_DWORD *)(result - 68) - v26));
    }
    while ( v6 != result );
  }
  return result;
}
// 3AC0: using guessed type int __fastcall std::operator<<<std::char_traits<char>>(_DWORD, _DWORD);
// 3AC4: using guessed type int __fastcall std::endl<char,std::char_traits<char>>(_DWORD);

//----- (000007A4) --------------------------------------------------------
int __fastcall std::vector<Bbox,std::allocator<Bbox>>::at(int *a1, unsigned int a2)
{
  int v2; // r12

  v2 = *a1;
  if ( a2 >= -858993459 * ((a1[1] - *a1) >> 4) )
    std::__throw_out_of_range_fmt("vector::_M_range_check: __n (which is %zu) >= this->size() (which is %zu)");
  return v2 + 80 * a2;
}

//----- (000007F8) --------------------------------------------------------
void **__fastcall std::_Vector_base<int,std::allocator<int>>::~_Vector_base(void **a1)
{
  void **v1; // r4
  void *v2; // r0

  v1 = a1;
  v2 = *a1;
  if ( v2 )
    operator delete(v2);
  return v1;
}

//----- (00000824) --------------------------------------------------------
void __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(int a1, _DWORD *a2)
{
  int v2; // r6
  _DWORD *i; // r4
  _DWORD *v4; // r5

  v2 = a1;
  for ( i = a2; i; i = v4 )
  {
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(
      v2,
      i[3]);
    v4 = (_DWORD *)i[2];
    operator delete(i);
  }
}

//----- (00000864) --------------------------------------------------------
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree(int a1)
{
  int v1; // r4

  v1 = a1;
  std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_erase(
    a1,
    *(_DWORD **)(a1 + 8));
  return v1;
}

//----- (00000888) --------------------------------------------------------
void __fastcall std::vector<int,std::allocator<int>>::_M_default_append(void **a1, unsigned int a2)
{
  unsigned int v2; // r6
  _BYTE *v3; // r3
  _DWORD *v4; // r1
  unsigned int v5; // r2
  void **v6; // r5
  unsigned int v7; // r3
  unsigned int v8; // r4
  unsigned __int8 v9; // cf
  unsigned int v10; // r4
  signed int v11; // r1
  char *v12; // r8
  void *v13; // r9
  unsigned int v14; // r7
  int v15; // r7
  unsigned int v16; // r3
  _DWORD *v17; // r2
  int v18; // r7

  v2 = a2;
  if ( !a2 )
    return;
  v3 = a1[1];
  if ( a2 <= ((_BYTE *)a1[2] - v3) >> 2 )
  {
    v4 = a1[1];
    v5 = v2;
    do
    {
      *v4 = 0;
      ++v4;
      --v5;
    }
    while ( v5 );
    a1[1] = &v3[4 * v2];
    return;
  }
  v6 = a1;
  v7 = (v3 - (_BYTE *)*a1) >> 2;
  if ( a2 > 0x3FFFFFFF - v7 )
    std::__throw_length_error("vector::_M_default_append");
  if ( a2 >= v7 )
    v8 = a2;
  else
    v8 = v7;
  v9 = __CFADD__(v7, v8);
  v10 = v7 + v8;
  if ( v9 )
    v11 = 1;
  else
    v11 = 0;
  if ( v11 | (v10 > 0x3FFFFFFF) )
  {
    v10 = 0x3FFFFFFF;
  }
  else if ( !v10 )
  {
    v12 = 0;
    goto LABEL_17;
  }
  v12 = (char *)operator new(4 * v10);
LABEL_17:
  v13 = *v6;
  v14 = (_BYTE *)v6[1] - (_BYTE *)*v6;
  if ( v14 >> 2 )
    memmove(v12, *v6, (_BYTE *)v6[1] - (_BYTE *)*v6);
  v15 = (int)&v12[v14];
  v16 = v2;
  v17 = (_DWORD *)v15;
  do
  {
    *v17 = 0;
    ++v17;
    --v16;
  }
  while ( v16 );
  v18 = v15 + 4 * v2;
  if ( v13 )
    operator delete(v13);
  *v6 = v12;
  v6[1] = (void *)v18;
  v6[2] = &v12[4 * v10];
}

//----- (000009BC) --------------------------------------------------------
void __fastcall std::vector<int,std::allocator<int>>::resize(int a1, unsigned int a2)
{
  unsigned int v2; // r3

  v2 = (*(_DWORD *)(a1 + 4) - *(_DWORD *)a1) >> 2;
  if ( a2 <= v2 )
  {
    if ( a2 < v2 )
      *(_DWORD *)(a1 + 4) = *(_DWORD *)a1 + 4 * a2;
  }
  else
  {
    std::vector<int,std::allocator<int>>::_M_default_append((void **)a1, a2 - v2);
  }
}

//----- (000009F0) --------------------------------------------------------
int __fastcall std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(int a1, float *a2)
{
  int v2; // r8
  int v3; // r3
  int v4; // r5
  float *v5; // r7
  int v6; // r6
  int v7; // r2
  _BOOL4 v8; // r9
  int v9; // r0
  int v10; // r4
  int result; // r0

  v2 = a1 + 4;
  v3 = *(_DWORD *)(a1 + 8);
  v4 = a1;
  v5 = a2;
  v6 = a1 + 4;
  while ( v3 )
  {
    v6 = v3;
    if ( *a2 >= *(float *)(v3 + 16) )
      v7 = *(_DWORD *)(v3 + 12);
    else
      v7 = *(_DWORD *)(v3 + 8);
    v3 = v7;
  }
  if ( v2 == v6 )
    v8 = 1;
  else
    v8 = *a2 < *(float *)(v6 + 16);
  v9 = operator new(0x18u);
  v10 = v9;
  *(float *)(v9 + 16) = *v5;
  *(float *)(v9 + 20) = v5[1];
  std::_Rb_tree_insert_and_rebalance(v8, v9, v6, v2);
  result = v10;
  ++*(_DWORD *)(v4 + 20);
  return result;
}
// 3ADC: using guessed type int __fastcall std::_Rb_tree_insert_and_rebalance(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00000AA8) --------------------------------------------------------
void **__fastcall std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base(void **a1)
{
  void **v1; // r4
  void *v2; // r0

  v1 = a1;
  v2 = *a1;
  if ( v2 )
    operator delete(v2);
  return v1;
}

//----- (00000AD4) --------------------------------------------------------
void __fastcall std::vector<float,std::allocator<float>>::_M_emplace_back_aux<float const&>(void **a1, _DWORD *a2)
{
  void **v2; // r6
  _DWORD *v3; // r8
  int v4; // r4
  int v5; // r3
  unsigned __int8 v6; // cf
  unsigned int v7; // r4
  signed int v8; // r2
  char *v9; // r7
  void *v10; // r9
  size_t v11; // r5
  int v12; // r5

  v2 = a1;
  v3 = a2;
  v4 = ((_BYTE *)a1[1] - (_BYTE *)*a1) >> 2;
  if ( v4 )
    v5 = ((_BYTE *)a1[1] - (_BYTE *)*a1) >> 2;
  else
    v5 = 1;
  v6 = __CFADD__(v4, v5);
  v7 = v4 + v5;
  if ( v6 )
    v8 = 1;
  else
    v8 = 0;
  if ( v8 | (v7 > 0x3FFFFFFF) )
  {
    v7 = 0x3FFFFFFF;
LABEL_9:
    v9 = (char *)operator new(4 * v7);
    goto LABEL_10;
  }
  if ( v7 )
    goto LABEL_9;
  v9 = 0;
LABEL_10:
  v10 = *v2;
  v11 = (_BYTE *)v2[1] - (_BYTE *)*v2;
  if ( &v9[v11] )
    *(_DWORD *)&v9[v11] = *v3;
  if ( v11 >> 2 )
    memmove(v9, v10, v11);
  v12 = (int)&v9[v11 + 4];
  if ( v10 )
    operator delete(v10);
  *v2 = v9;
  v2[1] = (void *)v12;
  v2[2] = &v9[4 * v7];
}

//----- (00000B9C) --------------------------------------------------------
signed int __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_check_len(_DWORD *a1, unsigned int a2, const char *a3)
{
  unsigned int v3; // r3
  unsigned __int8 v4; // cf
  unsigned int v5; // r3
  signed int v6; // r0
  signed int result; // r0

  v3 = -858993459 * ((a1[1] - *a1) >> 4);
  if ( 53687091 - v3 < a2 )
    std::__throw_length_error(a3);
  if ( v3 >= a2 )
    a2 = -858993459 * ((a1[1] - *a1) >> 4);
  v4 = __CFADD__(v3, a2);
  v5 = v3 + a2;
  if ( v4 )
    v6 = 1;
  else
    v6 = 0;
  if ( v5 > 0x3333333 )
    v6 |= 1u;
  if ( v6 )
    result = 53687091;
  else
    result = v5;
  return result;
}

//----- (00000C0C) --------------------------------------------------------
int __fastcall __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(int (__fastcall **a1)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD), _DWORD *a2, const void *a3)
{
  _DWORD *v3; // r4
  int (__fastcall **v4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r5
  char dest; // [sp+40h] [bp-60h]

  v3 = a2;
  v4 = a1;
  memcpy(&dest, a3, 0x50u);
  return (*v4)(
           *v3,
           v3[1],
           v3[2],
           v3[3],
           v3[4],
           v3[5],
           v3[6],
           v3[7],
           v3[8],
           v3[9],
           v3[10],
           v3[11],
           v3[12],
           v3[13],
           v3[14],
           v3[15],
           v3[16],
           v3[17],
           v3[18],
           v3[19]);
}

//----- (00000C74) --------------------------------------------------------
void *__fastcall std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(void *src, int (__fastcall *a2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  int (__fastcall *v2)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // r7
  char *v3; // r4
  const void *v4; // r1
  void *v5; // r6
  char v7; // [sp+40h] [bp-B8h]
  char dest; // [sp+90h] [bp-68h]
  int v9; // [sp+94h] [bp-64h]
  int v10; // [sp+98h] [bp-60h]
  int v11; // [sp+9Ch] [bp-5Ch]
  int v12; // [sp+A0h] [bp-58h]
  int v13; // [sp+A4h] [bp-54h]
  int v14; // [sp+A8h] [bp-50h]
  int v15; // [sp+ACh] [bp-4Ch]
  int v16; // [sp+B0h] [bp-48h]
  int v17; // [sp+B4h] [bp-44h]
  int v18; // [sp+B8h] [bp-40h]
  int v19; // [sp+BCh] [bp-3Ch]
  int v20; // [sp+C0h] [bp-38h]
  int v21; // [sp+C4h] [bp-34h]
  int v22; // [sp+C8h] [bp-30h]
  int v23; // [sp+CCh] [bp-2Ch]
  int v24; // [sp+D0h] [bp-28h]
  int v25; // [sp+D4h] [bp-24h]
  int v26; // [sp+D8h] [bp-20h]
  int v27; // [sp+DCh] [bp-1Ch]

  v2 = a2;
  v3 = (char *)src - 80;
  memcpy(&dest, src, 0x50u);
  while ( 1 )
  {
    v4 = v3;
    v5 = v3 + 80;
    v3 -= 80;
    memcpy(&v7, v4, 0x50u);
    if ( !v2(
            *(_DWORD *)&dest,
            v9,
            v10,
            v11,
            v12,
            v13,
            v14,
            v15,
            v16,
            v17,
            v18,
            v19,
            v20,
            v21,
            v22,
            v23,
            v24,
            v25,
            v26,
            v27) )
      break;
    memcpy(v3 + 160, v3 + 80, 0x50u);
  }
  return memcpy(v5, &dest, 0x50u);
}

//----- (00000D24) --------------------------------------------------------
int __fastcall std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(int a1, int a2)
{
  int v2; // r6
  int v3; // r7
  int v4; // r5
  int v5; // r4
  int v7; // [sp+0h] [bp-68h]

  v2 = a1;
  v3 = a2;
  v4 = a1;
  v5 = a2;
  memset(&v7, 0, 0x50u);
  while ( 1 )
  {
    v4 += 80;
    if ( !v5 )
      break;
    --v5;
    memcpy((void *)(v4 - 80), &v7, 0x50u);
  }
  return v2 + 80 * v3;
}

//----- (00000D90) --------------------------------------------------------
void *__fastcall std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23, int (__fastcall *a24)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  int v24; // r5
  int v25; // r6
  int v26; // r8
  int v27; // r4
  int v28; // r7
  void *v29; // r0
  void *v30; // r0
  int (__fastcall *v31)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r11
  int v32; // r6
  _DWORD *v33; // r7
  void *v34; // r0
  char v36; // [sp+40h] [bp-D8h]
  int v37; // [sp+90h] [bp-88h]
  int *v38; // [sp+94h] [bp-84h]
  char dest; // [sp+98h] [bp-80h]
  int src; // [sp+114h] [bp-4h]

  v24 = a1;
  src = a4;
  v25 = a3;
  v26 = (a3 - 1) / 2;
  v27 = a2;
  v37 = a2;
  v38 = (int *)&a24;
  while ( v27 < v26 )
  {
    v28 = 2 * (v27 + 1);
    if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
           (int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))v38,
           (_DWORD *)(v24 + 160 * (v27 + 1)),
           (const void *)(v24 + 80 * (v28 - 1))) )
    {
      --v28;
    }
    v29 = (void *)(v24 + 80 * v27);
    v27 = v28;
    memcpy(v29, (const void *)(v24 + 80 * v28), 0x50u);
  }
  if ( !(v25 & 1) && v27 == (v25 - 2) / 2 )
  {
    v30 = (void *)(v24 + 80 * v27);
    v27 = 2 * v27 + 1;
    memcpy(v30, (const void *)(v24 + 80 * v27), 0x50u);
  }
  v31 = a24;
  v32 = (v27 - 1) / 2;
  memcpy(&dest, &src, 0x50u);
  while ( v37 < v27 )
  {
    v33 = (_DWORD *)(v24 + 80 * v32);
    memcpy(&v36, &dest, 0x50u);
    if ( !v31(
            *v33,
            v33[1],
            v33[2],
            v33[3],
            v33[4],
            v33[5],
            v33[6],
            v33[7],
            v33[8],
            v33[9],
            v33[10],
            v33[11],
            v33[12],
            v33[13],
            v33[14],
            v33[15],
            v33[16],
            v33[17],
            v33[18],
            v33[19]) )
      break;
    v34 = (void *)(v24 + 80 * v27);
    v27 = v32;
    memcpy(v34, (const void *)(v24 + 80 * v32), 0x50u);
    v32 = (v32 - 1) / 2;
  }
  return memcpy((void *)(v24 + 80 * v27), &dest, 0x50u);
}

//----- (00000F14) --------------------------------------------------------
void *__fastcall std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(const void *a1, int a2, void *a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  void *v4; // r6
  const void *v5; // r5
  int v6; // r4
  int (__fastcall *v7)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r7
  int v9; // [sp+0h] [bp-B8h]
  int v10; // [sp+4h] [bp-B4h]
  int v11; // [sp+8h] [bp-B0h]
  int v12; // [sp+Ch] [bp-ACh]
  int v13; // [sp+10h] [bp-A8h]
  int v14; // [sp+14h] [bp-A4h]
  int v15; // [sp+18h] [bp-A0h]
  int v16; // [sp+1Ch] [bp-9Ch]
  int v17; // [sp+20h] [bp-98h]
  int v18; // [sp+24h] [bp-94h]
  int v19; // [sp+28h] [bp-90h]
  int v20; // [sp+2Ch] [bp-8Ch]
  int v21; // [sp+30h] [bp-88h]
  int v22; // [sp+34h] [bp-84h]
  int v23; // [sp+38h] [bp-80h]
  int v24; // [sp+3Ch] [bp-7Ch]
  int v25; // [sp+40h] [bp-78h]
  int v26; // [sp+44h] [bp-74h]
  int v27; // [sp+48h] [bp-70h]
  int v28; // [sp+50h] [bp-68h]
  char src; // [sp+54h] [bp-64h]

  v4 = a3;
  v5 = a1;
  v6 = a2 - (_DWORD)a1;
  v7 = a4;
  memcpy(&v28, a3, 0x50u);
  memcpy(v4, v5, 0x50u);
  memcpy(&v9, &src, 0x4Cu);
  return std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
           (int)v5,
           0,
           -858993459 * (v6 >> 4),
           v28,
           v9,
           v10,
           v11,
           v12,
           v13,
           v14,
           v15,
           v16,
           v17,
           v18,
           v19,
           v20,
           v21,
           v22,
           v23,
           v24,
           v25,
           v26,
           v27,
           v7);
}

//----- (00000FA0) --------------------------------------------------------
void *__fastcall std::swap<Bbox>(void *src, void *a2)
{
  void *v2; // r6
  void *v3; // r7
  int v5; // [sp+0h] [bp-68h]

  v2 = a2;
  v3 = src;
  memcpy(&v5, src, 0x50u);
  memcpy(v3, v2, 0x50u);
  return memcpy(v2, &v5, 0x50u);
}

//----- (00000FF8) --------------------------------------------------------
char *__fastcall std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int a3, int (__fastcall *a4)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))
{
  char *v4; // r4
  int v5; // r11
  int (__fastcall *v6)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // r7
  char *v7; // r5
  char *v8; // r10
  int v9; // r6
  int v10; // r6
  int i; // r8
  int v12; // r3
  char *v13; // r6
  int v14; // r0
  char *v15; // r2
  char *v16; // r1
  char *v17; // r8
  char *v18; // r6
  int v19; // r0
  char *v20; // r1
  int v21; // [sp+0h] [bp-D8h]
  int v22; // [sp+4h] [bp-D4h]
  int v23; // [sp+8h] [bp-D0h]
  int v24; // [sp+Ch] [bp-CCh]
  int v25; // [sp+10h] [bp-C8h]
  int v26; // [sp+14h] [bp-C4h]
  int v27; // [sp+18h] [bp-C0h]
  int v28; // [sp+1Ch] [bp-BCh]
  int v29; // [sp+20h] [bp-B8h]
  int v30; // [sp+24h] [bp-B4h]
  int v31; // [sp+28h] [bp-B0h]
  int v32; // [sp+2Ch] [bp-ACh]
  int v33; // [sp+30h] [bp-A8h]
  int v34; // [sp+34h] [bp-A4h]
  int v35; // [sp+38h] [bp-A0h]
  int v36; // [sp+3Ch] [bp-9Ch]
  int v37; // [sp+40h] [bp-98h]
  int v38; // [sp+44h] [bp-94h]
  int v39; // [sp+48h] [bp-90h]
  char *v40; // [sp+50h] [bp-88h]
  char *j; // [sp+54h] [bp-84h]
  int (__fastcall *v42)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // [sp+58h] [bp-80h]
  int (__fastcall *v43)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // [sp+5Ch] [bp-7Ch]
  int dest; // [sp+60h] [bp-78h]
  char v45; // [sp+64h] [bp-74h]

  v4 = result;
  v5 = a3;
  v6 = a4;
  v7 = a2;
  v8 = result + 80;
LABEL_2:
  if ( v7 - v4 >= 1360 )
  {
    v9 = (v7 - v4) >> 4;
    if ( !v5 )
    {
      v10 = -858993459 * v9;
      for ( i = (v10 - 2) >> 1; ; --i )
      {
        memcpy(&dest, &v4[80 * i], 0x50u);
        memcpy(&v21, &v45, 0x4Cu);
        result = (char *)std::__adjust_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,Bbox,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                           (int)v4,
                           i,
                           v10,
                           dest,
                           v21,
                           v22,
                           v23,
                           v24,
                           v25,
                           v26,
                           v27,
                           v28,
                           v29,
                           v30,
                           v31,
                           v32,
                           v33,
                           v34,
                           v35,
                           v36,
                           v37,
                           v38,
                           v39,
                           v6);
        if ( !i )
          break;
      }
      while ( 1 )
      {
        v12 = v7 - v4;
        v7 -= 80;
        if ( v12 <= 159 )
          break;
        result = (char *)std::__pop_heap<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                           v4,
                           (int)v7,
                           v7,
                           v6);
      }
      return result;
    }
    v43 = v6;
    v13 = &v4[80 * (-858993459 * v9 >> 1)];
    --v5;
    v14 = __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
            &v43,
            v8,
            v13);
    v15 = v7 - 80;
    if ( v14 )
    {
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v43,
             v13,
             v15) )
      {
LABEL_11:
        v16 = v13;
LABEL_16:
        v17 = v7;
        std::swap<Bbox>(v4, v16);
        v42 = v6;
        for ( j = v4 + 160; ; j += 80 )
        {
          v18 = j - 80;
          if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                  &v42,
                  (_DWORD *)j - 20,
                  v4) )
          {
            v40 = v17 - 80;
            do
            {
              v17 = v40;
              v19 = __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                      &v42,
                      v4,
                      v40);
              v40 -= 80;
            }
            while ( v19 );
            if ( v18 >= v17 )
            {
              v20 = v7;
              v7 = j - 80;
              result = (char *)std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                                 v18,
                                 v20,
                                 v5,
                                 v6);
              goto LABEL_2;
            }
            std::swap<Bbox>(v18, v17);
          }
        }
      }
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v43,
             v8,
             v7 - 80) )
      {
LABEL_13:
        v16 = v7 - 80;
        goto LABEL_16;
      }
    }
    else if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
                 &v43,
                 v8,
                 v15) )
    {
      if ( !__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
              &v43,
              v13,
              v7 - 80) )
        goto LABEL_11;
      goto LABEL_13;
    }
    v16 = v8;
    goto LABEL_16;
  }
  return result;
}

//----- (00001228) --------------------------------------------------------
void *__fastcall std::__copy_move_backward<true,true,std::random_access_iterator_tag>::__copy_move_b<Bbox>(void *src, int a2, int a3)
{
  void *v3; // r4

  v3 = (void *)(a3 - (a2 - (_DWORD)src));
  if ( -858993459 * ((a2 - (signed int)src) >> 4) )
    memmove(v3, src, a2 - (_DWORD)src);
  return v3;
}

//----- (0000126C) --------------------------------------------------------
char *__fastcall std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  char *v3; // r6
  char *v4; // r5
  char *i; // r4
  int (__fastcall *v6)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // [sp+4h] [bp-74h]
  char v7; // [sp+8h] [bp-70h]

  v6 = a3;
  if ( a2 != result )
  {
    v3 = a2;
    v4 = result;
    for ( i = result + 80; i != v3; i += 80 )
    {
      if ( __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>::operator()<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
             &v6,
             i,
             v4) )
      {
        memcpy(&v7, i, 0x50u);
        std::__copy_move_backward<true,true,std::random_access_iterator_tag>::__copy_move_b<Bbox>(
          v4,
          (int)i,
          (int)(i + 80));
        result = (char *)memcpy(v4, &v7, 0x50u);
      }
      else
      {
        result = (char *)std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(
                           i,
                           v6);
      }
    }
  }
  return result;
}

//----- (00001314) --------------------------------------------------------
char *__fastcall std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(char *result, char *a2, int (__fastcall *a3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))
{
  int (__fastcall *v3)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int); // r7
  int v4; // r5
  char *v5; // r4
  char *v6; // r6
  int v7; // r5
  void *v8; // r0

  if ( result != a2 )
  {
    v3 = a3;
    v4 = a2 - result;
    v5 = result;
    v6 = a2;
    std::__introsort_loop<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,int,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
      result,
      a2,
      2 * (31 - __clz(-858993459 * ((a2 - result) >> 4))),
      a3);
    if ( v4 < 1360 )
    {
      result = std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                 v5,
                 v6,
                 v3);
    }
    else
    {
      v7 = (int)(v5 + 1280);
      result = std::__insertion_sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Iter_comp_iter<bool (*)(Bbox,Bbox)>>(
                 v5,
                 v5 + 1280,
                 v3);
      while ( (char *)v7 != v6 )
      {
        v8 = (void *)v7;
        v7 += 80;
        result = (char *)std::__unguarded_linear_insert<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,__gnu_cxx::__ops::_Val_comp_iter<bool (*)(Bbox,Bbox)>>(
                           v8,
                           v3);
      }
    }
  }
  return result;
}

//----- (000013AC) --------------------------------------------------------
size_t __fastcall std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(void *src, int a2, char *a3)
{
  char *v3; // r5
  size_t v4; // r4

  v3 = a3;
  v4 = a2 - (_DWORD)src;
  if ( -858993459 * ((a2 - (signed int)src) >> 4) )
    memmove(a3, src, v4);
  return (size_t)&v3[v4];
}

//----- (000013F0) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::push_back(int a1, const void *a2)
{
  int v2; // r4
  int v3; // r5
  const void *v4; // r8
  signed int v5; // r0
  signed int v6; // r6
  unsigned int v7; // r0
  void *v8; // r7
  int v9; // r9
  char *v10; // r5
  void *v11; // r0
  size_t v12; // r7

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 4);
  if ( v3 == *(_DWORD *)(a1 + 8) )
  {
    v4 = a2;
    v5 = std::vector<Bbox,std::allocator<Bbox>>::_M_check_len((_DWORD *)a1, 1u, "vector::_M_emplace_back_aux");
    v6 = v5;
    v7 = std::_Vector_base<Bbox,std::allocator<Bbox>>::_M_allocate(v5);
    v8 = *(void **)v2;
    v9 = *(_DWORD *)(v2 + 4);
    v10 = (char *)v7;
    v11 = (void *)(v7 + v9 - *(_DWORD *)v2);
    if ( v11 )
      memcpy(v11, v4, 0x50u);
    v12 = std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v8, v9, v10) + 80;
    if ( *(_DWORD *)v2 )
      operator delete(*(void **)v2);
    *(_DWORD *)v2 = v10;
    *(_DWORD *)(v2 + 4) = v12;
    *(_DWORD *)(v2 + 8) = &v10[80 * v6];
  }
  else
  {
    if ( v3 )
      memcpy(*(void **)(a1 + 4), a2, 0x50u);
    *(_DWORD *)(v2 + 4) = v3 + 80;
  }
}

//----- (000014AC) --------------------------------------------------------
void __fastcall FDNET::HDgenerateBbox(int a1, int a2, int a3, int a4)
{
  float v4; // s0
  int v5; // r7
  int v6; // r9
  int v7; // r4
  int v8; // r10
  float v9; // s18
  int v10; // r4
  float v11; // s16
  int v12; // r8
  float v13; // s14
  int v14; // r5
  float *v15; // r8
  float v16; // s15
  char *v17; // r1
  int v18; // r3
  float v19; // s14
  float *v20; // r2
  bool v21; // fnf
  int v22; // [sp+4h] [bp-BCh]
  int v23; // [sp+Ch] [bp-B4h]
  int v24; // [sp+10h] [bp-B0h]
  int v25; // [sp+14h] [bp-ACh]
  int v26; // [sp+18h] [bp-A8h]
  char v27; // [sp+1Ch] [bp-A4h]
  int v28; // [sp+20h] [bp-A0h]
  float v29; // [sp+38h] [bp-88h]
  int v30; // [sp+3Ch] [bp-84h]
  signed int v31; // [sp+40h] [bp-80h]
  signed int v32; // [sp+44h] [bp-7Ch]
  signed int v33; // [sp+48h] [bp-78h]
  float v34; // [sp+4Ch] [bp-74h]
  char v35; // [sp+78h] [bp-48h]

  v5 = a3;
  v22 = a4;
  v6 = a2;
  v7 = a1 + 421888;
  ncnn::Mat::channel((int)&v29, a2, 0);
  v8 = v30;
  ncnn::Mat::release((ncnn::Mat *)&v29);
  memset(&v29, 0, 0x50u);
  v9 = *(float *)(v7 + 856);
  v10 = 0;
  v11 = 1.0 / v4;
  while ( v10 < *(_DWORD *)(v6 + 16) )
  {
    v12 = 4 * *(_DWORD *)(v6 + 12) * v10;
    v13 = (float)((float)(16 * v10 + 1) * v11) + 0.5;
    v31 = (signed int)v13;
    v33 = (signed int)v13;
    ncnn::Mat::channel((int)&v27, v5, 0);
    v23 = v28 + v12;
    ncnn::Mat::release((ncnn::Mat *)&v27);
    ncnn::Mat::channel((int)&v27, v5, 1);
    v24 = v28 + v12;
    ncnn::Mat::release((ncnn::Mat *)&v27);
    ncnn::Mat::channel((int)&v27, v5, 2);
    v25 = v28 + v12;
    ncnn::Mat::release((ncnn::Mat *)&v27);
    ncnn::Mat::channel((int)&v27, v5, 3);
    v14 = 0;
    v26 = v28 + v12;
    v15 = (float *)v8;
    ncnn::Mat::release((ncnn::Mat *)&v27);
    while ( 1 )
    {
      v8 = (int)v15;
      if ( v14 >= *(_DWORD *)(v6 + 12) )
        break;
      v16 = *v15;
      ++v15;
      if ( v9 < v16 )
      {
        v17 = &v35;
        v29 = v16;
        v18 = 0;
        v19 = (float)((float)(16 * v14 + 1) * v11) + 0.5;
        v30 = (signed int)v19;
        v32 = (signed int)v19;
        v34 = 0.0;
        while ( 1 )
        {
          v20 = (float *)(*(&v23 + v18) + 4 * v14);
          v21 = *v20 < 0.0;
          *(float *)v17 = *v20;
          v17 += 4;
          if ( v21 )
            break;
          if ( ++v18 == 4 )
          {
            std::vector<Bbox,std::allocator<Bbox>>::push_back(v22, &v29);
            break;
          }
        }
      }
      ++v14;
    }
    ++v10;
  }
}

//----- (000016B0) --------------------------------------------------------
void __fastcall FDNET::generateBbox(int a1, int a2, int a3, int a4)
{
  float v4; // s0
  int v5; // r7
  int v6; // r9
  int v7; // r4
  int v8; // r5
  float v9; // s19
  float v10; // s16
  int v11; // r6
  float *v12; // r10
  int i; // r6
  float v14; // s15
  char *v15; // r1
  int v16; // r3
  int v17; // r2
  int v18; // [sp+4h] [bp-C4h]
  int v19; // [sp+8h] [bp-C0h]
  int v20; // [sp+Ch] [bp-BCh]
  int v21; // [sp+14h] [bp-B4h]
  int v22; // [sp+18h] [bp-B0h]
  int v23; // [sp+1Ch] [bp-ACh]
  int v24; // [sp+20h] [bp-A8h]
  char v25; // [sp+24h] [bp-A4h]
  int v26; // [sp+28h] [bp-A0h]
  float v27; // [sp+40h] [bp-88h]
  int v28; // [sp+44h] [bp-84h]
  signed int v29; // [sp+48h] [bp-80h]
  signed int v30; // [sp+4Ch] [bp-7Ch]
  signed int v31; // [sp+50h] [bp-78h]
  float v32; // [sp+54h] [bp-74h]
  char v33; // [sp+80h] [bp-48h]

  v5 = a3;
  v20 = a4;
  v6 = a2;
  v7 = a1 + 421888;
  ncnn::Mat::channel((int)&v27, a2, 1);
  v8 = 0;
  v18 = v28;
  ncnn::Mat::release((ncnn::Mat *)&v27);
  memset(&v27, 0, 0x50u);
  v9 = *(float *)(v7 + 840);
  v10 = 1.0 / v4;
  while ( v8 < *(_DWORD *)(v6 + 16) )
  {
    v11 = 4 * *(_DWORD *)(v6 + 12) * v8;
    v29 = (signed int)(float)((float)((float)(2 * v8 + 1) * v10) + 0.5);
    v31 = (signed int)(float)((float)((float)(2 * v8 + 13) * v10) + 0.5);
    v19 = v31 - v29;
    ncnn::Mat::channel((int)&v25, v5, 0);
    v21 = v26 + v11;
    ncnn::Mat::release((ncnn::Mat *)&v25);
    ncnn::Mat::channel((int)&v25, v5, 1);
    v22 = v26 + v11;
    ncnn::Mat::release((ncnn::Mat *)&v25);
    ncnn::Mat::channel((int)&v25, v5, 2);
    v23 = v26 + v11;
    ncnn::Mat::release((ncnn::Mat *)&v25);
    ncnn::Mat::channel((int)&v25, v5, 3);
    v24 = v26 + v11;
    ncnn::Mat::release((ncnn::Mat *)&v25);
    v12 = (float *)v18;
    for ( i = 0; ; ++i )
    {
      v18 = (int)v12;
      if ( i >= *(_DWORD *)(v6 + 12) )
        break;
      v14 = *v12;
      ++v12;
      if ( v9 < v14 )
      {
        v27 = v14;
        v28 = (signed int)(float)((float)((float)(2 * i + 1) * v10) + 0.5);
        v30 = (signed int)(float)((float)((float)(2 * i + 13) * v10) + 0.5);
        v15 = &v33;
        v16 = 0;
        v32 = (float)(v19 * (v30 - v28));
        do
        {
          v17 = *(&v21 + v16++);
          *(_DWORD *)v15 = *(_DWORD *)(v17 + 4 * i);
          v15 += 4;
        }
        while ( v16 != 4 );
        std::vector<Bbox,std::allocator<Bbox>>::push_back(v20, &v27);
      }
    }
    ++v8;
  }
}

//----- (00001904) --------------------------------------------------------
void __fastcall FDNET::NNA_FD2(FDNET *this)
{
  int v1; // r12
  int v2; // r1
  char *v3; // r2
  FDNET *v4; // r6
  unsigned int v5; // r7
  int v6; // r3
  int *v7; // r4
  int v8; // lr
  int v9; // ST04_4
  int v10; // ST00_4
  int v11; // r3
  int v12; // r7
  int v13; // r1
  _DWORD *v14; // r11
  int v15; // r1
  ncnn::Mat *v16; // r10
  int v17; // r8
  float v18; // s15
  int v19; // r2
  int *v20; // [sp+10h] [bp-81E0h]
  char *v21; // [sp+18h] [bp-81D8h]
  int v22; // [sp+24h] [bp-81CCh]
  int v23; // [sp+28h] [bp-81C8h]
  int v24; // [sp+2Ch] [bp-81C4h]
  int v25; // [sp+30h] [bp-81C0h]
  int v26; // [sp+34h] [bp-81BCh]
  char *v27; // [sp+38h] [bp-81B8h]
  int v28; // [sp+3Ch] [bp-81B4h]
  int v29; // [sp+40h] [bp-81B0h]
  int v30; // [sp+44h] [bp-81ACh]
  int v31; // [sp+48h] [bp-81A8h]
  int v32; // [sp+4Ch] [bp-81A4h]
  int v33; // [sp+50h] [bp-81A0h]
  int *v34; // [sp+54h] [bp-819Ch]
  int v35; // [sp+58h] [bp-8198h]
  int v36; // [sp+5Ch] [bp-8194h]
  int v37; // [sp+60h] [bp-8190h]
  int v38; // [sp+64h] [bp-818Ch]
  int v39; // [sp+68h] [bp-8188h]
  int v40; // [sp+6Ch] [bp-8184h]
  _DWORD *v41; // [sp+70h] [bp-8180h]
  int v42; // [sp+88h] [bp-8168h]
  int v43; // [sp+A8h] [bp-8148h]
  char v44; // [sp+C8h] [bp-8128h]
  float v45; // [sp+D8h] [bp-8118h]
  int v46; // [sp+148h] [bp-80A8h]
  char v47; // [sp+1C8h] [bp-8028h]

  v1 = *(_DWORD *)this;
  v2 = *((_DWORD *)this + 1);
  v21 = (char *)this + 12;
  v3 = &v47;
  v4 = this;
  *((_DWORD *)this + 4) = *((_DWORD *)this + 3);
  v5 = *((_DWORD *)this + 105662);
  v6 = v1;
  v7 = (int *)(*((unsigned __int64 *)this + 52832) + 0x80000);
  while ( 1 )
  {
    v3 += 16;
    if ( v2 == v6 )
      break;
    v8 = *(_DWORD *)(v6 + 4);
    v6 += 80;
    *((_DWORD *)v3 - 4) = v8;
    *((_DWORD *)v3 - 3) = *(_DWORD *)(v6 - 72);
    *((_DWORD *)v3 - 2) = *(_DWORD *)(v6 - 68);
    *((_DWORD *)v3 - 1) = *(_DWORD *)(v6 - 64);
  }
  v9 = *((_DWORD *)this + 11);
  v10 = *((_DWORD *)this + 10);
  v11 = *((_DWORD *)this + 9);
  nna_resize(v5, 24);
  nna_fd2(v5 + 0x80000, v5, -858993459 * ((*((_DWORD *)v4 + 1) - *(_DWORD *)v4) >> 4));
  v20 = v7;
  v12 = *(_DWORD *)v4 + 64;
  while ( *((_DWORD *)v4 + 1) != v12 - 64 )
  {
    v13 = v20[1];
    v14 = (_DWORD *)((char *)v4 + 421888);
    v22 = *v20;
    v23 = v13;
    v15 = v20[3];
    v24 = v20[2];
    v25 = v15;
    nna_data_to_mat(&v42, &v22, 1, 1, 2);
    nna_data_to_mat(&v43, &v24, 1, 1, 4);
    v16 = (ncnn::Mat *)&v46;
    i8_to_float(&v44, &v42, 1, *((_DWORD *)v4 + 105671), 8);
    v17 = 0;
    i8_to_float(&v46, &v43, 1, *((_DWORD *)v4 + 105672), 32);
    nna_m_softmax(&v44, 1);
    v18 = *((float *)v4 + 105683);
    v32 = 4;
    v34 = &v46;
    v38 = 4;
    v39 = 4;
    v26 = 3;
    v27 = &v44;
    v28 = 0;
    v29 = 1;
    if ( v45 > v18 )
      v14 = (_DWORD *)v12;
    v30 = 1;
    if ( v45 > v18 )
      v16 = (ncnn::Mat *)&v40;
    v31 = 2;
    v33 = 3;
    v35 = 0;
    v36 = 1;
    v37 = 1;
    if ( v45 > v18 )
    {
      do
      {
        v19 = v17++;
        ncnn::Mat::channel((int)&v40, (int)&v33, v19);
        *v14 = *v41;
        ++v14;
        ncnn::Mat::release(v16);
      }
      while ( v17 != 4 );
      *(float *)(v12 - 44) = (float)((*(_DWORD *)(v12 - 48) - *(_DWORD *)(v12 - 56))
                                   * (*(_DWORD *)(v12 - 52) - *(_DWORD *)(v12 - 60)));
      ncnn::Mat::channel((int)&v40, (int)&v26, 1);
      *(_DWORD *)(v12 - 64) = *v41;
      ncnn::Mat::release(v16);
      std::vector<Bbox,std::allocator<Bbox>>::push_back((int)v21, (const void *)(v12 - 64));
    }
    v12 += 80;
    ncnn::Mat::release((ncnn::Mat *)&v33);
    ncnn::Mat::release((ncnn::Mat *)&v26);
    v20 += 4;
  }
}
// 3AEC: using guessed type int __fastcall nna_resize(_DWORD, _DWORD);
// 3AF4: using guessed type int __fastcall nna_data_to_mat(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AF8: using guessed type int __fastcall i8_to_float(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AFC: using guessed type int __fastcall nna_m_softmax(_DWORD, _DWORD);

//----- (00001C40) --------------------------------------------------------
void __fastcall FDNET::NNA_FD3(FDNET *this)
{
  int v1; // r12
  int v2; // r1
  char *v3; // r2
  FDNET *v4; // r6
  unsigned int v5; // r7
  int v6; // r3
  int v7; // r4
  int v8; // lr
  int v9; // ST04_4
  int v10; // ST00_4
  int v11; // r3
  int v12; // r5
  int v13; // r1
  int v14; // r1
  int v15; // r1
  float v16; // s16
  float v17; // s17
  int v18; // r10
  int *v19; // r11
  int v20; // r2
  float *v21; // r11
  int v22; // r7
  signed int v23; // s16
  float v24; // s17
  signed int v25; // s16
  int v26; // r2
  float v27; // s17
  int *v28; // [sp+14h] [bp-42FCh]
  char *v29; // [sp+28h] [bp-42E8h]
  int v30; // [sp+30h] [bp-42E0h]
  int v31; // [sp+34h] [bp-42DCh]
  int v32; // [sp+38h] [bp-42D8h]
  int v33; // [sp+3Ch] [bp-42D4h]
  int v34; // [sp+40h] [bp-42D0h]
  int v35; // [sp+44h] [bp-42CCh]
  int v36; // [sp+50h] [bp-42C0h]
  int *v37; // [sp+54h] [bp-42BCh]
  int v38; // [sp+58h] [bp-42B8h]
  int v39; // [sp+5Ch] [bp-42B4h]
  int v40; // [sp+60h] [bp-42B0h]
  int v41; // [sp+64h] [bp-42ACh]
  int v42; // [sp+68h] [bp-42A8h]
  int v43; // [sp+6Ch] [bp-42A4h]
  int *v44; // [sp+70h] [bp-42A0h]
  int v45; // [sp+74h] [bp-429Ch]
  int v46; // [sp+78h] [bp-4298h]
  int v47; // [sp+7Ch] [bp-4294h]
  int v48; // [sp+80h] [bp-4290h]
  int v49; // [sp+84h] [bp-428Ch]
  int v50; // [sp+88h] [bp-4288h]
  int *v51; // [sp+8Ch] [bp-4284h]
  int v52; // [sp+90h] [bp-4280h]
  int v53; // [sp+94h] [bp-427Ch]
  int v54; // [sp+98h] [bp-4278h]
  int v55; // [sp+9Ch] [bp-4274h]
  int v56; // [sp+A0h] [bp-4270h]
  int v57; // [sp+A4h] [bp-426Ch]
  int *v58; // [sp+A8h] [bp-4268h]
  int v59; // [sp+ACh] [bp-4264h]
  int v60; // [sp+B0h] [bp-4260h]
  int v61; // [sp+B4h] [bp-425Ch]
  int v62; // [sp+B8h] [bp-4258h]
  int v63; // [sp+BCh] [bp-4254h]
  int v64; // [sp+C0h] [bp-4250h]
  char v65; // [sp+E0h] [bp-4230h]
  int v66; // [sp+100h] [bp-4210h]
  int v67; // [sp+140h] [bp-41D0h]
  float v68; // [sp+150h] [bp-41C0h]
  int v69; // [sp+1C0h] [bp-4150h]
  int v70; // [sp+240h] [bp-40D0h]
  char v71; // [sp+2E0h] [bp-4030h]

  v1 = *((_DWORD *)this + 3);
  v2 = *((_DWORD *)this + 4);
  v3 = &v71;
  v4 = this;
  v29 = (char *)this + 24;
  *((_DWORD *)this + 7) = *((_DWORD *)this + 6);
  v5 = *((_DWORD *)this + 105662);
  v6 = v1;
  v7 = *((unsigned __int64 *)this + 52832) + 0x80000;
  while ( 1 )
  {
    v3 += 16;
    if ( v2 == v6 )
      break;
    v8 = *(_DWORD *)(v6 + 4);
    v6 += 80;
    *((_DWORD *)v3 - 4) = v8;
    *((_DWORD *)v3 - 3) = *(_DWORD *)(v6 - 72);
    *((_DWORD *)v3 - 2) = *(_DWORD *)(v6 - 68);
    *((_DWORD *)v3 - 1) = *(_DWORD *)(v6 - 64);
  }
  v9 = *((_DWORD *)this + 11);
  v10 = *((_DWORD *)this + 10);
  v11 = *((_DWORD *)this + 9);
  nna_resize(v5, 48);
  nna_fd3(v5 + 0x80000, v5, -858993459 * ((*((_DWORD *)v4 + 4) - *((_DWORD *)v4 + 3)) >> 4));
  v28 = (int *)(v7 + 16);
  v12 = *((_DWORD *)v4 + 3) + 24;
  while ( *((_DWORD *)v4 + 4) != v12 - 24 )
  {
    v13 = *(v28 - 3);
    v30 = *(v28 - 4);
    v31 = v13;
    v14 = *(v28 - 1);
    v32 = *(v28 - 2);
    v33 = v14;
    v15 = v28[1];
    v34 = *v28;
    v35 = v15;
    nna_data_to_mat(&v64, &v30, 1, 1, 2);
    nna_data_to_mat(&v65, &v32, 1, 1, 4);
    nna_data_to_mat(&v66, &v34, 1, 1, 10);
    i8_to_float(&v67, &v64, 1, *((_DWORD *)v4 + 105673), 8);
    i8_to_float(&v69, &v65, 1, *((_DWORD *)v4 + 105674), 32);
    i8_to_float(&v70, &v66, 1, *((_DWORD *)v4 + 105675), 40);
    nna_m_softmax(&v67, 1);
    v16 = *((float *)v4 + 105684);
    v36 = 3;
    v43 = 3;
    v50 = 3;
    v55 = 10;
    v57 = 2;
    v41 = 2;
    v17 = v68;
    v37 = &v67;
    v18 = 0;
    v42 = 4;
    v48 = 4;
    v49 = 4;
    v51 = &v70;
    v56 = 4;
    v38 = 0;
    v39 = 1;
    v40 = 1;
    v44 = &v69;
    v45 = 0;
    v46 = 1;
    v47 = 1;
    v52 = 0;
    v53 = 1;
    v54 = 1;
    v58 = (int *)&v68;
    v59 = 0;
    v60 = 1;
    v61 = 1;
    v62 = 1;
    v63 = 1;
    ncnn::Mat::release((ncnn::Mat *)&v57);
    if ( v17 > v16 )
    {
      v19 = (int *)(v12 + 40);
      do
      {
        v20 = v18++;
        ncnn::Mat::channel((int)&v57, (int)&v43, v20);
        *v19 = *v58;
        ++v19;
        ncnn::Mat::release((ncnn::Mat *)&v57);
      }
      while ( v18 != 4 );
      v21 = (float *)v12;
      v22 = 0;
      *(float *)(v12 - 4) = (float)((*(_DWORD *)(v12 - 8) - *(_DWORD *)(v12 - 16))
                                  * (*(_DWORD *)(v12 - 12) - *(_DWORD *)(v12 - 20)));
      ncnn::Mat::channel((int)&v57, (int)&v36, 1);
      *(_DWORD *)(v12 - 24) = *v58;
      ncnn::Mat::release((ncnn::Mat *)&v57);
      do
      {
        v23 = *(_DWORD *)(v12 - 20);
        v24 = (float)(*(_DWORD *)(v12 - 12) - *(_DWORD *)(v12 - 20));
        ncnn::Mat::channel((int)&v57, (int)&v50, v22);
        *v21 = (float)v23 + (float)(v24 * *(float *)v58);
        ++v21;
        ncnn::Mat::release((ncnn::Mat *)&v57);
        v25 = *(_DWORD *)(v12 - 16);
        v26 = v22++ + 5;
        v27 = (float)(*(_DWORD *)(v12 - 8) - *(_DWORD *)(v12 - 16));
        ncnn::Mat::channel((int)&v57, (int)&v50, v26);
        v21[4] = (float)v25 + (float)(v27 * *(float *)v58);
        ncnn::Mat::release((ncnn::Mat *)&v57);
      }
      while ( v22 != 5 );
      std::vector<Bbox,std::allocator<Bbox>>::push_back((int)v29, (const void *)(v12 - 24));
    }
    v12 += 80;
    ncnn::Mat::release((ncnn::Mat *)&v36);
    ncnn::Mat::release((ncnn::Mat *)&v43);
    ncnn::Mat::release((ncnn::Mat *)&v50);
    ncnn::Mat::release((ncnn::Mat *)&v50);
    ncnn::Mat::release((ncnn::Mat *)&v43);
    ncnn::Mat::release((ncnn::Mat *)&v36);
    v28 += 8;
  }
}
// 3AEC: using guessed type int __fastcall nna_resize(_DWORD, _DWORD);
// 3AF4: using guessed type int __fastcall nna_data_to_mat(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AF8: using guessed type int __fastcall i8_to_float(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AFC: using guessed type int __fastcall nna_m_softmax(_DWORD, _DWORD);

//----- (00002134) --------------------------------------------------------
void __fastcall FDNET::NNA_HD_RUN_IMG_MINI(int a1, unsigned int a2, int a3, int a4, int a5)
{
  int v5; // r4
  unsigned int v6; // r8
  int v7; // r12
  __int64 v8; // r6
  int v9; // r7
  __int64 *v10; // r6
  int v11; // r0
  int v12; // r8
  __int64 v13; // t1
  float v14; // [sp+18h] [bp-78h]
  int v15; // [sp+1Ch] [bp-74h]
  unsigned int v16; // [sp+20h] [bp-70h]
  int v17; // [sp+24h] [bp-6Ch]
  int v18; // [sp+28h] [bp-68h]

  v5 = a1 + 421888;
  v6 = *(_DWORD *)(a1 + 422648);
  *(_DWORD *)(a1 + 40) = a3;
  *(_DWORD *)(a1 + 44) = a4;
  v7 = *(_DWORD *)a5;
  *(_DWORD *)(a1 + 36) = a2;
  *(_DWORD *)(a5 + 4) = v7;
  v8 = *(_QWORD *)(a1 + 422656);
  v9 = 0;
  v10 = (__int64 *)(v8 + 0x80000);
  v11 = nna_resize_once(v6, 192, 108, a2, a3, a4, 0, 0, a3 - 1, a4 - 1);
  nna_reset(v11);
  v12 = nna_hd_mini(
          v6 + 0x80000,
          v6,
          v6 + 526336,
          v6 + 559104,
          (signed int)(float)(*(float *)(v5 + 856) * 100.0),
          (signed int)(float)(*(float *)(v5 + 860) * 10.0));
  memset(&v14, 0, 0x50u);
  while ( v9 < v12 )
  {
    v13 = *v10;
    ++v10;
    ++v9;
    v15 = WORD1(v13) & 0xFFF;
    v17 = (HIDWORD(v13) >> 8) & 0xFFF;
    v16 = (((unsigned int)v13 >> 28) | (unsigned __int16)(16 * WORD2(v13))) & 0xFFF;
    v18 = HIDWORD(v13) >> 20;
    v14 = (float)(unsigned __int16)v13 / 100.0;
    std::vector<Bbox,std::allocator<Bbox>>::push_back(a5, &v14);
  }
}
// 3B10: using guessed type int __fastcall nna_reset(_DWORD);

//----- (0000228C) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_default_append(char **a1, unsigned int a2)
{
  int v2; // r5
  char **v3; // r4
  signed int v4; // r0
  signed int v5; // r6
  char *v6; // r0
  char *v7; // r7
  int v8; // r0
  int v9; // r5

  v2 = a2;
  if ( a2 )
  {
    v3 = a1;
    if ( a2 > -858993459 * ((a1[2] - a1[1]) >> 4) )
    {
      v4 = std::vector<Bbox,std::allocator<Bbox>>::_M_check_len(a1, a2, "vector::_M_default_append");
      v5 = v4;
      v6 = (char *)std::_Vector_base<Bbox,std::allocator<Bbox>>::_M_allocate(v4);
      v7 = v6;
      v8 = std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(*v3, (int)v3[1], v6);
      v9 = std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>(v8, v2);
      if ( *v3 )
        operator delete(*v3);
      *v3 = v7;
      v3[1] = (char *)v9;
      v3[2] = &v7[80 * v5];
    }
    else
    {
      a1[1] = (char *)std::__uninitialized_default_n_1<true>::__uninit_default_n<Bbox *,unsigned int>((int)a1[1], a2);
    }
  }
}

//----- (00002338) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::resize(int a1, unsigned int a2)
{
  unsigned int v2; // r3

  v2 = -858993459 * ((*(_DWORD *)(a1 + 4) - *(_DWORD *)a1) >> 4);
  if ( a2 <= v2 )
  {
    if ( a2 < v2 )
      *(_DWORD *)(a1 + 4) = *(_DWORD *)a1 + 80 * a2;
  }
  else
  {
    std::vector<Bbox,std::allocator<Bbox>>::_M_default_append((char **)a1, a2 - v2);
  }
}

//----- (00002388) --------------------------------------------------------
char **__fastcall std::vector<Bbox,std::allocator<Bbox>>::operator=(char **a1, char **a2)
{
  char **v2; // r4
  char *v3; // r6
  int v4; // r8
  char *v5; // r2
  char **v6; // r5
  int v7; // r7
  unsigned int v8; // r0
  unsigned int v9; // r5
  int v11; // r1
  int v12; // r1
  char *v13; // r0

  v2 = a1;
  if ( a2 != a1 )
  {
    v3 = *a2;
    v4 = (int)a2[1];
    v5 = *a1;
    v6 = a2;
    v7 = v4 - (_DWORD)*a2;
    v8 = -858993459 * (v7 >> 4);
    if ( -858993459 * ((v2[2] - *v2) >> 4) >= v8 )
    {
      v11 = v2[1] - v5;
      if ( v8 > -858993459 * (v11 >> 4) )
      {
        std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v3, (int)&v3[v11], v5);
        v5 = v2[1];
        v12 = (int)v6[1];
        v13 = &(*v6)[v5 - *v2];
      }
      else
      {
        v12 = v4;
        v13 = v3;
      }
      std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v13, v12, v5);
    }
    else
    {
      if ( v8 )
      {
        if ( v8 > 0x3333333 )
          std::__throw_bad_alloc();
        v8 = operator new(v4 - (_DWORD)*a2);
      }
      v9 = v8;
      std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v3, v4, (char *)v8);
      if ( *v2 )
        operator delete(*v2);
      *v2 = (char *)v9;
      v2[2] = (char *)(v9 + v7);
    }
    v2[1] = &(*v2)[v7];
  }
  return v2;
}

//----- (0000248C) --------------------------------------------------------
void **__fastcall FDNET::NNA_nms(void **result, char **a2, int a3)
{
  float v3; // s0
  int v4; // r0
  int v5; // r10
  char **v6; // r4
  unsigned int v7; // r11
  int v8; // r9
  int i; // r6
  int v10; // r3
  char *v11; // r6
  __int64 *v12; // r0
  int v13; // r0
  unsigned int v14; // r8
  __int64 *v15; // r7
  int v16; // r3
  int v17; // r3
  int v18; // r0
  signed int v19; // r7
  signed int j; // r6
  int v21; // r2
  __int64 dest; // [sp+8h] [bp-8080h]
  signed __int64 src; // [sp+18h] [bp-8070h]
  int v24; // [sp+28h] [bp-8060h]
  int v25; // [sp+2Ch] [bp-805Ch]
  int v26; // [sp+30h] [bp-8058h]
  int v27; // [sp+34h] [bp-8054h]
  int v28; // [sp+38h] [bp-8050h]
  int v29; // [sp+3Ch] [bp-804Ch]
  int v30; // [sp+40h] [bp-8048h]
  __int64 v31; // [sp+44h] [bp-8044h]
  __int64 *v32; // [sp+4Ch] [bp-803Ch]
  __int64 *v33; // [sp+50h] [bp-8038h]
  int v34; // [sp+54h] [bp-8034h]
  char v35; // [sp+58h] [bp-8030h]
  int v36; // [sp+4058h] [bp-4030h]
  int v37; // [sp+405Ch] [bp-402Ch]

  if ( a2[1] != *a2 )
  {
    v4 = (int)(result + 105472);
    v5 = a3;
    v6 = a2;
    v7 = *(_DWORD *)(v4 + 760);
    dest = *(_QWORD *)(v4 + 768);
    src = *(_QWORD *)(v4 + 768) + 0x80000LL;
    nna_reset(v4);
    std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(
      *v6,
      v6[1],
      (int (__fastcall *)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))cmpScore);
    v24 = 0;
    v31 = 0LL;
    v25 = 0;
    v32 = &v31;
    v33 = &v31;
    v26 = 0;
    v34 = 0;
    v8 = -858993459 * ((v6[1] - *v6) >> 4);
    std::vector<int,std::allocator<int>>::resize((int)&v24, -858993459 * ((v6[1] - *v6) >> 4));
    for ( i = 0; v8 > i; ++i )
    {
      v10 = *(_DWORD *)&(*v6)[80 * i];
      v37 = i;
      v36 = v10;
      std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(
        (int)&v30,
        (float *)&v36);
    }
    v11 = &v35;
    v12 = &v31;
    while ( v32 != v12 )
    {
      v13 = std::_Rb_tree_decrement(v12);
      v14 = *(_DWORD *)(v13 + 20);
      v15 = (__int64 *)v13;
      *(_WORD *)v11 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at((int *)v6, v14) + 4) & 0xFFF;
      *((_WORD *)v11 + 1) = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at((int *)v6, v14) + 8) & 0xFFF;
      *((_WORD *)v11 + 2) = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at((int *)v6, v14) + 12) & 0xFFF;
      v16 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at((int *)v6, v14) + 16);
      v11 += 8;
      v12 = v15;
      *((_WORD *)v11 - 1) = v16 & 0xFFF;
    }
    memcpy((void *)dest, &v35, 8 * v8);
    v17 = std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(v5, "Union");
    if ( v17 )
      v17 = std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(v5, "Min") == 0;
    v18 = nna_nms(v7 + 0x80000, v7, v8, v17, (signed int)(float)(v3 * 100.0));
    v19 = v18;
    if ( v18 > v8 )
      printf("\n!!! out_box_num:%d > num_boxes:%d ", v18, v8);
    memcpy(&v36, (const void *)src, 8 * v19);
    v27 = 0;
    v28 = 0;
    v29 = 0;
    std::vector<Bbox,std::allocator<Bbox>>::resize((int)&v27, v19);
    for ( j = 0; j < v19; ++j )
    {
      v21 = *((unsigned __int16 *)&v36 + j);
      if ( v21 < v8 )
        memcpy((void *)(v27 + 80 * j), &(*v6)[80 * (v8 - v21 - 1)], 0x50u);
      else
        printf("\n# !!! ERROR NMS  index_buf[%d]:%d value out Max:%d", j);
    }
    std::vector<Bbox,std::allocator<Bbox>>::operator=(v6, (char **)&v27);
    std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v27);
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree((int)&v30);
    result = std::_Vector_base<int,std::allocator<int>>::~_Vector_base((void **)&v24);
  }
  return result;
}
// 3B10: using guessed type int __fastcall nna_reset(_DWORD);
// 3B18: using guessed type int __fastcall std::_Rb_tree_decrement(_DWORD);
// 3B1C: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(_DWORD, _DWORD);

//----- (000027FC) --------------------------------------------------------
char *__fastcall FDNET::nms(int a1, int a2, int a3)
{
  float v3; // s0
  int *v4; // r4
  char *result; // r0
  char *v6; // r1
  int v7; // r3
  int v8; // r6
  int i; // r5
  int v10; // r3
  unsigned int v11; // r8
  unsigned int v12; // r5
  int v13; // r6
  unsigned int v14; // r7
  int v15; // r11
  int v16; // r0
  signed int v17; // r3
  float v18; // s18
  int v19; // r11
  int v20; // r0
  signed int v21; // r3
  float v22; // s17
  int v23; // r11
  signed int v24; // r3
  float v25; // s16
  int v26; // r11
  signed int v27; // r3
  float v28; // s16
  float v29; // s16
  float v30; // s15
  float v31; // s16
  float v32; // s17
  int v33; // r7
  int v34; // r0
  void *v35; // r0
  float v36; // s17
  unsigned int v37; // r1
  int v38; // r5
  void *v39; // r0
  const void *v40; // r1
  int v41; // [sp+0h] [bp-80h]
  int v42; // [sp+8h] [bp-78h]
  int v43; // [sp+Ch] [bp-74h]
  int v44; // [sp+10h] [bp-70h]
  int v45; // [sp+14h] [bp-6Ch]
  int v46; // [sp+18h] [bp-68h]
  int v47; // [sp+1Ch] [bp-64h]
  char v48; // [sp+20h] [bp-60h]
  __int64 v49; // [sp+24h] [bp-5Ch]
  __int64 *v50; // [sp+2Ch] [bp-54h]
  __int64 *v51; // [sp+30h] [bp-50h]
  int v52; // [sp+34h] [bp-4Ch]

  v4 = (int *)a2;
  result = *(char **)a2;
  v6 = *(char **)(a2 + 4);
  if ( v6 != result )
  {
    v41 = a3;
    std::sort<__gnu_cxx::__normal_iterator<Bbox *,std::vector<Bbox,std::allocator<Bbox>>>,bool (*)(Bbox,Bbox)>(
      result,
      v6,
      (int (__fastcall *)(_DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int))cmpScore);
    v42 = 0;
    v43 = 0;
    v44 = 0;
    v52 = 0;
    v7 = (v4[1] - *v4) >> 4;
    v49 = 0LL;
    v8 = -858993459 * v7;
    v50 = &v49;
    v51 = &v49;
    std::vector<int,std::allocator<int>>::resize((int)&v42, -858993459 * v7);
    for ( i = 0; v8 > i; ++i )
    {
      v10 = *(_DWORD *)(*v4 + 80 * i);
      v46 = i;
      v45 = v10;
      std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::_M_insert_equal<std::pair<float,int>>(
        (int)&v48,
        (float *)&v45);
    }
    v11 = 0;
    while ( v52 )
    {
      v12 = *(_DWORD *)(std::_Rb_tree_decrement(&v49) + 20);
      v13 = (int)v50;
      *(_DWORD *)(v42 + 4 * v11++) = v12;
      while ( (__int64 *)v13 != &v49 )
      {
        v14 = *(_DWORD *)(v13 + 20);
        v15 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, *(_DWORD *)(v13 + 20));
        v16 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12);
        v17 = *(_DWORD *)(v15 + 4);
        if ( v17 < *(_DWORD *)(v16 + 4) )
          v17 = *(_DWORD *)(v16 + 4);
        v18 = (float)v17;
        v19 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, v14);
        v20 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12);
        v21 = *(_DWORD *)(v19 + 8);
        if ( v21 < *(_DWORD *)(v20 + 8) )
          v21 = *(_DWORD *)(v20 + 8);
        v22 = (float)v21;
        v23 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, v14);
        v24 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12) + 12);
        if ( v24 >= *(_DWORD *)(v23 + 12) )
          v24 = *(_DWORD *)(v23 + 12);
        v25 = (float)v24;
        v26 = std::vector<Bbox,std::allocator<Bbox>>::at(v4, v14);
        v27 = *(_DWORD *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12) + 16);
        v28 = v25 - v18;
        if ( v27 >= *(_DWORD *)(v26 + 16) )
          v27 = *(_DWORD *)(v26 + 16);
        v29 = v28 + 1.0;
        v30 = (float)((float)v27 - v22) + 1.0;
        if ( v29 <= 0.0 )
          v29 = 0.0;
        if ( v30 <= 0.0 )
          v30 = 0.0;
        v31 = v29 * v30;
        if ( std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(v41, "Union") )
        {
          if ( !std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(v41, "Min") )
          {
            v36 = *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v14) + 20);
            if ( v36 >= *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12) + 20) )
              v37 = v12;
            else
              v37 = v14;
            v31 = v31 / *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v37) + 20);
          }
        }
        else
        {
          v32 = *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v14) + 20);
          v31 = v31 / (float)((float)(v32 + *(float *)(std::vector<Bbox,std::allocator<Bbox>>::at(v4, v12) + 20)) - v31);
        }
        if ( v31 <= v3 )
        {
          v13 = std::_Rb_tree_increment(v13);
        }
        else
        {
          v33 = std::_Rb_tree_increment(v13);
          v34 = v13;
          v13 = v33;
          v35 = (void *)std::_Rb_tree_rebalance_for_erase(v34, &v49);
          operator delete(v35);
          --v52;
        }
      }
    }
    std::vector<int,std::allocator<int>>::resize((int)&v42, v11);
    v45 = 0;
    v46 = 0;
    v47 = 0;
    std::vector<Bbox,std::allocator<Bbox>>::resize((int)&v45, v11);
    v38 = 0;
    while ( v11 != v38 )
    {
      v39 = (void *)(v45 + 80 * v38);
      v40 = (const void *)(*v4 + 80 * *(_DWORD *)(v42 + 4 * v38++));
      memcpy(v39, v40, 0x50u);
    }
    std::vector<Bbox,std::allocator<Bbox>>::operator=((char **)v4, (char **)&v45);
    std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v45);
    std::_Rb_tree<float,std::pair<float const,int>,std::_Select1st<std::pair<float const,int>>,std::less<float>,std::allocator<std::pair<float const,int>>>::~_Rb_tree((int)&v48);
    result = (char *)std::_Vector_base<int,std::allocator<int>>::~_Vector_base((void **)&v42);
  }
  return result;
}
// 3B18: using guessed type int __fastcall std::_Rb_tree_decrement(_DWORD);
// 3B1C: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::compare(_DWORD, _DWORD);
// 3B28: using guessed type int __fastcall std::_Rb_tree_increment(_DWORD);
// 3B2C: using guessed type int __fastcall std::_Rb_tree_rebalance_for_erase(_DWORD, _DWORD);

//----- (00002BEC) --------------------------------------------------------
void __fastcall std::vector<Bbox,std::allocator<Bbox>>::_M_range_insert<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(char **a1, void *a2, char *a3, int a4)
{
  int v4; // r9
  int v5; // r11
  char **v6; // r4
  char *v7; // r8
  char *v8; // r7
  void *v9; // r6
  unsigned int v10; // r10
  unsigned int v11; // r5
  char *v12; // r2
  int v13; // r1
  char *v14; // r11
  char *v15; // r2
  signed int v16; // r0
  signed int v17; // r5
  char *v18; // r0
  char *v19; // r8
  char *v20; // r0
  char *v21; // r0
  size_t v22; // r6
  int v23; // [sp+4h] [bp-2Ch]

  if ( (char *)a4 != a3 )
  {
    v4 = a4;
    v5 = a4 - (_DWORD)a3;
    v6 = a1;
    v7 = a1[1];
    v8 = a3;
    v9 = a2;
    v10 = -858993459 * ((a4 - (signed int)a3) >> 4);
    if ( v10 > -858993459 * ((a1[2] - v7) >> 4) )
    {
      v16 = std::vector<Bbox,std::allocator<Bbox>>::_M_check_len(a1, v10, "vector::_M_range_insert");
      v17 = v16;
      v18 = (char *)std::_Vector_base<Bbox,std::allocator<Bbox>>::_M_allocate(v16);
      v19 = v18;
      v20 = (char *)std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(*v6, (int)v9, v18);
      v21 = (char *)std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v8, v4, v20);
      v22 = std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v9, (int)v6[1], v21);
      if ( *v6 )
        operator delete(*v6);
      *v6 = v19;
      v6[1] = (char *)v22;
      v6[2] = &v19[80 * v17];
    }
    else
    {
      v23 = v7 - (_BYTE *)a2;
      v11 = -858993459 * ((v7 - (_BYTE *)a2) >> 4);
      if ( v10 >= v11 )
      {
        v14 = &a3[v7 - (_BYTE *)a2];
        std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v14, a4, v7);
        v15 = &v6[1][80 * (v10 - v11)];
        v6[1] = v15;
        std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v9, (int)v7, v15);
        v13 = (int)v14;
        v12 = (char *)v9;
        v6[1] += v23;
      }
      else
      {
        std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(&v7[-v5], (int)v7, v7);
        v6[1] += v5;
        std::__copy_move_backward<true,true,std::random_access_iterator_tag>::__copy_move_b<Bbox>(
          v9,
          (int)&v7[-v5],
          (int)v7);
        v12 = (char *)v9;
        v13 = v4;
      }
      std::__copy_move<true,true,std::random_access_iterator_tag>::__copy_m<Bbox>(v8, v13, v12);
    }
  }
}

//----- (00002D78) --------------------------------------------------------
void **__fastcall FDNET::NNA_HD_IMG(FDNET *this)
{
  char *v1; // r8
  int v2; // r9
  unsigned int v3; // r11
  FDNET *v4; // r5
  int v5; // r10
  float v6; // s15
  int v7; // kr00_4
  int v8; // r7
  int v9; // r6
  bool v10; // zf
  bool v11; // zf
  size_t n; // [sp+20h] [bp-ED08h]
  char *src; // [sp+28h] [bp-ED00h]
  int v15; // [sp+30h] [bp-ECF8h]
  size_t v16; // [sp+34h] [bp-ECF4h]
  char *v17; // [sp+3Ch] [bp-ECECh]
  char *v18; // [sp+40h] [bp-ECE8h]
  int v19; // [sp+44h] [bp-ECE4h]
  int v20; // [sp+48h] [bp-ECE0h]
  int *v21; // [sp+4Ch] [bp-ECDCh]
  int v22; // [sp+50h] [bp-ECD8h]
  int v23; // [sp+54h] [bp-ECD4h]
  int v24; // [sp+58h] [bp-ECD0h]
  int v25; // [sp+5Ch] [bp-ECCCh]
  unsigned int v26; // [sp+60h] [bp-ECC8h]
  int v27; // [sp+64h] [bp-ECC4h]
  int *v28; // [sp+68h] [bp-ECC0h]
  int v29; // [sp+6Ch] [bp-ECBCh]
  int v30; // [sp+70h] [bp-ECB8h]
  int v31; // [sp+74h] [bp-ECB4h]
  int v32; // [sp+78h] [bp-ECB0h]
  unsigned int v33; // [sp+7Ch] [bp-ECACh]
  int v34; // [sp+80h] [bp-ECA8h]
  int v35; // [sp+9Ch] [bp-EC8Ch]
  int v36; // [sp+B8h] [bp-EC70h]
  int v37; // [sp+658h] [bp-E6D0h]
  int v38; // [sp+BF8h] [bp-E130h]
  int v39; // [sp+2278h] [bp-CAB0h]
  int v40; // [sp+38F8h] [bp-B430h]
  int v41; // [sp+92F8h] [bp-5A30h]

  v1 = (char *)this + 421888;
  v2 = *((_DWORD *)this + 105667);
  v3 = *((_DWORD *)this + 105662);
  v4 = this;
  *((_DWORD *)this + 1) = *(_DWORD *)this;
  v5 = *((_DWORD *)this + 105668);
  v15 = v3 + 0x80000;
  v6 = (float)*((signed int *)this + 10);
  v7 = *((_QWORD *)this + 52832);
  v17 = 0;
  v18 = 0;
  v19 = 0;
  src = (char *)(v7 + 0x80000);
  nna_net_hd_init(v2, v5, 1);
  nna_resize_once(
    v3,
    v2,
    v5,
    *((_DWORD *)v4 + 9),
    *((_DWORD *)v4 + 10),
    *((_DWORD *)v4 + 11),
    0,
    0,
    *((_DWORD *)v4 + 10) - 1,
    *((_DWORD *)v4 + 11) - 1);
  n = nna_net_hd_get_score_size();
  v16 = nna_net_hd_get_location_size();
  v8 = nna_net_hd_get_score_w();
  v9 = nna_net_hd_get_score_h();
  nna_reset(v9);
  v10 = v2 == 192;
  if ( v2 == 192 )
    v10 = v5 == 108;
  if ( v10 )
  {
    nna_hd(v15, v3);
  }
  else
  {
    v11 = v2 == 288;
    if ( v2 == 288 )
      v11 = v5 == 160;
    if ( v11 )
      nna_hd_ddr_rom(v15, v3);
    else
      printf("\n# !!! Size not supported [%d %d]", v2, v5);
  }
  memcpy(&v36, src, n);
  memcpy(&v37, &src[n], v16);
  nna_data_to_mat(&v38, &v36, v8, v9, 1);
  nna_data_to_mat(&v39, &v37, v8, v9, 4);
  i8_to_float(&v40, &v38, 1, *((_DWORD *)v1 + 204), n);
  i8_to_float(&v41, &v39, 1, *((_DWORD *)v1 + 205), v16);
  nna_m_sigmoid(&v40, v8, v9);
  v23 = v8;
  v25 = 1;
  v30 = v8;
  v20 = 3;
  v22 = 0;
  v26 = ((unsigned int)(4 * v9 * v8 + 15) >> 2) & 0x3FFFFFFC;
  v33 = ((unsigned int)(4 * v9 * v8 + 15) >> 2) & 0x3FFFFFFC;
  v27 = 3;
  v29 = 0;
  v32 = 4;
  v24 = v9;
  v31 = v9;
  v21 = &v40;
  v28 = &v41;
  ncnn::Mat::Mat(&v34, &v20);
  ncnn::Mat::Mat(&v35, &v27);
  FDNET::HDgenerateBbox((int)v4, (int)&v34, (int)&v35, (int)&v17);
  ncnn::Mat::release((ncnn::Mat *)&v35);
  ncnn::Mat::release((ncnn::Mat *)&v34);
  std::vector<Bbox,std::allocator<Bbox>>::_M_range_insert<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
    (char **)v4,
    *((void **)v4 + 1),
    v17,
    (int)v18);
  v18 = v17;
  ncnn::Mat::release((ncnn::Mat *)&v27);
  ncnn::Mat::release((ncnn::Mat *)&v20);
  return std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v17);
}
// 3AF4: using guessed type int __fastcall nna_data_to_mat(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AF8: using guessed type int __fastcall i8_to_float(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3B10: using guessed type int __fastcall nna_reset(_DWORD);
// 3B4C: using guessed type int __fastcall nna_m_sigmoid(_DWORD, _DWORD, _DWORD);

//----- (00003100) --------------------------------------------------------
void *__fastcall FDNET::NNA_HD_RUN_IMG(int *a1, int a2, int a3, int a4, int a5)
{
  int *v5; // r4
  void *result; // r0
  int v7; // s16
  char v8; // [sp+8h] [bp-30h]

  v5 = a1;
  a1[11] = a4;
  a1[10] = a3;
  a1[9] = a2;
  *(_DWORD *)(a5 + 4) = *(_DWORD *)a5;
  result = FDNET::NNA_HD_IMG((FDNET *)a1);
  if ( v5[1] == *v5 )
  {
    *(_DWORD *)(a5 + 4) = *(_DWORD *)a5;
  }
  else
  {
    FDNET::hd_refine((int)v5, v5, v5 + 11, v5 + 10, 0);
    v7 = v5[105687];
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string((int *)&v8, "Union");
    FDNET::NNA_nms((void **)v5, (char **)v5, (int)&v8);
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(&v8);
    result = std::vector<Bbox,std::allocator<Bbox>>::operator=((char **)a5, (char **)v5);
  }
  return result;
}
// 3B50: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(_DWORD);

//----- (000031E8) --------------------------------------------------------
void __fastcall FDNET::NNA_FD1(FDNET *this)
{
  signed int *v1; // r5
  FDNET *v2; // r4
  signed int v3; // r2
  signed int v4; // r3
  float v5; // s17
  signed int v6; // s15
  float v7; // s16
  signed int v8; // s15
  float v9; // s14
  float v10; // s15
  float v11; // s16
  unsigned int v12; // r11
  int v13; // r6
  float *v14; // r0
  float v15; // s17
  float v16; // s0
  float v17; // r0
  int v18; // r5
  float v19; // s16
  float v20; // s0
  int v21; // r8
  unsigned int v22; // r1
  float v23; // s17
  float *v24; // r3
  int v25; // r5
  int v26; // r7
  int v27; // r6
  int v28; // r5
  float v29; // s0
  int v30; // s16
  unsigned int v31; // [sp+18h] [bp-D8h]
  signed int v32; // [sp+1Ch] [bp-D4h]
  signed __int64 v33; // [sp+20h] [bp-D0h]
  int v34; // [sp+28h] [bp-C8h]
  float v35; // [sp+34h] [bp-BCh]
  void *v36; // [sp+38h] [bp-B8h]
  float *v37; // [sp+3Ch] [bp-B4h]
  float *v38; // [sp+40h] [bp-B0h]
  char *v39; // [sp+44h] [bp-ACh]
  char *v40; // [sp+48h] [bp-A8h]
  int v41; // [sp+4Ch] [bp-A4h]
  int v42; // [sp+50h] [bp-A0h]
  FDNET *v43; // [sp+54h] [bp-9Ch]
  int v44; // [sp+58h] [bp-98h]
  int v45; // [sp+5Ch] [bp-94h]
  int v46; // [sp+60h] [bp-90h]
  int v47; // [sp+64h] [bp-8Ch]
  unsigned int v48; // [sp+68h] [bp-88h]
  int v49; // [sp+6Ch] [bp-84h]
  FDNET *v50; // [sp+70h] [bp-80h]
  int v51; // [sp+74h] [bp-7Ch]
  int v52; // [sp+78h] [bp-78h]
  int v53; // [sp+7Ch] [bp-74h]
  int v54; // [sp+80h] [bp-70h]
  unsigned int v55; // [sp+84h] [bp-6Ch]
  char v56; // [sp+88h] [bp-68h]
  char v57; // [sp+A4h] [bp-4Ch]

  v1 = (signed int *)((char *)this + 421888);
  v2 = this;
  v31 = *((_DWORD *)this + 105662);
  v34 = v31 + 0x80000;
  v3 = *((_DWORD *)this + 10);
  v33 = *((_QWORD *)this + 52832) + 0x80000LL;
  *((_DWORD *)v2 + 1) = *(_DWORD *)v2;
  if ( v3 <= 1920 )
  {
    if ( v3 <= 768 )
    {
      if ( v3 <= 640 )
      {
        if ( v3 <= 320 )
        {
          if ( v3 <= 240 )
            v4 = 12;
          else
            v4 = 18;
        }
        else
        {
          v4 = 36;
        }
      }
      else
      {
        v4 = 40;
      }
    }
    else
    {
      v4 = 96;
    }
    *((_DWORD *)this + 105681) = v4;
  }
  v5 = *((float *)this + 105685);
  if ( v3 < *((_DWORD *)this + 11) )
    v6 = v3;
  else
    v6 = *((_DWORD *)this + 11);
  v36 = 0;
  v37 = 0;
  v7 = (float)v6;
  v8 = *((_DWORD *)this + 105661);
  v38 = 0;
  v9 = (float)v8;
  v10 = (float)*((signed int *)this + 105681);
  v11 = v7 * (float)(v9 / v10);
  v35 = v9 / v10;
  while ( v11 > (float)v1[189] )
  {
    if ( v37 == v38 )
    {
      std::vector<float,std::allocator<float>>::_M_emplace_back_aux<float const&>(&v36, &v35);
    }
    else
    {
      v24 = v37 + 1;
      if ( v37 )
        *v37 = v35;
      v37 = v24;
    }
    v11 = v11 * v5;
    v35 = v35 * v5;
  }
  v12 = 0;
  while ( v12 < ((char *)v37 - (_BYTE *)v36) >> 2 )
  {
    v13 = *((_DWORD *)v2 + 11);
    v14 = (float *)((char *)v36 + 4 * v12);
    v15 = *v14;
    v16 = (float)*((signed int *)v2 + 11) * *v14;
    v17 = ceilf(*(float *)&v14);
    v18 = *((_DWORD *)v2 + 10);
    v19 = (float)(signed int)v16;
    v20 = (float)*((signed int *)v2 + 10) * v15;
    ceilf(v17);
    v21 = (signed int)v20 & 0xFFFFFFF8;
    v22 = (((signed int)v20 + 7) & 0xFFFFFFF8) - (signed int)v20;
    if ( (unsigned __int8)(((signed int)(v21 - (signed int)v20 + v22) < 0) ^ __OFADD__(v21 - (signed int)v20, v22)) | (v21 - (signed int)v20 + v22 == 0) )
      v21 = ((signed int)v20 + 7) & 0xFFFFFFF8;
    v23 = (float)v21 / (float)(signed int)v20;
    v32 = (signed int)(float)(v19 * v23);
    nna_resize_once(v31, v21, v32, *((_DWORD *)v2 + 9), v18, v13, 0, 0, v18 - 1, v13 - 1);
    v39 = 0;
    v40 = 0;
    v41 = 0;
    nna_net_fd1_init(v21, v32, 1);
    v25 = nna_net_fd1_get_score_size();
    nna_net_fd1_get_location_size();
    v26 = nna_net_fd1_get_score_w();
    v27 = nna_net_fd1_get_score_h();
    nna_net_fd1_get_score_c();
    if ( v21 > 240 )
      nna_fd1_big(v34, v31, v25);
    else
      nna_fd1(v34, v31, v21, v32);
    nna_data_to_mat((char *)v2 + 48, v33, v26, v27, 2);
    nna_data_to_mat((char *)v2 + 42304, v25 + v33, v26, v27, 4);
    v28 = 4 * v27 * v26;
    i8_to_float((char *)v2 + 84560, (char *)v2 + 48, 1, *((_DWORD *)v2 + 105669), 4 * v27 * v26);
    i8_to_float((char *)v2 + 253584, (char *)v2 + 42304, 1, *((_DWORD *)v2 + 105670), 4 * v27 * v26);
    nna_m_softmax((char *)v2 + 84560, v26);
    v45 = v26;
    v46 = v27;
    v52 = v26;
    v53 = v27;
    v43 = (FDNET *)((char *)v2 + 84560);
    v44 = 0;
    v47 = 2;
    v48 = ((unsigned int)(v28 + 15) >> 2) & 0x3FFFFFFC;
    v51 = 0;
    v55 = ((unsigned int)(v28 + 15) >> 2) & 0x3FFFFFFC;
    v42 = 3;
    v49 = 3;
    v54 = 4;
    v50 = (FDNET *)((char *)v2 + 253584);
    ncnn::Mat::Mat(&v56, &v42);
    ncnn::Mat::Mat(&v57, &v49);
    v29 = v23 * *((float *)v36 + v12);
    FDNET::generateBbox((int)v2, (int)&v56, (int)&v57, (int)&v39);
    ncnn::Mat::release((ncnn::Mat *)&v57);
    ncnn::Mat::release((ncnn::Mat *)&v56);
    v30 = *((_DWORD *)v2 + 105652);
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string((int *)&v57, "Union");
    FDNET::NNA_nms((void **)v2, &v39, (int)&v57);
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(&v57);
    std::vector<Bbox,std::allocator<Bbox>>::_M_range_insert<__gnu_cxx::__normal_iterator<Bbox*,std::vector<Bbox,std::allocator<Bbox>>>>(
      (char **)v2,
      *((void **)v2 + 1),
      v39,
      (int)v40);
    ++v12;
    v40 = v39;
    ncnn::Mat::release((ncnn::Mat *)&v49);
    ncnn::Mat::release((ncnn::Mat *)&v42);
    std::_Vector_base<Bbox,std::allocator<Bbox>>::~_Vector_base((void **)&v39);
  }
  if ( v36 )
    operator delete(v36);
}
// 3AF4: using guessed type int __fastcall nna_data_to_mat(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AF8: using guessed type int __fastcall i8_to_float(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 3AFC: using guessed type int __fastcall nna_m_softmax(_DWORD, _DWORD);
// 3B50: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(_DWORD);

//----- (000036F4) --------------------------------------------------------
void __fastcall FDNET::NNA_FD_RUN_IMG(FDNET *a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4
  int v6; // s16
  int v7; // s16
  int v8; // s16
  char v9; // [sp+8h] [bp-48h]

  v5 = (int)a1;
  *((_DWORD *)a1 + 11) = a4;
  *((_DWORD *)a1 + 10) = a3;
  *((_DWORD *)a1 + 9) = a2;
  *(_DWORD *)(a5 + 4) = *(_DWORD *)a5;
  FDNET::NNA_FD1(a1);
  if ( *(_DWORD *)v5 == *(_DWORD *)(v5 + 4) )
    goto LABEL_9;
  v6 = *(_DWORD *)(v5 + 422608);
  std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string((int *)&v9, "Union");
  FDNET::NNA_nms((void **)v5, (char **)v5, (int)&v9);
  std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(&v9);
  FDNET::refine(v5, (int *)v5, (_DWORD *)(v5 + 44), (_DWORD *)(v5 + 40), 1);
  FDNET::NNA_FD2((FDNET *)v5);
  if ( !(-858993459 * ((*(_DWORD *)(v5 + 16) - *(_DWORD *)(v5 + 12)) >> 4)) )
    goto LABEL_9;
  v7 = *(_DWORD *)(v5 + 422612);
  std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string((int *)&v9, "Union");
  FDNET::NNA_nms((void **)v5, (char **)(v5 + 12), (int)&v9);
  std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(&v9);
  FDNET::refine(v5, (int *)(v5 + 12), (_DWORD *)(v5 + 44), (_DWORD *)(v5 + 40), 1);
  FDNET::NNA_FD3((FDNET *)v5);
  if ( *(_DWORD *)(v5 + 24) != *(_DWORD *)(v5 + 28) )
  {
    FDNET::refine(v5, (int *)(v5 + 24), (_DWORD *)(v5 + 44), (_DWORD *)(v5 + 40), 1);
    v8 = *(_DWORD *)(v5 + 422616);
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::basic_string((int *)&v9, "Min");
    FDNET::NNA_nms((void **)v5, (char **)(v5 + 24), (int)&v9);
    std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(&v9);
    std::vector<Bbox,std::allocator<Bbox>>::operator=((char **)a5, (char **)(v5 + 24));
  }
  else
  {
LABEL_9:
    *(_DWORD *)(a5 + 4) = *(_DWORD *)a5;
  }
}
// 3B50: using guessed type int __fastcall std::__cxx11::basic_string<char,std::char_traits<char>,std::allocator<char>>::_M_dispose(_DWORD);

//----- (000038E4) --------------------------------------------------------
int GLOBAL__sub_I_nna_dnet_cpp()
{
  std::ios_base::Init::Init((std::ios_base::Init *)&std::__ioinit);
  return _aeabi_atexit(&std::__ioinit, &std::ios_base::Init::~Init, &_dso_handle);
}
// 3B7C: using guessed type int __fastcall _aeabi_atexit(_DWORD, _DWORD, _DWORD);
// 3B80: using guessed type _DWORD __cdecl std::ios_base::Init::~Init(std::ios_base::Init *__hidden this);

// ALL OK, 58 function(s) have been successfully decompiled
